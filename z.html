<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=0.55, maximum-scale=0.55, minimum-scale=0.55, user-scalable=0">
    <title>2048 BRIX</title>
    <style>
        body {
            -webkit-tap-highlight-color : rgba(0,0,0,0);
            overflow-x: hidden;
            overflow-y: hidden;
            width:100%;
            height: 100%;
            margin: 0;
            /* overscroll-behavior-y: none;
            overscroll-behavior-x: none; */
        }
        canvas {

            /* overflow-x: hidden;
            overflow-y: hidden; */
            position: absolute;
            display: block;
            /* z-index: 1000; */
        }

        #fps{
          left:45%;
          font-family: 'GG';
          color: white;
          font-size: 2vh;
          z-index: 2;
          background-color: rgba(0,0,0,0);
          position: absolute;
          top:0%;

        }

        #grid0{
          background-color: rgba(100, 195, 0, 0.7);
          transform: translate(3vw, -16vw);
          width:42%;
          position: absolute;
        }

        #grid0.set{
          background-color: rgba(20, 150, 225, 0.7);
          background-image: none;
        }

        #grid1{
          background-color: rgba(100, 195, 0, 0.7);
          transform: translate(49vw, -16vw);
          width:42%;
          position: absolute;
        }

        #grid1.set{
          background-color: rgba(20, 150, 225, 0.7);
          background-image: none;
        }

        #lowerbtn{
          position: absolute;
          bottom:1%;
          display: inline-flex;
        }

        .lockimg{
          position: absolute;
          width: 20vw;
          height: 20vw;
          top:-7%;
          /* background-size: cover; */
        }

        .miximg{
          position: absolute;
          width: 15vw;
          height: 15vw;
          top:-0.1%;
          /* background-size: cover; */
        }

        #tutorial {
          position: absolute;
          width: 100%;
          height: 100%;
          display: flex;
          flex-direction: column;
          align-items: center;
          /* justify-content: center; */


        }

        #tutorial img{
          position: relative;
          /* top:60vw%; */
          width: 86vw;
          top:7%;
          z-index: 1;
          /* height: 40vw; */
          /* bottom:20%; */
          /* height: 90%; */

        }

        .backbutton6 {
            position: fixed;
            border: none;
            background-color: transparent;
            background-image: url("png/red_boxCross.png");
            background-size: 10vw 10vw;
            top: 6vh;
            left: 5%;
            width: 10vw;
            height: 10vw;
            z-index: 2;
            align-items: center;
        }

        #credit-info {
            /* left:10%; */
            width: 100%;
            height: 90%;
            /* background-color: rgba(0, 0, 0, 0.8); */
            /* font-family: 'GG'; */
            color: white;
            font-size: 1vh;
            position: absolute;
            /* left: 4vw; */
            display: flex;
            flex-direction: column;
            /* align-items: center; */
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        #credit-info div{
            /* overflow-y: scroll; */
            position: absolute;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 2vw;
            width: 80%;
            height: 60%;
            z-index: 1;
            /* background-color: rgba(0, 0, 0, 0.8); */
            /* font-family: 'GG'; */

        }

        #credit-info h2{
            /* z-index: 1; */
            /* font-size: 1vh; */
            /* background-color: rgba(0, 0, 0, 0.8); */
            /* font-family: 'GG'; */
        }

        #credit-info button{
          /* z-index: 3; */
            /* z-index: 1; */
            /* font-size: 1vh; */
            /* background-color: rgba(0, 0, 0, 0.8); */
            /* font-family: 'GG'; */
        }


        #tut-info{
          opacity: 0;
          display: flex;
          flex-direction: column;
          top:0vw;
          font-family: 'GG';
          position: absolute;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0);
          /* align-items: center; */
          z-index: 1;
          text-align: center;
          transition: opacity 1.8s;
        }

        #tut-info label{
          opacity:1;
          position:relative;
          top: 50%;
          color:white;
          font-size: 7vw;
          transition: opacity 1.8s;
        }


        #coin-info {
            font-family: 'GG';
            color: white;
            font-size: 2vh;
            position: absolute;
            top: -1%;
            right: 6%;
            /* left: 4vw; */
            display: inline-flex;
            z-index: 1;
            align-items: center;
            justify-content: center;
            text-align: center;
            /*opacity: 1;*/
            /*transition: opacity 0.15s ease-in-out;*/
        }

        #song-info {
            font-family: 'GG';
            color: white;
            font-size: 1vh;
            position: absolute;
            top: 43%;
            /* left: 4vw; */
            width:100%;
            display: inline-flex;
            z-index: 1;
            align-items: center;
            justify-content: left;
            text-align: left;
            transition: opacity 0.4s, left 1.4s;
            /*opacity: 1;*/
            /*transition: opacity 0.15s ease-in-out;*/
        }
        #playing{
            margin-left: 6vw;
            margin-right: 1vw;
            font-size: 3vh;
            z-index: 2;

        }
        #artist-name{
            margin-bottom: : 0;
            transform: translate(0, 1.8vw);
            /* margin-left: 1vw; */
            font-size: 1.2vh;
            color:black;
            z-index: 2;

        }

        #song-title{
            /* margin-left: 1vw; */
            transform: translate(0, -1vw);
            font-size: 1.8vh;
            color:black;
            margin-top: 0;
            z-index: 2;

        }

        #songtxt{
            align-items: left;
            justify-content: center;
            display: flex;
            flex-direction: column;
            margin-top: 0;
            z-index: 2;


        }

        #song-dash1{
            margin-left: 1vw;
            font-size: 1.5vh;
            color:black;
            z-index: 2;

        }

        #song-dash2{
            font-size: 1.5vh;
            color:black;
            z-index: 2;
        }

        #songback{
            position: absolute;
            width: 250vw;
            left:-24%;
            height: 60%;
            background-color: rgba(0, 0, 0, 0.3);
            background-size: cover;
            /* z-index: 2; */
            display: inline-flex;
            /* flex-direction: ; */


        }

        #songback1{
          width: 3%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.8);
            /* position: absolute; */
            /* z-index: 2; */
        }
        #songback2{
          width: 3%;
          height: 100%;
          background-color: rgba(200, 0, 0, 0.8);
            /* position: absolute; */
            /* z-index: 2; */
        }
        #songback3{
          width: 3%;
          height: 100%;
          background-color: rgba(0, 200, 0, 0.8);
            /* position: absolute; */
            /* z-index: 2; */
        }

        #songback4{
          width: 2%;
          height: 100%;
          background-color: rgba(0, 200, 0, 0.8);
            /* position: absolute; */
            /* z-index: 2; */
        }


        .hidden {
            display:none;
            opacity: 0;
        }

        .visible {
            opacity: 1;
            display: inline;
        }

        .fade {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.1s ease;
        }

        .show1 {
            opacity: 1;
            pointer-events: none;
            transition: opacity 1s ease;
        }

        .show {
            opacity: 1;
            pointer-events: all;
            transition: opacity 0.1s ease;
        }

        #song-info.moveleft{
          left:0%;
          transition: opacity 0.4s, left 0s;

        }



        @font-face {
            font-family: 'GG';
            /*글꼴*/
            /*src: local('GG'),*/
            src: url('src/kenvector_future_thin.ttf') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        * {
            box-sizing: border-box;
        }

        .mute-btn img {
            width: 3vh;
            height: 3vh;
        }

        #skin-left {
            /*position: absolute;*/
            left: 10%;
            font-family: 'GG';
            /*margin-left: 1vw;*/
            font-size: 2vw;
            background-color: transparent;
            background-image: url("png/yellow_sliderLeft.png");
            background-size: 7vw 7vw;
            border: none;
            width: 7vw;
            height: 7vw;
            cursor: pointer;
            margin: 0 3vw;
        }

        #skin-right {
            /*position: absolute;*/
            right: 10%;
            font-family: 'GG';
            /*margin-left: 2vw;*/
            font-size: 2vw;
            background-color: transparent;
            background-image: url("png/yellow_sliderRight.png");
            background-size: 7vw 7vw;
            border: none;
            width: 7vw;
            height: 7vw;
            cursor: pointer;
            margin: 0 3vw;
        }

        #skin-middle {
            display: inline-flex;
            align-items: center;
        }

        #skin-middle img {
            width: 12vw;
            margin: 0 1vw;
        }

        .option-RL {
            display: flex;
            /*flex-direction: column;*/
            align-items: center;
        }

        #shop {

            margin-top: 15vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            /*justify-content: center;*/
        }

        #shop.hidden{

            display: none;

        }

        #categ1 {

            margin-top: 15vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            /*justify-content: center;*/
        }

        #categ1.hidden{

            display: none;

        }

        .button-column {
            overflow-y: scroll;
            display: flex;
            flex-direction: column;
            align-items: center;
            /*height: 100%;*/
            /*justify-content: center;*/
            padding: 70px;
        }

        .upper {
            position: absolute;
            width: 100%;
            height: 15%;
            /*background-color: rgba(0, 0, 250, 0.1);*/
            z-index: 1;
        }

        .lower {
            position: absolute;
            width: 100%;
            height: 8%;
            bottom: 0%;
            background-color: rgba(0, 0, 250, 0.2);
            z-index: 1;
        }

        .color1 {
            position: relative;
            width: 75vw;
            height: 21vw;
            top: -21vw;
            /*    left:vw;*/
            /*right: 4000px;*/
            /* background-color: rgba(255, 0, 255, 0.1); */
            /*padding: 20px;*/
            border-radius: 2vw;
            /*max-width: 90%;*/
            /*box-sizing: border-box;*/
            z-index: 0;
        }

        .color1:active {
            height: 19vw;
        }

        .color2 {
            position: relative;
            width: 75vw;
            height: 21vw;
            top: -21vw;
            /*right: 4000px;*/
            /* background-color: rgba(255, 255, 0, 0.1); */
            /*padding: 20px;*/
            border-radius: 2vw;
            /*max-width: 90%;*/
            /*box-sizing: border-box;*/
            z-index: 0;
        }

        .color2:active {
            height: 19vw;
        }

        .color3 {
            position: relative;
            width: 75vw;
            height: 21vw;
            top: -21vw;
            /*right: 4000px;*/
            /* background-color: rgba(0, 0, 255, 0.1); */
            /*padding: 20px;*/
            border-radius: 2vw;
            /*max-width: 90%;*/
            /*box-sizing: border-box;*/
            z-index: 0;
        }
        .color3:active {
            height: 19vw;
        }
        .color4 {
            position: relative;
            width: 75vw;
            height: 21vw;
            top: -21vw;
            /*right: 4000px;*/
            /* background-color: rgba(0, 255, 255, 0.1); */
            /*padding: 20px;*/
            border-radius: 2vw;
            /*max-width: 90%;*/
            /*box-sizing: border-box;*/
            z-index: 0;
        }

        .color4:active {
            height: 19vw;
        }

        .cat-button img{
            /*transform: translate(0%, -20%);*/
            top: 0%;
            left: 0%;
            /*position:absolute;*/
            width: 80vw;
            height: 15vw;
            /*size:cover;*/
            /*display:none;*/
            z-index: 1;
        }

        #img2 {
            /*transform: translate(0%, -20%);*/
            top: 0%;
            left: 0%;
            /*position:absolute;*/
            width: 55vw;
            /* height: 15vw; */
            /*size:cover;*/
            /*display:none;*/
            z-index: 1;
        }
        .cat-button {
            font-family: 'GG';
            width: 85vw;
            height: 22vw;
            /*background-color: #ccc;*/
            /*width:500px;*/
            /* background-color: transparent;
            background-image: url("png/grey_button01.png"); */
            background-size: 85vw 22vw;
            background-color: rgba(250, 250, 250, 0.8);
            border-radius: 4vw;
            border: 1vw rgba(250, 250, 250, 0.5) outset;
            color: #000;
            cursor: pointer;
            font-size: 3vw;
            margin-bottom: 3vw;
            padding: 2vw 0;
            text-align: center;
            z-index: 1;
        }

        .cat-button:active {
            /* background-image: url("png/grey_button02.png"); */
            transform: translate(0, 1vw);
            width: 85vw;
            height: 21vw;
            background-size: 85vw 21vw;
            border: 1vw rgba(250, 250, 250, 0.5) inset;
            margin-bottom: 4vw;
            color: rgba(255, 0, 255, 0.0);
            /*font-size: 0;*/
        }

        .ad-button {
            font-family: 'GG';
            width: 85vw;
            height: 21vw;
            /*background-color: #ccc;*/
            /*width:500px;*/
            /* background-color: transparent; */
            /* background-image: url("png/yellow_button00.png"); */
            background-size: 85vw 21vw;
            background-color: rgba(250, 240, 50, 0.6);
            border-radius: 4vw;
            border: 1vw rgba(250, 240, 50, 0.5) outset;
            color: #000;
            cursor: pointer;
            font-size: 3vw;
            margin-bottom: 3vw;
            padding: 0 0;
            text-align: center;
            z-index: 1;
        }

        .ad-button:active {
            /* background-image: url("png/yellow_button01.png"); */
            transform: translate(0, 1vw);
            border: 1vw rgba(250, 240, 50, 0.5) inset;
            width: 85vw;
            height: 20vw;
            background-size: 85vw 20vw;
            margin-bottom: 4vw;
            /*color: rgba(255, 0, 255, 0.0);*/
            /*font-size: 0;*/
        }

        .ap-button {
            font-family: 'GG';
            width: 85vw;
            height: 21vw;
            /*background-color: #ccc;*/
            /*width:500px;*/
            /* background-color: transparent;
            background-image: url("png/blue_button00.png"); */
            background-size: 85vw 21vw;
            background-color: rgba(10, 101, 250, 0.6);
            border-radius: 4vw;
            border: 1vw rgba(10, 101, 250, 0.5) outset;
            color: #000;
            cursor: pointer;
            font-size: 3vw;
            margin-bottom: 3vw;
            padding: 0 0;
            text-align: center;
            z-index: 1;
        }

        .ap-button:active {
            /* background-image: url("png/blue_button01.png"); */
            transform: translate(0, 1vw);
            border: 1vw rgba(10, 101, 250, 0.5) inset;
            width: 85vw;
            height: 20vw;
            background-size: 85vw 20vw;
            margin-bottom: 4vw;
            /*color: rgba(255, 0, 255, 0.0);*/
            /*font-size: 0;*/
        }

        .pbutton {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;

            font-family: 'GG';
            width: 65vw;
            height: 21vw;

            background-size: 65vw 21vw;
            background-color: rgba(10, 101, 200, 0.8);
            border-radius: 4vw;
            border: 1vw rgba(10, 101, 200, 0.5) outset;
            color: #000;
            cursor: pointer;
            font-size: 3vw;
            margin-bottom: 3vw;
            padding: 0 0;
            text-align: center;
            z-index: 1;
        }

        .pbutton img {
            margin-right: 4vw;
            width: 25%;
        }

        .pbutton h1 {
            display: none;
        }

        .pbutton:active {
            /* background-image: url("png/blue_button01.png"); */
            transform: translate(0, 1vw);
            border: 1vw rgba(10, 101, 200, 0.5) inset;
            width: 65vw;
            height: 20vw;
            background-size: 65vw 20vw;
            /*margin-bottom: 5vw;*/
            /*color: rgba(255, 0, 255, 0.0);*/
            /*font-size: 0;*/
        }

        .sbutton {
            margin-left: 3vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'GG';
            width: 21vw;
            height: 21vw;
            background-color: rgba(10, 250, 250, 0.4);
            border: 1vw rgba(10, 250, 250, 0.5) outset;
            border-radius: 4vw;
            background-size: 21vw 21vw;
            color: #000;
            cursor: pointer;
            font-size: 2vw;
            margin-bottom: 3vw;
            padding: 0 0;
            text-align: center;
            z-index: 1;
        }

        .sbutton img {
            /* margin-right: 4vw; */
            width: 10vw;
        }

        .sbutton h1 {
            display: none;
        }

        .sbutton:active {
            transform: translate(0, 2vw);
            width: 21vw;
            height: 19vw;
            background-size: 21vw 19vw;
            border: 1vw rgba(10, 250, 250, 0.5) inset;
            /*margin-bottom: 5vw;*/
            /*color: rgba(255, 0, 255, 0.0);*/
            /*font-size: 0;*/
        }

        .c-button {
            width: 85vw;
            height: 21vw;
            /*background-color: #ccc;*/
            /*width:500px;*/
            background-color: transparent;
            /* background-image: url("png/grey_button01.png"); */
            background-size: 85vw 21vw;
            background-color: rgba(200, 200, 200, 0.8);
            border-radius: 4vw;
            color: #000;
            /*cursor: pointer;*/
            margin-bottom: 3vw;
            padding: 2vw 0;
            font-family: 'GG';
            text-align: center;
            font-size: 3vw;
            z-index: 0;
        }

        .c-button:active {
            /* background-image: url("png/yellow_button01.png"); */
            transform: translate(0, 2vw);
            width: 75vw;
            height: 19vw;
            background-size: 75vw 19vw;
            margin-bottom: 5vw;
            /*color: rgba(255, 0, 255, 0.0);*/
            /*font-size: 0;*/
        }

        #intro {
            /* opacity:1; */
            top:0vw;
            font-family: 'GG';
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 1);
            /* align-items: center; */
            z-index: 3;
            text-align: center;
            transition: opacity 2.8s, top 1.2s ease;

        }
        #intro label{
          opacity:0.8;
          position: relative;
          left:2vw;
          top:20%;
          color:black;

          font-size: 15vw;
        }

        #intro div{
          opacity:0;
          position: relative;
          left:2vw;
          top:60%;
          color:white;
          font-size: 8vw;
          transition: opacity 1s;
        }


        .options-overlay {

            position: absolute;
            overflow-x: scroll;
            font-family: 'GG';
            width: 100%;
            height: 100%;
            background-color: rgba(200, 200, 200, 0.5);
            display: flex;
            justify-content: center;

        }

        #pop-info{
          font-family: 'GG';
          font-size: 4vw;
          position: absolute;
          display: flex;
          flex-direction: column;
          z-index: 2;
          background-color: rgba(50, 50, 50, 0.6);
          /* opacity:0.6; */
          border-radius: 4vw;
          border: 0px solid #000;
          top:2vw;
          left: 30vw;
          width: 41%;
          height: 8vw;
          justify-content: center;
          /* align-items: center; */
          margin-bottom: 5vw;
          padding-left: 2vw;
          transition: opacity 0.4s, top 0.4s;
        }


        #popline1 {
          display: inline-flex;
          align-items: left;
          color:rgba(255, 255, 255, 0.8);


        }

        #popline1 .p1{
          margin-left:0.5vw;
        }

        #popline1 .p2{
            margin-left: 2vw;
        }

        #popline1 .p3{
            margin-top: 0.5vw;
            position: absolute;
            left:57%;
        }

        .gameover-overlay {
            /*overflow-y: scroll;*/
            position: absolute;
            display: flex;
            font-family: 'GG';
            width: 100%;
            height: 100%;
            justify-content: center;
            align-items: center;
        }

        .gameover-container {
            background-color: rgba(150, 100, 150, 0);
            display: flex;
            font-family: 'GG';
            width: 100%;
            height: 80%;
            border-radius: 4vw;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            /*    margin: 240px 0;*/
        }

        .gameover-container button {
            position: fixed;
            right: 10%;
            font-family: 'GG';

            margin: 4vw 0;
        }

        .gameinfo1 {
            font-size: 15vw;
            color:white;
            display: inline-flex;
            z-index: 2;
            /* flex-direction: column; */
            background-color: rgba(50, 50, 50, 0.3);
            border-radius: 4vw;
            border: 0px solid #000;
            width: 85%;
            height: 10%;
            justify-content: center;
            align-items:baseline;
            margin-bottom: 3vw;
            padding-left: 5vw;
            /* padding-bottom: 4vw; */

        }

        .gameinfo1 .a{

        }

        .gameinfo1 .b{
          font-size: 9vw;
        }



        .gameinfo0 {
            font-size: 7vw;
            color:white;
            display: inline-flex;
            z-index: 2;
            flex-direction: column;
            background-color: rgba(50, 50, 50, 0.6);
            border-radius: 4vw;
            border: 0px solid #000;
            width: 75%;
            height: 15%;
            justify-content: center;
            align-items: center;
            margin-bottom: 5vw;
            padding-left: 2vw;
        }

        .gameinfo {
            font-size: 2vw;
            color:white;
            display: flex;
            flex-direction: column;
            z-index: 2;
            background-color: rgba(50, 50, 50, 0.6);
            border-radius: 4vw;
            border: 0px solid #000;
            width: 75%;
            height: 50vw;
            justify-content:flex-start;
            align-items: left;
            margin-bottom: 0vw;
            margin-top: 0vw;
            padding-left: 2vw;

        }

        .gameinfo span{
            font-size: 4vw;
            padding-left: 2vw;
            display: inline-flex;
            justify-content: baseline;
            /* justify-content: center; */
        }

        .gameinfo span.hidden{

            display: none;

        }

        .gameinfo .a{
          font-size: 4vw;
        }

        .gameinfo .b{
          color: #ccc;
          position: absolute;
          font-size: 4vw;
          margin-left: 16vw;
          margin-top: 0.5vw;
        }

        .gameinfo .c{
          font-size: 4vw;
          position: absolute;
          left:70%;
        }

        .gameinfo .d{
          font-size: 5vw;
          margin-top: 1vw;
        }

        .gameinfo .e{
            font-size: 5vw;
            margin-left: 2vw;
            margin-top: 1vw;
        }

        .gameinfo .f{
            font-size: 5vw;
            margin-top: 1vw;
            position: absolute;
            left:69%;
        }


        #코인{
          position: relative;
          font-size: 5vw;
          left:35%;
          color:white;
        }

        .gameover {
            font-size: 5vw;
            color:white;
            display: inline-flex;
            z-index: 2;
            flex-direction: row;
            background-color: rgba(50, 100, 100, 0.3);
            width: 100%;
            height: 8vh;
            justify-content: center;
            align-items: center;
            margin-top: 5vw;
        }

        .gameoverbt {
            /* font-size: 6vw; */
            /* border: none; */
            /* background-color: transparent; */
            /* background-image: url("png/blue_button11.png");
             */

             /* right:-2vw; */

            background-color: rgba(50, 50, 130, 0.3);
            border-radius: 3vw;
            background-size: 8vh 6vh;
            width: 8vh;
            height: 6vh;
            z-index: 2;
            margin-left: 1vw;
            margin-bottom: 1vw;
        }

        .gameoverbt img {
            width: 4vh;
            height: 4vh;
            z-index: 2;
        }

        .gameoverbt:active {

            transform: translate(0, 0.2vh);
            background-size: 8vh 5.8vh;
            width: 8vh;
            height: 5.8vh;
        }

        .mod-overlay {
            /*overflow-y: scroll;*/
            position: absolute;
            display: flex;
            flex-direction: column;
            font-family: 'GG';
            width: 100%;
            height: 100%;
            justify-content: center;
            align-items: center;
        }

        .modinfo1 {
            font-size: 11vw;
            color:white;
            display: inline-flex;
            z-index: 2;
            /* flex-direction: column; */
            background-color: rgba(50, 50, 50, 0.6);
            border-radius: 4vw;
            border: 5px solid rgba(20, 20, 20, 0.7);
            width: 85%;
            height: 10%;
            justify-content: center;
            align-items:center;
            margin-bottom: 5vw;
            /* padding-left: 5vw; */

        }

        .modinfo1 .a{

        }



        .mod-container {
            background-color: rgba(100, 100, 100, 0.5);
            display: flex;
            font-family: 'GG';
            width: 98%;
            height: 30%;
            border-radius: 4vw;
            border-radius: 4vw;
            border: 0px solid #000;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            font-size: 2vh;
            z-index: 2;
            /*    margin: 240px 0;*/
        }

        .mod-container button {
            /* position: fixed; */
            right: 10%;
            font-family: 'GG';
            font-size: 10vw;
            margin: 4vw 0;
        }

        .mod {
            display: flex;
            z-index: 2;
            flex-direction: column;

            width: 100%;
            height: 80%;
            background-color: rgba(50, 50, 50, 0);

            justify-content: center;
            align-items: center;
        }

        .modbt {
            /* border: none; */
            background-color: transparent;
            /* background-image: url("png/grey_button10.png"); */

            background-size: 12vh 10vh;
            background-color: rgba(50, 50, 50, 0.3);
            border-radius: 4vw;
            width: 12vh;
            height: 10vh;
            z-index: 2;
            margin-bottom: 1vw;
        }

        .modbt img {
            width: 6vh;
            height: 6vh;
            z-index: 2;
        }

        .modbt:active {
            /* background-image: url("png/blue_button08.png"); */
            transform: translate(0, 0.5vh);
            background-size: 12vh 10.5vh;
            width: 12vh;
            height: 10.5vh;
            margin-bottom: 2.5vh;
        }


        .setting-overlay {
            /*font-size: 1vw;*/
            position: absolute;
            /*overflow-x: scroll;*/
            font-family: 'GG';
            /*position: fixed;*/
            /*position: absolute;*/
            /*right: 4000px;*/
            /*top: 0;
        left: 0;*/
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            /*z-index: 1;*/
        }
        #myRange{
          position: absolute;
          width: 50vw;
          height: 10vw;
          top:25%;
          z-index: 2;

        }

        #demo{
          color:white;
          font-size: 10vw;
          position: absolute;
          /* width: 50vw; */
          top:14%;
          z-index: 2;

        }

        #setting-back {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: rgba(100, 100, 100, 0.4);
            z-index: 2;
        }

        .setting-grid {
            justify-content: center;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 7vw;
            /*background-color: rgba(50, 100, 250, 0.3);*/
        }



        .setting-grid button {
            border-radius: 3vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            /*    margin: 10vw 0;*/
            color: white;
            font-family: 'GG';
            text-align: center;
            font-size: 0.2vh;
        }

        .setting-grid label {
            margin: 2vh 1vh;
            font-size: 1.4vh;
        }

        .container {
            /*position: absolute;*/
            /* overflow-y: hidden; */
            overflow-x: hidden;
            font-family: 'GG';
            /*top:1000px;*/
            width: 100%;
            height: 100%;
            background-color: rgba(150, 180, 200, 0.8);
            display: block;
            flex-direction: column;
            align-items: center;
            /*margin-top: 5vh;*/
            z-index: 1;
        }

        .step1{
          overflow-y: scroll;
        }

        .title {
            z-index: 1;
            font-family: 'GG';
            /*position: absolute;*/
            color:white;
            left: 40%;
            text-align: center;
            /*align-items: center;*/
            font-size: 4vh;
            margin: 20px 0;
        }

        .progress-container {
            /*display: none;*/
            flex-grow: 1;
            /*padding-left: 70%;*/
            /*padding:10%;*/
            /* padding-left: 2%;
        padding-right: 2%;*/
            width: 60%;
            text-align: right;
            margin-bottom: 18vw;
        }

        .progress {
            /*display: none;*/
            background-color: #f3f3f3;
            border: 1px solid #ccc;
            border-radius: 5px;
            height: 15px;
            width: 100%;
        }

        .progress-bar {
            /*display: none;*/
            background-color: #4caf50;
            border-radius: 5px;
            height: 100%;
        }


        .backbutton {
            position: fixed;
            background-color: transparent;
            background-color: rgba(50, 50, 50, 0.3);
            border-radius: 3vw;
            background-size: 15vw 10vw;
            top: 3vw;
            left: 4%;
            width: 15vw;
            height: 10vw;
            z-index: 2;
            align-items: center;
            justify-content: center;
        }

        .backbutton:active {
            /* background-image: url("png/red_button10.png"); */
            transform: translate(0, 0.4vw);
            background-size: 15vw 9.6vw;
            width: 15vw;
            height: 9.6vw;
        }

        .backbutton img{
            width: 6vw;
            height: 6vw;
        }

        .left {
            position: absolute;
            border: none;
            background-color: transparent;

            background-size: 6vh 4vh;
            bottom: 1vh;
            left: 3%;
            width: 6vh;
            height: 4vh;
            z-index: 2;
        }

        .left:active {

            transform: translate(0, 0.2vh);
            background-size: 6vh 3.8vh;
            width: 6vh;
            height: 3.8vh;
            /*     margin-bottom: 1vw;*/
            /*font-size: 0;*/
        }

        .left img {
            width: 4vh;
            height: 4vh;
            z-index: 2;
        }

        #leftup {
            position: absolute;
            border: none;
            background-color: transparent;
            /* background-image: url("png/green_button09.png"); */
            background-size: 6vh 4vh;
            top: 1vh;
            left: 3%;
            width: 6vh;
            height: 4vh;
            z-index: 2;
        }

        #leftup img {
            width: 4vh;
            height: 4vh;
            z-index: 2;
        }

        #leftup:active {
            /* background-image: url("png/green_button10.png"); */
            transform: translate(0, 0.2vh);
            background-size: 6vh 3.8vh;
            width: 6vh;
            height: 3.8vh;
        }

        .center {
            position: absolute;
            border: none;
            background-color: transparent;
            /* background-image: url("png/green_button09.png"); */
            background-size: 6vh 4vh;
            bottom: 1vh;
            right: 45%;
            width: 6vh;
            height: 4vh;
            z-index: 2;
        }

        .center img {
            width: 4vh;
            height: 4vh;
            z-index: 2;
        }

        .center:active {
            /* background-image: url("png/green_button10.png"); */
            transform: translate(0, 0.2vh);
            background-size: 6vh 3.8vh;
            width: 6vh;
            height: 3.8vh;
        }

        .right {
            position: absolute;
            border: none;
            background-color: transparent;
            /* background-image: url("png/green_button09.png"); */
            background-size: 6vh 4vh;
            bottom: 1vh;
            right: 3%;
            width: 6vh;
            height: 4vh;
            z-index: 2;
        }

        .right img{
            width: 4vh;
            height: 4vh;
            z-index: 2;
        }

        .right:active {
            /* background-image: url("png/green_button10.png"); */
            transform: translate(0, 0.2vh);
            background-size: 6vh 3.8vh;
            width: 6vh;
            height: 3.8vh;
        }

        .optionlst {
            /*    opacity: 0;*/
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            bottom: 5vh;
            right: 3%;
            z-index: 2;
        }

        .optionlst button{
          background-size: 6vh 4vh;
          background-color: rgba(0, 0, 0, 0);
          border: none;
          width: 6vh;
          height: 4vh;
          margin-bottom: 2vh;

            /* display:none; */
        }

        .optionlst button:active {
            transform: translate(0, 0.2vh);
            background-size: 6vh 3.8vh;
            width: 6vh;
            height: 3.8vh;
            margin-bottom: 2.2vh;
        }

        .optionlst img{
          width: 4vh;
          height: 4vh;
          /* z-index: 2; */
        }

        .setting {
            /* border: none; */
            background-color: transparent;
            /* background-image: url("png/green_button09.png");
             */
            background-color: rgba(50, 50, 50, 0.3);
            border-radius: 20px;
            background-size: 9vh 6vh;
            width: 9vh;
            height: 6vh;
            z-index: 2;
            margin-bottom: 2vw;
        }

        .setting img {
            margin-top: 1vw;
            width: 4vh;
            height: 4vh;
            z-index: 2;
        }

        .setting:active {
            /* background-image: url("png/green_button10.png"); */
            transform: translate(0, 0.4vh);
            background-size: 9vh 5.6vh;
            width: 9vh;
            height: 5.6vh;
        }

        #option{
            /*    position: re;*/
            border: none;
            background-color: transparent;
            /* background-image: url("png/green_button09.png"); */
            background-size: 6vh 4vh;
            width: 6vh;
            height: 4vh;
            z-index: 2;
            margin-bottom: 3vw;
        }

        #option img {
            width: 4vh;
            height: 4vh;
            z-index: 2;
        }

        #option:active {
            /* background-image: url("png/green_button10.png"); */
            transform: translate(0, 0.2vh);
            background-size: 6vh 3.8vh;
            margin-top: 0.2vh;
            width: 6vh;
            height: 3.8vh;
        }

        .grid {
            justify-content: center;
            position: relative;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 10px;
            /*padding: 80px;*/
            width: 90%;
            /*align-items: center;*/
        }

        .character{
            /*font-size: 10px;*/
            background-color: rgba(200, 213, 200, 0.7);
            border-radius: 4vw;
            border: 1vw outset rgba(200, 213, 200, 0.5);
            /* border-radius: 20px; */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            cursor: pointer;
        }

        .character.set{
            background-color: rgba(70, 150, 170, 0.7);
            border: 1vw inset rgba(70, 150, 170, 0.5);
            background-image: url("png/set.png");
            background-size:cover;
        }

        .charimg{
            width: 90%;
            /*height: 50px;*/
            margin-bottom: 2vw;
        }

        .character:active{
          border: 1vw inset #888;
          /* border: 8px solid #36A; */
        }



        .character.locked{
            border: 1vw solid #E44;
            background-color: rgba(100, 100, 100, 0.8);

            filter: grayscale(90%);
        }

        .character span{

        }

        .locked{

            filter: brightness(70%);
        }


    </style>
</head>

<body>

  <script type="x-shader/x-vertex" id="vertexshader">
    attribute float scale;
		void main() {
			vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
			gl_PointSize = scale * ( 300.0 / - mvPosition.z );
			gl_Position = projectionMatrix * mvPosition;
		}
	</script>
  <script type="x-shader/x-fragment" id="fragmentshader">
    uniform vec3 color;
		void main() {
			if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 ) discard;
			gl_FragColor = vec4( color, 0.5 );
		}
	</script>
    <script src="build/cannon.min.js"></script>

    <script type="importmap">
        {
  		"imports": {
  				"three": "https://radetzki87.github.io/web1/build/three.module.js",
  				"three/addons/": "https://radetzki87.github.io/web1/jsm/",
  				"three/addons/utils": "https://radetzki87.github.io/web1/jsm/utils/"
  		}
  		}
  </script>

    <script type="module">
        import * as THREE from 'three';
        import {
            GLTFLoader
        } from 'three/addons/loaders/GLTFLoader.js';
        import {
            FontLoader
        } from 'three/addons/loaders/FontLoader.js';
        // import { TextureLoader } from 'three/addons/loaders/TextureLoader.js';
        import {
            MTLLoader
        } from 'three/addons/loaders/MTLLoader.js';
        import {
            OBJLoader
        } from 'three/addons/loaders/OBJLoader.js';
        import {
            TextGeometry
        } from 'three/addons/geometries/TextGeometry.js';
        import * as BufferGeometryUtils from 'three/addons/utils/BufferGeometryUtils.js';
        import Stats from 'three/addons/libs/stats.module.js';

        // document.body.style.overscrollBehaviorY = 'none';
        // document.body.style.overscrollBehaviorX = 'none';
        // document.getElementById('game-over-panel').style.display="none";

        const gameOverPanel = document.getElementById('game-over-panel');


        var webflag=true;
        var goahead=false;

        var onceflag0=true;

        var bf;
        var 두께=0.35;

        let lastTime = 0;

        var restartonce1=false;
        var restartonce2=false;

        var particleflag=true;

        var ringloc=[];
        var ringflag=false;

        var sdic0;
        window.sdic0=sdic0;

        var labels;

        var 효과음=true;
        var 배경음=true;

        var gamemod=0;
        window.gamemod=gamemod;
        var fullmax=false;
        var maxnum;
        var endsound;
        var originflag=false;
        var sideback=[];
        var stacktime;
        var stacknum=[0,0,0,0,8,8,16,16,32,32,64,64,128,128,256,256,512,512,512,1024,1024,2048,2048,2048,2048,2048,2048]


        var fpslst=[];
        var rescounter=0;

        var greylst=[27,26,4,1,3,30,40,46,20,39,16,38,23]

        var esound=["ESM_Atmospheric_Upgrade_1_Mobile_App_Game_FX_Sound_Magic_Fantasy_Retro_Classic_Musical_Element_Transition_Chord_Simple_Hit_Designed.wav","ESM_Atmospheric_Upgrade_2_Mobile_App_Game_FX_Sound_Magic_Fantasy_Retro_Classic_Musical_Element_Transition_Chord_Simple_Hit_Designed.wav","ESM_Atmospheric_Upgrade_3_Mobile_App_Game_FX_Sound_Magic_Fantasy_Retro_Classic_Musical_Element_Transition_Chord_Simple_Hit_Designed.wav","ESM_Atmospheric_Upgrade_4_Mobile_App_Game_FX_Sound_Magic_Fantasy_Retro_Classic_Musical_Element_Transition_Chord_Simple_Hit_Designed.wav","ESM_Plucky_Level_Complete_1_Mobile_App_Game_FX_Sound_Magic_Fantasy_Retro_Classic_Musical_Element_Transition_Chord_Simple_Hit_Designed.wav","ESM_Simple_Menu_Select_3_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav" ];


        var avx=0;
        var avz=0;

        var skinmold={};

        var songTitle = 'Song Title';
        var artistName = 'Artist Name';
        var songTitleElement = document.getElementById('song-title');
        var artistNameElement = document.getElementById('artist-name');
        songTitleElement.innerText = songTitle;
        artistNameElement.innerText = artistName;
        var optionsScreen = document.getElementById('options-screen');
        var closeOptionsBtn = document.getElementById('close-options');
        var muteBtn = document.getElementById('mute-btn');
        var muteImg = document.getElementById('mute-img');
        var mutetxt = document.getElementById('mute-text');
        var sideBtn = document.getElementById('sidecam-btn');
        var sideImg = document.getElementById('sidecam-img');
        var sidetxt = document.getElementById('sidecam-text');
        var particleBtn = document.getElementById('particle-btn');
        var particleImg = document.getElementById('particle-img');
        var particletxt = document.getElementById('particle-text');
        var cointxt = document.getElementById('coin');
        let isMuted = false;
        let isside = false;
        let isparticle = false;
        var textscene = [];
        var skinshot = true;
        var tscale = 0.9;
        var stackHeight;
        var 칸 = 4;
        var bw = 40 / 3
        var bh = 5 / 1.3
        // var bw=14
        // var bh=4
        var tw = bw / 칸
        var th = bh / 3
        var ontouch = true;
        var lastX;
        var lastY;
        var touchx;
        var touchy;
        let forceAmount = bw * bw * bh / 14.5;
        let unitimg = {};
        let 점수 = 0
        let bestscore;
        window.bestscore = bestscore;
        let coin = 25;
        window.coin = coin;
        let pluscoin = 0;
        let 가장자리 = [];
        let coinupdate = [];
        let coinchg = [];
        let coinfinal = [];
        var clmeshlst = {
            0: [],
            1: [],
            2: [],
            3: [],
            4: []
        }
        var clmeshlst1 = {
            0: [],
            1: [],
            2: [],
            3: [],
            4: []
        }
        var clmeshlst2 = {
            0: [],
            1: [],
            2: [],
            3: [],
            4: []
        }
        var clmeshlst0 = {
            0: [],
            1: [],
            2: [],
            3: [],
            4: []
        }
        var audioLoader = new THREE.AudioLoader();
        // var listener = new THREE.AudioListener();
        var uilst0 = [];
        var uilst1 = [];
        var paidflag = false;
        var soundflag = true;
        var skinflag = true;
        var shadowon = true;
        var initflag = true;

        var skinset = ["base", "1", "카세트", "r808", "archer", "radio", "donut", "building", "tower", "test5", "adam"]
        skinset.forEach((item)=>{
          skinmold[item]=[];
        })


        var skinnum = 0;
        var skinselect = 0;
        var skinidx = 0;
        var restartflag = false;
        var restartloc = [];
        var restartrot = []
        var ncolornum;
        var ncolornum0;
        var restartend = Math.PI / 20
        var isoAngle = Math.atan(1 / Math.sqrt(3));
        let center = 0.7853981;
        let left = 1.5707963267948966;
        let right = 0;
        let rotationend;
        let rotationflag = false;
        let lookleft = false;
        let lookcenter = true;
        let lookright = false;
        var rehsl1;
        var rehsl2;
        var renhsl1;
        var renhsl2;
        var recl1;
        var recl2;
        var rencl1;
        var rencl2;
        var rehsl3;
        var rehsl4;
        var renhsl3;
        var renhsl4;
        var recl3;
        var recl4;
        var rencl3;
        var rencl4;
        var bhsl0;
        var nbhsl0;
        var bhsl1;
        var nbhsl1;
        var bhsl2;
        var nbhsl2;
        var bhsl3;
        var nbhsl3;
        var bhsl4;
        var nbhsl4;
        let startflag = false
        let fps;
        let time0;
        let gradback = [];
        let txttimebuf;
        let geos = [];
        let fpoint = 0;
        let uiflag = false;
        let stage1 = true;;
        let stage2 = false;
        let stage3 = false;
        let stage4 = false;
        let stage5 = false;
        let addflag = false;
        let mergeflag = false;
        let bounceflag = false;
        let topcam = true;
        let sidecam = true;
        let arrowon = false;
        let averageflag = true;
        let lighton = true;
        let dragflag = true;
        var sload = true;
        var inflag = true;
        var loader = new OBJLoader();
        var mtlLoader = new MTLLoader();
        var textureLoader = new THREE.TextureLoader();
        var skin0 = true
        var skin1 = false;
        var skin2 = false;
        var uilst = [];
        window.uilist = uilst;
        var uidelta = 1;
        var tilemold = [];
        var textmold = [];
        let mouth1 = [];
        let mouth2 = [];
        let mouth3 = [];
        let eye1 = [];
        let eye2 = [];
        let eye3 = [];
        let timlst = []
        window.tlst = timlst;
        let txts = [];
        window.txts = txts
        let txtlst = [];
        let guideflag = false;
        var guide = [];
        var ring = []
        var soundon = true;

        var tapemold = [];
        let curveflag = true;
        // var curves=[];
        var dimlines = [];
        var tilting = true;
        var incline = false;
        var effects = [];
        var tempeffects = [];
        let cubes = [];
        // window.cubes = cubes;
        let face = [];
        window.face = face;
        var pens = [];
        let activeFloor = 0;
        let buffloor = 0;
        let bufflag = true;
        var orthoflag = true;
        let sleepflag = true;
        var 시간 = [];
        var 포인트 = [];
        var endtext = false;
        var pointbuf = 0;
        var timebuf = -1;
        var stack = 5;
        var tipflag = true;
        var sdic = []
        var songfade;
        var mainmusic = ["dance_loop0.ogg", "Puzzles.ogg", "Radiohead.ogg", "Magical Forest.ogg", "Lost in the Dessert.ogg", "High End Party.ogg", "Forever Lost.ogg", "Catwalk.ogg", "You_re in the Future.ogg", "Warmth.ogg", "Beach House.ogg", "Sweet Treats.ogg"]
        var soundic = {};
        var soundlst = ["Retro", "Minimalist", "Modern"]
        var soundlst0 = ["African", "Coffee", "Wood Block"]
        var soundkey = parseInt(Math.random() * soundlst.length);
        var soundkey0 = parseInt(Math.random() * 2);
        var colorlst = [
            [0x9DC8C8, 0x58C9B9, 0x519D9E, 0xD1B6E1, ],
            [0xFFEEE4, 0xF17F42, 0xCE6D39, 0x000000, ],
            [0xF6B352, 0xF68657, 0x383A3F, 0x1F2124, ],
            [0xD7FFF1, 0x8CD790, 0x77AF9C, 0x285943, ],
            [0xFBFFB9, 0xFDD692, 0xEC7357, 0x754F44, ],
            [0xC5E99B, 0x8FBC94, 0x548687, 0x56445D, ],
            [0xE71D36, 0x2EC4B6, 0xEFFFE9, 0x011627, ],
            [0x5CAB7D, 0x5A9367, 0x44633F, 0x3F4B3B, ],
            [0xFFBC42, 0xD81159, 0x8F2D56, 0x218380, ],
            [0x379392, 0x4FB0C6, 0x4F86C6, 0x6C49B8, ],
            [0x67D5B5, 0xEE7785, 0xC89EC4, 0x84B1ED, ],
            [0x77AAAD, 0x6E7783, 0xD8E6E7, 0x9DC3C1, ],
            [0xAF4034, 0x3E4348, 0xC65146, 0xEC6A5C, ],
            [0xF7AA97, 0xED9282, 0xDE7E73, 0xCFAA9E, ],
            [0xD4DFE6, 0x8EC0E4, 0xCADBE9, 0x6AAFE6, ],
            [0xD09E88, 0xFADAD8, 0x534847, 0x9B8281, ],
            [0xF0E5DE, 0xABD0CE, 0x7C7877, 0xD9D4CF, ],
            [0xAAABD3, 0xCBA6C3, 0xF8FAFF, 0x353866, ],
            [0x75D701, 0xF8F8FF, 0x56A902, 0x3B4E32, ],
            [0xa5dff9, 0xef5285, 0x60c5ba, 0xfeee7d, ],
            [0xd6ecfa, 0xf15c5c, 0xb84a39, 0x6f3826, ],
            [0xfab1ce, 0xf349eb, 0xf100e5, 0x71226e, ],
            [0xfab1ce, 0xffbbd6, 0xf199bc, 0x99f19e, ],
            [0xf6ea8c, 0xf26d5b, 0xc03546, 0x492540, ],
            [0xa5d296, 0x8283a7, 0x54546c, 0x404146, ],
            [0xff7473, 0xffc952, 0x47b8e0, 0x34314c, ],
            [0xe1eef6, 0xff5f2e, 0xfcbe32, 0x004e66, ],
            [0xfffff5, 0xffda8e, 0x80d4f6, 0x5c196b, ],
            [0x7f9eb2, 0x77919d, 0xdae9f4, 0x274c5e, ],
            [0xff7761, 0xfdc23e, 0xf9a11b, 0x274555, ],
            [0xfff1b9, 0x5e5e5f, 0x3f4040, 0x272625, ],
            [0xeb9f9f, 0xf1bbba, 0xf8ecc9, 0xa79c8e, ],
            [0xede574, 0xf9d423, 0xfc913a, 0xff4e50, ],
            [0x00dffc, 0x008c9e, 0x005f6b, 0x343838, ],
            [0xe94e77, 0xd68189, 0xc6a49a, 0xc6e5d9, ],
            [0x490a3d, 0xbd1550, 0xe97f02, 0xf8ca00, ],
            [0xcff09e, 0xa8dba8, 0x79bd9a, 0x3b8686, ],
            [0xfe4365, 0xfc9d9a, 0xf9cdad, 0xc8c8a9, ],
            [0xf4f7f7, 0xaacfd0, 0x79a8a9, 0x1f4e5f, ],
            [0xfffcf0, 0xdedcee, 0x6a60a9, 0xfbd14b, ],
            [0xcff0da, 0x88dba3, 0xdadbdb, 0x3ac569, ],
            [0x8c9184, 0x3a5134, 0x4f953b, 0xa7a7a2, ],
            [0x6d819c, 0xe4e7ec, 0x55967e, 0x263959, ],
            [0xf1404b, 0xdddfe6, 0xf4f5f9, 0x252c41, ],
            [0xa3daff, 0x1ec0ff, 0x0080ff, 0x03a6ff, ],
            [0xe85a71, 0xd8e9ef, 0x4ea1d3, 0x454552, ],
            [0xfec8c9, 0xfd999a, 0x444f59, 0x3e4149]
        ]
        var colornum = parseInt(Math.random() * colorlst.length);


        var colorlst0 = [
            [0x8ECAE6, 0x219EBC, 0x023047, 0xFFB703, 0xFB8500],
            [0xE63946, 0xF1FAEE, 0xA8DADC, 0x457B9D, 0x1D3557],
            [0xCDB4DB, 0xFFC8DD, 0xFFAFCC, 0xBDE0FE, 0xA2D2FF],
            [0x606C38, 0x283618, 0xFEFAE0, 0xDDA15E, 0xBC6C25],
            [0xCCD5AE, 0xE9EDC9, 0xFEFAE0, 0xFAEDCD, 0xD4A373],
            [0x264653, 0x2A9D8F, 0xE9C46A, 0xF4A261, 0xE76F51],
            [0xF6BD60, 0xF7EDE2, 0xF5CAC3, 0x84A59D, 0xF28482],
            [0x00B4D8, 0x48CAE4, 0x90E0EF, 0xADE8F4, 0xCAF0F8],
            [0xEDEDE9, 0xD6CCC2, 0xF5EBE0, 0xE3D5CA, 0xD5BDAF],
            [0xFFCDB2, 0xFFB4A2, 0xE5989B, 0xB5838D, 0x6D6875],
            [0xDAD7CD, 0xA3B18A, 0x588157, 0x3A5A40, 0x344E41],
            [0x000814, 0x001D3D, 0x003566, 0xFFC300, 0xFFD60A],
            [0xFFBE0B, 0xFB5607, 0xFF006E, 0x8338EC, 0x3A86FF],
            [0xF72585, 0x7209B7, 0x3A0CA3, 0x4361EE, 0x4CC9F0],
            [0x22577A, 0x38A3A5, 0x57CC99, 0x80ED99, 0xC7F9CC],
            [0xDC2F02, 0xE85D04, 0xF48C06, 0xFAA307, 0xFFBA08],
            [0x001524, 0x15616D, 0xFFECD1, 0xFF7D00, 0x78290F],
            [0x0081A7, 0x00AFB9, 0xFDFCDC, 0xFED9B7, 0xF07167],
            [0x22223B, 0x4A4E69, 0x9A8C98, 0xC9ADA7, 0xF2E9E4],
            [0x000000, 0x14213D, 0xFCA311, 0xE5E5E5, 0xFFFFFF],
            [0xD8E2DC, 0xFFE5D9, 0xFFCAD4, 0xF4ACB7, 0x9D8189],
            [0xF08080, 0xF4978E, 0xF8AD9D, 0xFBC4AB, 0xFFDAB9],
            [0xFFFCF2, 0xCCC5B9, 0x403D39, 0x252422, 0xEB5E28],
            [0x780000, 0xC1121F, 0xFDF0D5, 0x003049, 0x669BBC],
            [0xEE9B00, 0xCA6702, 0xBB3E03, 0xAE2012, 0x9B2226],
            [0xF4F1DE, 0xE07A5F, 0x3D405B, 0x81B29A, 0xF2CC8F],
            [0xEF476F, 0xFFD166, 0x06D6A0, 0x118AB2, 0x073B4C],
            [0xF3E9DC, 0xC08552, 0x5E3023, 0x895737, 0xDAB49D],
            [0x335C67, 0xFFF3B0, 0xE09F3E, 0x9E2A2B, 0x540B0E],
            [0xADB5BD, 0x6C757D, 0x495057, 0x343A40, 0x212529],
            [0xFF595E, 0xFFCA3A, 0x8AC926, 0x1982C4, 0x6A4C93],
            [0x463F3A, 0x8A817C, 0xBCB8B1, 0xF4F3EE, 0xE0AFA0],
            [0xF0EAD2, 0xDDE5B6, 0xADC178, 0xA98467, 0x6C584C],
            [0x52B788, 0x40916C, 0x2D6A4F, 0x1B4332, 0x081C15],
            [0x386641, 0x6A994E, 0xA7C957, 0xF2E8CF, 0xBC4749],
            [0x003049, 0xD62828, 0xF77F00, 0xFCBF49, 0xEAE2B7],
            [0x233D4D, 0xFE7F2D, 0xFCCA46, 0xA1C181, 0x619B8A],
            [0x1A535C, 0x4ECDC4, 0xF7FFF7, 0xFF6B6B, 0xFFE66D],
            [0xFF99C8, 0xFCF6BD, 0xD0F4DE, 0xA9DEF9, 0xE4C1F9],
            [0x008000, 0x38B000, 0x70E000, 0x9EF01A, 0xCCFF33],
            [0xFFD6FF, 0xE7C6FF, 0xC8B6FF, 0xB8C0FF, 0xBBD0FF],
            [0x390099, 0x9E0059, 0xFF0054, 0xFF5400, 0xFFBD00],
            [0x3D348B, 0x7678ED, 0xF7B801, 0xF18701, 0xF35B04],
            [0x353535, 0x3C6E71, 0xFFFFFF, 0xD9D9D9, 0x284B63],
            [0x132A13, 0x31572C, 0x4F772D, 0x90A955, 0xECF39E],
            [0xD4E09B, 0xF6F4D2, 0xCBDFBD, 0xF19C79, 0xA44A3F],
            [0xCAD2C5, 0x84A98C, 0x52796F, 0x354F52, 0x2F3E46],
            [0xBEE9E8, 0x62B6CB, 0x1B4965, 0xCAE9FF, 0x5FA8D3],
            [0xFF9F1C, 0xFFBF69, 0xFFFFFF, 0xCBF3F0, 0x2EC4B6],
            [0xD8E2DC, 0xECE4DB, 0xFFE5D9, 0xFFD7BA, 0xFEC89A],
            [0xD88C9A, 0xF2D0A9, 0xF1E3D3, 0x99C1B9, 0x8E7DBE],
            [0x3D5A80, 0x98C1D9, 0xE0FBFC, 0xEE6C4D, 0x293241],
            [0x3A0CA3, 0x3F37C9, 0x4361EE, 0x4895EF, 0x4CC9F0],
            [0xE5383B, 0xB1A7A6, 0xD3D3D3, 0xF5F3F4, 0xFFFFFF],
            [0x48BFE3, 0x56CFE1, 0x64DFDF, 0x72EFDD, 0x80FFDB],
            [0x0FA3B1, 0xB5E2FA, 0xF9F7F3, 0xEDDEA4, 0xF7A072],
            [0x01161E, 0x124559, 0x598392, 0xAEC3B0, 0xEFF6E0],
            [0x2B2D42, 0x8D99AE, 0xEDF2F4, 0xEF233C, 0xD90429],
            [0x8E9AAF, 0xCBC0D3, 0xEFD3D7, 0xFEEAFA, 0xDEE2FF],
            [0xF7EDF0, 0xF4CBC6, 0xF4AFAB, 0xF4EEA9, 0xF4F482],
            [0xA3C4F3, 0x90DBF4, 0x8EECF5, 0x98F5E1, 0xB9FBC0],
            [0x03045E, 0x0077B6, 0x00B4D8, 0x90E0EF, 0xCAF0F8],
            [0x355070, 0x6D597A, 0xB56576, 0xE56B6F, 0xEAAC8B],
            [0x70D6FF, 0xFF70A6, 0xFF9770, 0xFFD670, 0xE9FF70],
            [0x04151F, 0x183A37, 0xEFD6AC, 0xC44900, 0x432534],
            [0xC2C5AA, 0xA4AC86, 0x656D4A, 0x414833, 0x333D29],
            [0xD00000, 0xFFBA08, 0x3F88C5, 0x032B43, 0x136F63],
            [0x8CB369, 0xF4E285, 0xF4A259, 0x5B8E7D, 0xBC4B51],
            [0x461220, 0x8C2F39, 0xB23A48, 0xFCB9B2, 0xFED0BB],
            [0xD3F8E2, 0xE4C1F9, 0xF694C1, 0xEDE7B1, 0xA9DEF9],
            [0xFF758F, 0xFF8FA3, 0xFFB3C1, 0xFFCCD5, 0xFFF0F3],
            [0x34A0A4, 0x168AAD, 0x1A759F, 0x1E6091, 0x184E77],
            [0xDDBEA9, 0xFFE8D6, 0xB7B7A4, 0xA5A58D, 0x6B705C],
            [0x1A1423, 0x372549, 0x774C60, 0xB75D69, 0xEACDC2],
            [0x90BE6D, 0x43AA8B, 0x4D908E, 0x577590, 0x277DA1],
            [0x5F0F40, 0x9A031E, 0xFB8B24, 0xE36414, 0x0F4C5C],
            [0x00296B, 0x003F88, 0x00509D, 0xFDC500, 0xFFD500],
            [0x16697A, 0x489FB5, 0x82C0CC, 0xEDE7E3, 0xFFA62B],
            [0x4F000B, 0x720026, 0xCE4257, 0xFF7F51, 0xFF9B54],
            [0xFFE5EC, 0xFFC2D1, 0xFFB3C6, 0xFF8FAB, 0xFB6F92],
            [0xFF99AC, 0xFBB1BD, 0xF9BEC7, 0xF7CAD0, 0xFAE0E4],
            [0x212F45, 0x272640, 0x312244, 0x3E1F47, 0x4D194D],
            [0xFFB700, 0xFFC300, 0xFFD000, 0xFFDD00, 0xFFEA00],
            [0xFF499E, 0xD264B6, 0xA480CF, 0x779BE7, 0x49B6FF],
            [0xFF8811, 0xF4D06F, 0xFFF8F0, 0x9DD9D2, 0x392F5A],
            [0xFFFFFF, 0x84DCC6, 0xA5FFD6, 0xFFA69E, 0xFF686B],
            [0x0D1B2A, 0x1B263B, 0x415A77, 0x778DA9, 0xE0E1DD],
            [0x6F1D1B, 0xBB9457, 0x432818, 0x99582A, 0xFFE6A7],
            [0x220901, 0x621708, 0x941B0C, 0xBC3908, 0xF6AA1C],
            [0x9C89B8, 0xF0A6CA, 0xEFC3E6, 0xF0E6EF, 0xB8BEDD],
            [0xBFD200, 0xD4D700, 0xDDDF00, 0xEEEF20, 0xFFFF3F],
            [0x5A189A, 0x7B2CBF, 0x9D4EDD, 0xC77DFF, 0xE0AAFF],
            [0xEDAE49, 0xD1495B, 0x00798C, 0x30638E, 0x003D5B],
            [0xA3A380, 0xD6CE93, 0xEFEBCE, 0xD8A48F, 0xBB8588],
            [0xE7ECEF, 0x274C77, 0x6096BA, 0xA3CEF1, 0x8B8C89],
            [0x2C7DA0, 0x468FAF, 0x61A5C2, 0x89C2D9, 0xA9D6E5],
            [0xFFAC81, 0xFF928B, 0xFEC3A6, 0xEFE9AE, 0xCDEAC0],
            [0xC9E4CA, 0x87BBA2, 0x55828B, 0x3B6064, 0x364958],
            [0x04080F, 0x507DBC, 0xA1C6EA, 0xBBD1EA, 0xDAE3E5],
            [0xFFF1D1, 0x671919, 0x828281, 0x000000, 0xFFFFFF],
            [0x2C6E49, 0x4C956C, 0xFEFEE3, 0xFFC9B9, 0xD68C45],
            [0xFCDE9C, 0xFFA552, 0xBA5624, 0x381D2A, 0xC4D6B0],
            [0xCC8B86, 0xF9EAE1, 0x7D4F50, 0xD1BE9C, 0xAA998F],
            [0x037B88, 0x064F65, 0x5C6B43, 0xE3B21F, 0xC98F25],
            [0xD7E3FC, 0xCCDBFD, 0xC1D3FE, 0xB6CCFE, 0xABC4FF],
            [0x006D77, 0x83C5BE, 0xEDF6F9, 0xFFDDD2, 0xE29578],
            [0xB0F2B4, 0xBAF2E9, 0xBAD7F2, 0xF2BAC9, 0xF2E2BA],
            [0x2364AA, 0x3DA5D9, 0x73BFB8, 0xFEC601, 0xEA7317],
            [0x0B3954, 0x087E8B, 0xBFD7EA, 0xFF5A5F, 0xC81D25],
            [0x250902, 0x38040E, 0x640D14, 0x800E13, 0xAD2831],
            [0x780116, 0xF7B538, 0xDB7C26, 0xD8572A, 0xC32F27],
            [0xEDAFB8, 0xF7E1D7, 0xDEDBD2, 0xB0C4B1, 0x4A5759],
            [0x3C1642, 0x086375, 0x1DD3B0, 0xAFFC41, 0xB2FF9E],
            [0xD5C5C8, 0x9DA3A4, 0x604D53, 0xDB7F8E, 0xFFDBDA],
            [0x469D89, 0x358F80, 0x248277, 0x14746F, 0x036666],
            [0xD9AE94, 0xF1DCA7, 0xFFCB69, 0xD08C60, 0x997B66],
            [0x9BF6FF, 0xA0C4FF, 0xBDB2FF, 0xFFC6FF, 0xFFFFFC],
            [0xBC00DD, 0xD100D1, 0xDB00B6, 0xE500A4, 0xF20089],
            [0x90F1EF, 0xFFD6E0, 0xFFEF9F, 0xC1FBA4, 0x7BF1A8],
            [0xEF6351, 0xF38375, 0xF7A399, 0xFBC3BC, 0xFFE3E0],
            [0xFF6700, 0xEBEBEB, 0xC0C0C0, 0x3A6EA5, 0x004E98],
            [0xD8E2DC, 0xFFFFFF, 0xFFCAD4, 0xF4ACB7, 0x9D8189],
            [0x55DDE0, 0x33658A, 0x2F4858, 0xF6AE2D, 0xF26419],
            [0xF7B267, 0xF79D65, 0xF4845F, 0xF27059, 0xF25C54],
            [0xFFA69E, 0xFAF3DD, 0xB8F2E6, 0xAED9E0, 0x5E6472],
            [0x5E0B15, 0x90323D, 0xD9CAB3, 0xBC8034, 0x8C7A6B],
            [0xC200FB, 0xEC0868, 0xFC2F00, 0xEC7D10, 0xFFBC0A],
            [0x74D3AE, 0x678D58, 0xA6C48A, 0xF6E7CB, 0xDD9787],
            [0x004E64, 0x00A5CF, 0x9FFFCB, 0x25A18E, 0x7AE582],
            [0x000022, 0x001242, 0x0094C6, 0x005E7C, 0x040F16],
            [0x555B6E, 0x89B0AE, 0xBEE3DB, 0xFAF9F9, 0xFFD6BA],
            [0xFAF3DD, 0xC8D5B9, 0x8FC0A9, 0x68B0AB, 0x4A7C59],
            [0xF7D1CD, 0xE8C2CA, 0xD1B3C4, 0xB392AC, 0x735D78],
            [0xDBC2CF, 0x9FA2B2, 0x3C7A89, 0x2E4756, 0x16262E],
            [0xFFADFF, 0xFFDFFF, 0x00FFFF, 0x4C84DC, 0x006AFF],
            [0xE6CCB2, 0xDDB892, 0xB08968, 0x7F5539, 0x9C6644],
            [0xD6D6D6, 0xFFEE32, 0xFFD100, 0x202020, 0x333533],
            [0x201E1F, 0xFF4000, 0xFAAA8D, 0xFEEFDD, 0x50B2C0],
            [0xDDFFF7, 0x93E1D8, 0xFFA69E, 0xAA4465, 0x462255],
            [0xFB6107, 0xF3DE2C, 0x7CB518, 0x5C8001, 0xFBB02D],
            [0xB09E99, 0xFEE9E1, 0xFAD4C0, 0x64B6AC, 0xC0FDFB],
            [0x2F6690, 0x3A7CA5, 0xD9DCD6, 0x16425B, 0x81C3D7],
            [0x5BBA6F, 0x3FA34D, 0x2A9134, 0x137547, 0x054A29],
            [0xE0FBFC, 0xC2DFE3, 0x9DB4C0, 0x5C6B73, 0x253237],
            [0x36413E, 0x5D5E60, 0x8D8D92, 0xBEB2C8, 0xD7D6D6],
            [0xFDC5F5, 0xF7AEF8, 0xB388EB, 0x8093F1, 0x72DDF7],
            [0x6B9080, 0xA4C3B2, 0xCCE3DE, 0xEAF4F4, 0xF6FFF8],
            [0xFFFFFF, 0xBCF8EC, 0x9097C0, 0x274156, 0x469AAC],
            [0x001233, 0x33415C, 0x5C677D, 0x7D8597, 0x979DAC],
            [0x227C9D, 0x17C3B2, 0xFFCB77, 0xFEF9EF, 0xFE6D73],
            [0xAD343E, 0x474747, 0xF2AF29, 0x000000, 0xE0E0CE],
            [0x006BA6, 0x0496FF, 0xFFBC42, 0xD81159, 0x8F2D56],
            [0xF79256, 0xFBD1A2, 0x7DCFB6, 0x00B2CA, 0x1D4E89],
            [0x585123, 0xEEC170, 0xF2A65A, 0xF58549, 0x772F1A],
            [0xB9D6F2, 0x061A40, 0x0353A4, 0x006DAA, 0x003559],
            [0x00A6FB, 0x0582CA, 0x006494, 0x003554, 0x051923],
            [0x283044, 0x78A1BB, 0xEBF5EE, 0xBFA89E, 0x8B786D],
            [0x8C1C13, 0xBF4342, 0xE7D7C1, 0xA78A7F, 0x735751],
            [0xEE6055, 0x60D394, 0xAAF683, 0xFFD97D, 0xFF9B85],
            [0xE6E8E6, 0xCED0CE, 0x9FB8AD, 0x475841, 0x3F403F],
            [0x89023E, 0xCC7178, 0xFFD9DA, 0xF3E1DD, 0xC7D9B7],
            [0xE8F1F2, 0xB3EFB2, 0x7A9E7E, 0x31493C, 0x001A23],
            [0x97F9F9, 0xA4DEF9, 0xC1E0F7, 0xCFBAE1, 0xC59FC9],
            [0x729EA1, 0xB5BD89, 0xDFBE99, 0xEC9192, 0xDB5375],
            [0x119DA4, 0x0C7489, 0x13505B, 0x040404, 0xD7D9CE],
            [0xFF02B9, 0xB508FF, 0xFF004D, 0xFF00BA, 0x7A0DFF],
            [0xA47148, 0x8B5E34, 0x6F4518, 0x603808, 0x583101],
            [0xC38E70, 0xB07D62, 0x9D6B53, 0x8A5A44, 0x774936],
            [0xFFB5A7, 0xFCD5CE, 0xF8EDEB, 0xF9DCC4, 0xFEC89A],
            [0xF8961E, 0xF9C74F, 0x90BE6D, 0x43AA8B, 0x577590],
            [0x7C6A0A, 0xBABD8D, 0xFFDAC6, 0xFA9500, 0xEB6424],
            [0x9B5DE5, 0xF15BB5, 0xFEE440, 0x00BBF9, 0x00F5D4],
            [0xFC9F5B, 0xFBD1A2, 0xECE4B7, 0x7DCFB6, 0x33CA7F],
            [0x2D3142, 0x4F5D75, 0xBFC0C0, 0xFFFFFF, 0xEF8354],
            [0xEF6461, 0xE4B363, 0xE8E9EB, 0xE0DFD5, 0x313638],
            [0x0A0908, 0x22333B, 0xEAE0D5, 0xC6AC8F, 0x5E503F],
            [0xED254E, 0xF9DC5C, 0xF4FFFD, 0x011936, 0x465362],
            [0x222222, 0xFFFFFF, 0x1C5D99, 0x639FAB, 0xBBCDE5],
            [0x080708, 0x3772FF, 0xDF2935, 0xFDCA40, 0xE6E8E6],
            [0xFFD9DA, 0xEA638C, 0x89023E, 0x30343F, 0x1B2021],
            [0x540D6E, 0xEE4266, 0xFFD23F, 0x3BCEAC, 0x0EAD69],
            [0xFAF3DD, 0xC8D5B9, 0x8FC0A9, 0x68B0AB, 0x696D7D],
            [0x660000, 0x990033, 0x5F021F, 0x8C001A, 0xFF9000],
            [0xFFBC42, 0xD81159, 0x8F2D56, 0x218380, 0x73D2DE],
            [0x0A090C, 0xF0EDEE, 0x07393C, 0x2C666E, 0x90DDF0],
            [0xEFF1ED, 0x373D20, 0x717744, 0xBCBD8B, 0x766153],
            [0xD0B8AC, 0xF3D8C7, 0xEFE5DC, 0xFBFEFB, 0xFFFFFF],
            [0x134074, 0x13315C, 0x0B2545, 0x8DA9C4, 0xEEF4ED],
            [0x0d3b66, 0xfaf0ca, 0xf4d35e, 0xee964b, 0xf95738],
            [0xff6b35,0xf7c59f,0xefefd0,0x004e89,0x1a659e],
            [0x5aa9e6,0x7fc8f8,0xf9f9f9,0xffe45e,0xff6392],
            [0x7bdff2,0xb2f7ef,0xeff7f6,0xf7d6e0,0xf2b5d4],
            [0xf8ffe5,0x06d6a0,0x1b9aaa,0xef476f,0xffc43d],
            [0x00916e,0xfeefe5,0xffcf00,0xee6123,0xfa003f],
            [0xff69eb, 0xff86c8, 0xffa3a5, 0xffbf81, 0xffdc5e],
            [0x44af69,0xf8333c,0xfcab10,0x2b9eb3,0xdbd5b5],
            [0x4d9de0,0xe15554,0xe1bc29,0x3bb273,0x7768ae],
            [0x04e762,0xf5b700,0xdc0073,0x008bf8,0x89fc00],
            [0xb4edd2,0xa0cfd3,0x8d94ba,0x9a7aa0,0x87677b],
            [0xfe4a49,0xfed766,0x009fb7,0xe6e6ea,0xf4f4f8],
            [0xdd6e42,0xe8dab2,0x4f6d7a,0xc0d6df,0xeaeaea],
            [0xdad2d8,0x143642,0x0f8b8d,0xec9a29,0xa8201a],
            [0x533a71,0x6184d8,0x50c5b7,0x9cec5b,0xf0f465],
            [0xdad2d8,0x143642,0x0f8b8d,0xec9a29,0xa8201a],
            [0x909cc2,0x084887,0xf58a07,0xf9ab55,0xf7f5fb],
            [0xc05746,0xadc698,0xd0e3c4,0xffffff,0x503047],
            [0xfaa275,0xff8c61,0xce6a85,0x985277,0x5c374c]

        ]
        var colornum0 = parseInt(Math.random() * colorlst0.length);
        // 컬러
        // colornum0=colorlst0.length-1;
        // var clst=adjustContrast(hexToHtmlColor(colorlst[colornum][1]), hexToHtmlColor(colorlst[colornum][3]))
        //
        // document.getElementById("intro").style.backgroundColor=clst[0]
        // document.getElementById("intro").children[0].style.color=clst[1]
        //
        //
        // document.getElementById("intro").children[1].style.color=clst[1]

        document.getElementById("intro").style.backgroundColor=hexToHtmlColor(colorlst[colornum][1]);
        document.getElementById("intro").children[0].style.color=hexToHtmlColor(colorlst[colornum][3]);


        document.getElementById("intro").children[1].style.color=hexToHtmlColor(colorlst[colornum][3]);

        // document.getElementById("cl10").style.backgroundColor=hexToHtmlColor(colorlst[colornum][0])
        // document.getElementById("cl11").style.backgroundColor=hexToHtmlColor(colorlst[colornum][1])
        // document.getElementById("cl12").style.backgroundColor=hexToHtmlColor(colorlst[colornum][2])
        // document.getElementById("cl13").style.backgroundColor=hexToHtmlColor(colorlst[colornum][3])
        //
        // document.getElementById("cl20").style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][0])
        // document.getElementById("cl21").style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][1])
        // document.getElementById("cl22").style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][2])
        // document.getElementById("cl23").style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][3])
        // document.getElementById("cl24").style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][4])

        let unitmotion = {};
        var ftiles = [];
        var fontjson = {
          "glyphs": {
            "0": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "1": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 174 0 l 174 694 l 0 694 l 0 868 l 174 868 q 296 817 245 868 q 347 694 347 765 l 347 0 l 174 0 z "
            },
            "2": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 347 q 50 469 0 419 q 174 521 102 521 l 521 521 l 521 694 l 0 694 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 q 643 397 694 448 q 521 347 591 347 l 174 347 l 174 174 l 694 174 l 694 0 l 0 0 z "
            },
            "3": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 174 l 521 174 l 521 347 l 0 347 l 0 521 l 521 521 l 521 694 l 0 694 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "4": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 0 l 521 347 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 868 l 174 868 l 174 521 l 521 521 l 521 868 l 694 868 l 694 0 l 521 0 z "
            },
            "5": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 174 l 521 174 l 521 347 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 521 521 q 643 469 593 521 q 694 347 694 418 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "6": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 347 l 174 347 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 521 521 q 643 469 593 521 q 694 347 694 418 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "7": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 0 l 521 694 l 0 694 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 z "
            },
            "8": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 347 l 174 347 l 174 174 l 521 174 m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "9": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 174 l 521 174 l 521 347 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            " ": {
              "ha": 347,
              "x_min": 0,
              "x_max": 0,
              "o": ""
            },
            "!": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 0 l 0 174 l 174 174 l 174 0 l 0 0 m 0 347 l 0 868 l 174 868 l 174 347 l 0 347 z "
            },
            "\"": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 0 521 l 0 868 l 174 868 l 174 521 l 0 521 m 347 521 l 347 868 l 521 868 l 521 521 l 347 521 z "
            },
            "#": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 521 347 l 521 521 l 347 521 l 347 347 l 521 347 m 174 0 l 174 174 l 0 174 l 0 347 l 174 347 l 174 521 l 0 521 l 0 694 l 174 694 l 174 868 l 347 868 l 347 694 l 521 694 l 521 868 l 694 868 l 694 694 l 868 694 l 868 521 l 694 521 l 694 347 l 868 347 l 868 174 l 694 174 l 694 0 l 521 0 l 521 174 l 347 174 l 347 0 l 174 0 z "
            },
            "$": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 694 174 l 694 347 l 521 347 l 521 174 l 694 174 m 347 521 l 347 694 l 174 694 l 174 521 l 347 521 m 0 0 l 0 174 l 347 174 l 347 347 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 694 q 50 817 0 766 q 174 868 102 868 l 868 868 l 868 694 l 521 694 l 521 521 l 694 521 q 817 469 766 521 q 868 347 868 418 l 868 174 q 817 50 868 100 q 694 0 765 0 l 0 0 z "
            },
            "%": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 347 0 l 347 174 l 521 174 l 521 0 l 347 0 m 0 694 l 0 868 l 174 868 l 174 694 l 0 694 m 0 0 l 0 347 q 50 469 0 419 q 174 521 102 521 l 347 521 l 347 868 l 521 868 l 521 521 q 469 397 521 448 q 347 347 418 347 l 174 347 l 174 0 l 0 0 z "
            },
            "&": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 521 174 l 521 347 l 174 347 l 174 174 l 521 174 m 521 521 l 521 694 l 347 694 l 347 521 l 521 521 m 0 0 l 0 521 l 174 521 l 174 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 q 669 458 694 484 q 608 434 643 434 q 669 408 643 434 q 694 347 694 382 l 694 174 l 868 174 q 817 50 868 100 q 694 0 765 0 l 0 0 z "
            },
            "'": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 521 l 0 868 l 174 868 l 174 521 l 0 521 z "
            },
            "(": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 l 347 694 l 174 694 l 174 174 l 347 174 l 347 0 l 174 0 z "
            },
            ")": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 0 l 0 174 l 174 174 l 174 694 l 0 694 l 0 868 l 174 868 q 296 817 245 868 q 347 694 347 765 l 347 174 q 296 50 347 100 q 174 0 244 0 l 0 0 z "
            },
            "*": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 347 l 174 521 q 50 571 100 521 q 0 694 0 623 l 174 694 q 224 817 174 766 q 347 868 275 868 l 347 694 q 469 643 419 694 q 521 521 521 591 l 347 521 q 296 397 347 448 q 174 347 244 347 l 174 347 z "
            },
            "+": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 347 0 l 347 347 l 0 347 l 0 521 l 347 521 l 347 868 l 521 868 l 521 521 l 868 521 l 868 347 l 521 347 l 521 0 l 347 0 z "
            },
            ",": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 -174 l 0 174 l 174 174 l 174 0 q 122 -122 174 -72 q 0 -174 71 -174 l 0 -174 z "
            },
            "-": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 347 l 0 521 l 694 521 l 694 347 l 0 347 z "
            },
            ".": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 0 l 0 174 l 174 174 l 174 0 l 0 0 z "
            },
            "/": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 0 l 0 347 q 50 469 0 419 q 174 521 102 521 l 174 868 l 347 868 l 347 521 q 296 397 347 448 q 174 347 244 347 l 174 0 l 0 0 z "
            },
            ":": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 0 l 0 174 l 174 174 l 174 0 l 0 0 m 0 694 l 0 868 l 174 868 l 174 694 l 0 694 z "
            },
            ";": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 -174 l 0 174 l 174 174 l 174 0 q 122 -122 174 -72 q 0 -174 71 -174 l 0 -174 m 0 694 l 0 868 l 174 868 l 174 694 l 0 694 z "
            },
            "<": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 174 q 50 224 100 174 q 0 347 0 275 l 0 521 q 50 643 0 593 q 174 694 102 694 l 521 694 l 521 521 l 174 521 l 174 347 l 521 347 l 521 174 l 174 174 z "
            },
            "=": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 174 l 0 347 l 694 347 l 694 174 l 0 174 m 0 521 l 0 694 l 694 694 l 694 521 l 0 521 z "
            },
            ">": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 0 174 l 0 347 l 347 347 l 347 521 l 0 521 l 0 694 l 347 694 q 469 643 419 694 q 521 521 521 591 l 521 347 q 469 224 521 274 q 347 174 418 174 l 0 174 z "
            },
            "?": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 l 174 174 l 347 174 l 347 0 l 174 0 m 174 347 q 224 469 174 419 q 347 521 275 521 l 521 521 l 521 694 l 174 694 l 174 521 l 0 521 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 q 643 397 694 448 q 521 347 591 347 l 174 347 z "
            },
            "@": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 q 817 817 766 868 q 868 694 868 765 l 868 174 q 817 50 868 100 q 694 0 765 0 l 521 0 q 397 50 448 0 q 347 174 347 102 l 347 521 l 521 521 l 521 174 l 694 174 l 694 694 l 174 694 l 174 0 l 0 0 z "
            },
            "A": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "B": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 347 l 174 347 l 174 174 l 521 174 m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 q 669 458 694 484 q 608 434 643 434 q 669 408 643 434 q 694 347 694 382 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "C": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 l 521 521 l 521 694 l 174 694 l 174 174 l 521 174 l 521 347 l 694 347 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "D": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "E": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 z "
            },
            "F": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 0 l 0 0 z "
            },
            "G": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 174 l 521 174 l 521 347 l 347 347 l 347 521 l 521 521 q 643 469 593 521 q 694 347 694 418 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "H": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 868 l 174 868 l 174 521 l 521 521 l 521 868 l 694 868 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "I": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 z "
            },
            "J": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 0 0 l 0 174 l 347 174 l 347 868 l 521 868 l 521 174 q 469 50 521 100 q 347 0 418 0 l 0 0 z "
            },
            "K": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 868 l 174 868 l 174 521 l 521 521 l 521 868 l 694 868 l 694 521 q 669 458 694 484 q 608 434 643 434 q 669 408 643 434 q 694 347 694 382 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "L": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 694 174 l 694 0 l 174 0 z "
            },
            "M": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 0 0 l 0 868 l 694 868 q 817 817 766 868 q 868 694 868 765 l 868 0 l 694 0 l 694 694 l 521 694 l 521 0 l 347 0 l 347 694 l 174 694 l 174 0 l 0 0 z "
            },
            "N": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 694 l 174 694 l 174 0 l 0 0 z "
            },
            "O": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "P": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 q 643 397 694 448 q 521 347 591 347 l 174 347 l 174 0 l 0 0 z "
            },
            "Q": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 347 174 q 397 296 347 245 q 521 347 449 347 l 521 694 l 174 694 l 174 174 l 347 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 571 122 623 174 q 521 0 521 71 l 174 0 z "
            },
            "R": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 q 669 458 694 484 q 608 434 643 434 q 669 408 643 434 q 694 347 694 382 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "S": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 174 l 521 174 l 521 347 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 521 521 q 643 469 593 521 q 694 347 694 418 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "T": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 0 l 174 694 l 0 694 l 0 868 l 521 868 l 521 694 l 347 694 l 347 0 l 174 0 z "
            },
            "U": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 0 l 174 0 z "
            },
            "V": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "W": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 347 174 l 347 868 l 521 868 l 521 174 l 694 174 l 694 868 l 868 868 l 868 174 q 817 50 868 100 q 694 0 765 0 l 174 0 z "
            },
            "X": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 347 q 24 408 0 382 q 87 434 50 434 q 24 458 50 434 q 0 521 0 484 l 0 868 l 174 868 l 174 521 l 521 521 l 521 868 l 694 868 l 694 521 q 669 458 694 484 q 608 434 643 434 q 669 408 643 434 q 694 347 694 382 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "Y": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 174 l 521 174 l 521 347 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 868 l 174 868 l 174 521 l 521 521 l 521 868 l 694 868 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "Z": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 347 q 50 469 0 419 q 174 521 102 521 l 521 521 l 521 694 l 0 694 l 0 868 l 694 868 l 694 521 q 643 397 694 448 q 521 347 591 347 l 174 347 l 174 174 l 694 174 l 694 0 l 0 0 z "
            },
            "[": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 0 l 0 868 l 347 868 l 347 694 l 174 694 l 174 174 l 347 174 l 347 0 l 0 0 z "
            },
            "\\": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 174 0 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 868 l 174 868 l 174 521 q 296 469 245 521 q 347 347 347 418 l 347 0 l 174 0 z "
            },
            "]": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 0 l 0 174 l 174 174 l 174 694 l 0 694 l 0 868 l 347 868 l 347 0 l 0 0 z "
            },
            "^": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 0 521 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 q 469 817 419 868 q 521 694 521 765 l 521 521 l 347 521 l 347 694 l 174 694 l 174 521 l 0 521 z "
            },
            "_": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 0 0 l 0 174 l 868 174 l 868 0 l 0 0 z "
            },
            "`": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 521 l 0 868 l 174 868 l 174 521 l 0 521 z "
            },
            "a": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "b": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 347 l 174 347 l 174 174 l 521 174 m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 q 669 458 694 484 q 608 434 643 434 q 669 408 643 434 q 694 347 694 382 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "c": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 l 521 521 l 521 694 l 174 694 l 174 174 l 521 174 l 521 347 l 694 347 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "d": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "e": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 z "
            },
            "f": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 0 l 0 0 z "
            },
            "g": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 174 l 521 174 l 521 347 l 347 347 l 347 521 l 521 521 q 643 469 593 521 q 694 347 694 418 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "h": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 868 l 174 868 l 174 521 l 521 521 l 521 868 l 694 868 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "i": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 z "
            },
            "j": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 0 0 l 0 174 l 347 174 l 347 868 l 521 868 l 521 174 q 469 50 521 100 q 347 0 418 0 l 0 0 z "
            },
            "k": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 868 l 174 868 l 174 521 l 521 521 l 521 868 l 694 868 l 694 521 q 669 458 694 484 q 608 434 643 434 q 669 408 643 434 q 694 347 694 382 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "l": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 694 174 l 694 0 l 174 0 z "
            },
            "m": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 0 0 l 0 868 l 694 868 q 817 817 766 868 q 868 694 868 765 l 868 0 l 694 0 l 694 694 l 521 694 l 521 0 l 347 0 l 347 694 l 174 694 l 174 0 l 0 0 z "
            },
            "n": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 694 l 174 694 l 174 0 l 0 0 z "
            },
            "o": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "p": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 q 643 397 694 448 q 521 347 591 347 l 174 347 l 174 0 l 0 0 z "
            },
            "q": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 521 -174 l 521 0 l 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 -174 l 521 -174 z "
            },
            "r": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 q 669 458 694 484 q 608 434 643 434 q 669 408 643 434 q 694 347 694 382 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "s": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 174 l 521 174 l 521 347 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 521 521 q 643 469 593 521 q 694 347 694 418 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "t": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 0 l 174 694 l 0 694 l 0 868 l 521 868 l 521 694 l 347 694 l 347 0 l 174 0 z "
            },
            "u": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 0 l 174 0 z "
            },
            "v": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "w": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 347 174 l 347 868 l 521 868 l 521 174 l 694 174 l 694 868 l 868 868 l 868 174 q 817 50 868 100 q 694 0 765 0 l 174 0 z "
            },
            "x": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 347 q 24 408 0 382 q 87 434 50 434 q 24 458 50 434 q 0 521 0 484 l 0 868 l 174 868 l 174 521 l 521 521 l 521 868 l 694 868 l 694 521 q 669 458 694 484 q 608 434 643 434 q 669 408 643 434 q 694 347 694 382 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "y": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 174 l 521 174 l 521 347 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 868 l 174 868 l 174 521 l 521 521 l 521 868 l 694 868 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "z": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 347 q 50 469 0 419 q 174 521 102 521 l 521 521 l 521 694 l 0 694 l 0 868 l 694 868 l 694 521 q 643 397 694 448 q 521 347 591 347 l 174 347 l 174 174 l 694 174 l 694 0 l 0 0 z "
            },
            "{": {
              "ha": 808,
              "x_min": 87,
              "x_max": 521,
              "o": "m 347 0 q 224 50 274 0 q 174 174 174 102 l 174 347 q 111 372 137 347 q 87 434 87 397 q 111 495 87 469 q 174 521 137 521 l 174 694 q 224 817 174 766 q 347 868 275 868 l 521 868 l 521 694 l 347 694 l 347 174 l 521 174 l 521 0 l 347 0 z "
            },
            "|": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 z "
            },
            "}": {
              "ha": 808,
              "x_min": 0,
              "x_max": 434,
              "o": "m 0 0 l 0 174 l 174 174 l 174 694 l 0 694 l 0 868 l 174 868 q 296 817 245 868 q 347 694 347 765 l 347 521 q 408 495 382 521 q 434 434 434 469 q 408 372 434 397 q 347 347 382 347 l 347 174 q 296 50 347 100 q 174 0 244 0 l 0 0 z "
            },
            "~": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 0 347 l 0 521 q 50 643 0 593 q 174 694 102 694 l 347 694 q 469 643 419 694 q 521 521 521 591 l 694 521 l 694 694 l 868 694 l 868 521 q 817 397 868 448 q 694 347 765 347 l 521 347 q 397 397 448 347 q 347 521 347 449 l 174 521 l 174 347 l 0 347 z "
            },
            "¡": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 0 l 0 521 l 174 521 l 174 0 l 0 0 m 0 694 l 0 868 l 174 868 l 174 694 l 0 694 z "
            },
            "¢": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 0 l 174 174 q 50 224 100 174 q 0 347 0 275 l 0 521 q 50 643 0 593 q 174 694 102 694 l 174 868 l 347 868 l 347 694 q 469 643 419 694 q 521 521 521 591 l 174 521 l 174 347 l 521 347 q 469 224 521 274 q 347 174 418 174 l 347 0 l 174 0 z "
            },
            "£": {
              "ha": 982,
              "x_min": -174,
              "x_max": 694,
              "o": "m 0 0 l 0 347 l -174 347 l -174 521 l 0 521 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 q 469 817 419 868 q 521 694 521 765 l 174 694 l 174 521 l 347 521 l 347 347 l 174 347 l 174 174 l 694 174 l 694 0 l 0 0 z "
            },
            "¤": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 0 0 l 0 174 l 174 174 l 174 0 l 0 0 m 694 0 l 694 174 l 868 174 l 868 0 l 694 0 m 521 347 l 521 521 l 347 521 l 347 347 l 521 347 m 347 174 q 224 224 274 174 q 174 347 174 275 l 174 521 q 224 643 174 593 q 347 694 275 694 l 521 694 q 643 643 593 694 q 694 521 694 591 l 694 347 q 643 224 694 274 q 521 174 591 174 l 347 174 m 0 694 l 0 868 l 174 868 l 174 694 l 0 694 m 694 694 l 694 868 l 868 868 l 868 694 l 694 694 z "
            },
            "¥": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 0 l 174 174 l 0 174 q 50 296 0 245 q 174 347 102 347 q 50 397 100 347 q 0 521 0 449 l 0 868 l 174 868 l 174 521 l 347 521 l 347 868 l 521 868 l 521 521 q 469 397 521 448 q 347 347 418 347 q 469 296 419 347 q 521 174 521 244 l 347 174 l 347 0 l 174 0 z "
            },
            "¦": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 0 l 0 347 l 174 347 l 174 0 l 0 0 m 0 521 l 0 868 l 174 868 l 174 521 l 0 521 z "
            },
            "§": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 174 l 521 174 l 521 347 l 347 347 l 347 521 l 521 521 q 643 469 593 521 q 694 347 694 418 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 m 174 347 q 50 397 100 347 q 0 521 0 449 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 347 l 174 347 z "
            },
            "¨": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 87 694 q 24 719 50 694 q 0 781 0 745 q 24 842 0 817 q 87 868 50 868 q 148 842 122 868 q 174 781 174 817 q 148 719 174 745 q 87 694 122 694 l 87 694 m 608 694 q 545 719 571 694 q 521 781 521 745 q 545 842 521 817 q 608 868 571 868 q 669 842 643 868 q 694 781 694 817 q 669 719 694 745 q 608 694 643 694 l 608 694 z "
            },
            "©": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 434 347 q 372 372 397 347 q 347 434 347 397 q 372 495 347 469 q 434 521 397 521 l 521 521 l 521 347 l 434 347 m 694 174 l 694 694 l 174 694 l 174 174 l 694 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 q 817 817 766 868 q 868 694 868 765 l 868 174 q 817 50 868 100 q 694 0 765 0 l 174 0 z "
            },
            "ª": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 347 521 l 347 694 l 174 694 l 174 521 l 347 521 m 174 347 q 50 397 100 347 q 0 521 0 449 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 l 521 347 l 174 347 z "
            },
            "«": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 174 174 q 50 224 100 174 q 0 347 0 275 l 0 521 q 50 643 0 593 q 174 694 102 694 l 347 694 l 347 521 l 174 521 l 174 347 l 347 347 l 347 174 l 174 174 m 694 174 q 571 224 621 174 q 521 347 521 275 l 521 521 q 571 643 521 593 q 694 694 623 694 l 868 694 l 868 521 l 694 521 l 694 347 l 868 347 l 868 174 l 694 174 z "
            },
            "¬": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 347 l 0 347 l 0 521 l 694 521 l 694 174 l 521 174 z "
            },
            "®": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 347 347 l 347 521 l 434 521 q 495 495 469 521 q 521 434 521 469 l 521 347 l 347 347 m 694 174 l 694 694 l 174 694 l 174 174 l 694 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 q 817 817 766 868 q 868 694 868 765 l 868 174 q 817 50 868 100 q 694 0 765 0 l 174 0 z "
            },
            "¯": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 694 l 0 868 l 694 868 l 694 694 l 0 694 z "
            },
            "°": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 347 521 l 347 694 l 174 694 l 174 521 l 347 521 m 174 347 q 50 397 100 347 q 0 521 0 449 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 q 469 817 419 868 q 521 694 521 765 l 521 521 q 469 397 521 448 q 347 347 418 347 l 174 347 z "
            },
            "±": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 0 0 l 0 174 l 521 174 l 521 0 l 0 0 m 174 347 l 174 521 l 0 521 l 0 694 l 174 694 l 174 868 l 347 868 l 347 694 l 521 694 l 521 521 l 347 521 l 347 347 l 174 347 z "
            },
            "²": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 347 l 0 521 q 50 643 0 593 q 174 694 102 694 l 0 694 l 0 868 l 174 868 q 296 817 245 868 q 347 694 347 765 q 296 571 347 621 q 174 521 244 521 l 347 521 l 347 347 l 0 347 z "
            },
            "³": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 347 l 0 521 q 24 582 0 556 q 87 608 50 608 q 24 632 50 608 q 0 694 0 658 l 0 868 l 174 868 q 296 817 245 868 q 347 694 347 765 l 347 521 q 296 397 347 448 q 174 347 244 347 l 0 347 z "
            },
            "´": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 l 347 694 l 0 694 z "
            },
            "µ": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 868 l 174 868 l 174 521 l 521 521 l 521 868 l 694 868 l 694 521 q 643 397 694 448 q 521 347 591 347 l 174 347 l 174 0 l 0 0 z "
            },
            "¶": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 0 l 521 0 l 521 694 l 347 694 l 347 0 l 174 0 z "
            },
            "·": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 347 l 0 521 l 174 521 l 174 347 l 0 347 z "
            },
            "¸": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 174 -347 l 174 -174 l 0 -174 l 0 174 l 174 174 l 174 0 q 296 -50 245 0 q 347 -174 347 -102 q 296 -296 347 -245 q 174 -347 244 -347 l 174 -347 z "
            },
            "¹": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 521 l 0 868 l 174 868 l 174 521 l 0 521 z "
            },
            "º": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 87 694 q 24 719 50 694 q 0 781 0 745 q 24 842 0 817 q 87 868 50 868 q 148 842 122 868 q 174 781 174 817 q 148 719 174 745 q 87 694 122 694 l 87 694 z "
            },
            "»": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 0 174 l 0 347 l 174 347 l 174 521 l 0 521 l 0 694 l 174 694 q 296 643 245 694 q 347 521 347 591 l 347 347 q 296 224 347 274 q 174 174 244 174 l 0 174 m 521 174 l 521 347 l 694 347 l 694 521 l 521 521 l 521 694 l 694 694 q 817 643 766 694 q 868 521 868 591 l 868 347 q 817 224 868 274 q 694 174 765 174 l 521 174 z "
            },
            "¼": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 87 0 q 24 24 50 0 q 0 87 0 50 q 24 148 0 122 q 87 174 50 174 q 148 148 122 174 q 174 87 174 122 q 148 24 174 50 q 87 0 122 0 l 87 0 m 260 0 q 198 24 224 0 q 174 87 174 50 q 198 148 174 122 q 260 174 224 174 q 321 148 296 174 q 347 87 347 122 q 321 24 347 50 q 260 0 296 0 l 260 0 m 434 0 q 372 24 397 0 q 347 87 347 50 q 372 148 347 122 q 434 174 397 174 q 495 148 469 174 q 521 87 521 122 q 495 24 521 50 q 434 0 469 0 l 434 0 m 608 0 q 545 24 571 0 q 521 87 521 50 q 545 148 521 122 q 608 174 571 174 q 669 148 643 174 q 694 87 694 122 q 669 24 694 50 q 608 0 643 0 l 608 0 m 0 347 l 0 521 l 694 521 l 694 347 l 0 347 m 87 694 q 24 719 50 694 q 0 781 0 745 q 24 842 0 817 q 87 868 50 868 q 148 842 122 868 q 174 781 174 817 q 148 719 174 745 q 87 694 122 694 l 87 694 z "
            },
            "½": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 434 0 q 372 24 397 0 q 347 87 347 50 q 372 148 347 122 q 434 174 397 174 q 495 148 469 174 q 521 87 521 122 q 495 24 521 50 q 434 0 469 0 l 434 0 m 608 0 q 545 24 571 0 q 521 87 521 50 q 545 148 521 122 q 608 174 571 174 q 669 148 643 174 q 694 87 694 122 q 669 24 694 50 q 608 0 643 0 l 608 0 m 0 347 l 0 521 l 694 521 l 694 347 l 0 347 m 87 694 q 24 719 50 694 q 0 781 0 745 q 24 842 0 817 q 87 868 50 868 q 148 842 122 868 q 174 781 174 817 q 148 719 174 745 q 87 694 122 694 l 87 694 z "
            },
            "¾": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 87 0 q 24 24 50 0 q 0 87 0 50 q 24 148 0 122 q 87 174 50 174 q 148 148 122 174 q 174 87 174 122 q 148 24 174 50 q 87 0 122 0 l 87 0 m 260 0 q 198 24 224 0 q 174 87 174 50 q 198 148 174 122 q 260 174 224 174 q 321 148 296 174 q 347 87 347 122 q 321 24 347 50 q 260 0 296 0 l 260 0 m 434 0 q 372 24 397 0 q 347 87 347 50 q 372 148 347 122 q 434 174 397 174 q 495 148 469 174 q 521 87 521 122 q 495 24 521 50 q 434 0 469 0 l 434 0 m 608 0 q 545 24 571 0 q 521 87 521 50 q 545 148 521 122 q 608 174 571 174 q 669 148 643 174 q 694 87 694 122 q 669 24 694 50 q 608 0 643 0 l 608 0 m 0 347 l 0 521 l 694 521 l 694 347 l 0 347 m 87 694 q 24 719 50 694 q 0 781 0 745 q 24 842 0 817 q 87 868 50 868 q 148 842 122 868 q 174 781 174 817 q 148 719 174 745 q 87 694 122 694 l 87 694 m 260 694 q 198 719 224 694 q 174 781 174 745 q 198 842 174 817 q 260 868 224 868 q 321 842 296 868 q 347 781 347 817 q 321 719 347 745 q 260 694 296 694 l 260 694 m 434 694 q 372 719 397 694 q 347 781 347 745 q 372 842 347 817 q 434 868 397 868 q 495 842 469 868 q 521 781 521 817 q 495 719 521 745 q 434 694 469 694 l 434 694 z "
            },
            "¿": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 347 q 50 469 0 419 q 174 521 102 521 l 347 521 q 296 397 347 448 q 174 347 244 347 l 174 174 l 521 174 l 521 347 l 694 347 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 174 694 l 174 868 l 347 868 l 347 694 l 174 694 z "
            },
            "À": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 0 1042 l 0 1215 l 174 1215 q 296 1164 245 1215 q 347 1042 347 1112 l 0 1042 z "
            },
            "Á": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 347 1042 q 397 1164 347 1114 q 521 1215 449 1215 l 694 1215 l 694 1042 l 347 1042 z "
            },
            "Â": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 l 521 1215 q 643 1164 593 1215 q 694 1042 694 1112 l 0 1042 z "
            },
            "Ã": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 q 235 1190 209 1215 q 260 1128 260 1164 q 235 1066 260 1092 q 174 1042 209 1042 l 0 1042 m 347 1042 q 285 1066 311 1042 q 260 1128 260 1092 q 285 1190 260 1164 q 347 1215 311 1215 l 694 1215 q 643 1092 694 1142 q 521 1042 591 1042 l 347 1042 z "
            },
            "Ä": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 87 1042 q 24 1066 50 1042 q 0 1128 0 1092 q 24 1190 0 1164 q 87 1215 50 1215 q 148 1190 122 1215 q 174 1128 174 1164 q 148 1066 174 1092 q 87 1042 122 1042 l 87 1042 m 608 1042 q 545 1066 571 1042 q 521 1128 521 1092 q 545 1190 521 1164 q 608 1215 571 1215 q 669 1190 643 1215 q 694 1128 694 1164 q 669 1066 694 1092 q 608 1042 643 1042 l 608 1042 z "
            },
            "Å": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 260 1042 q 198 1066 224 1042 q 174 1128 174 1092 q 198 1190 174 1164 q 260 1215 224 1215 q 321 1190 296 1215 q 347 1128 347 1164 q 321 1066 347 1092 q 260 1042 296 1042 l 260 1042 z "
            },
            "Æ": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 347 521 l 347 694 l 174 694 l 174 521 l 347 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 868 868 l 868 694 l 521 694 l 521 521 l 868 521 l 868 347 l 521 347 l 521 174 l 868 174 l 868 0 l 521 0 q 397 50 448 0 q 347 174 347 102 l 347 347 l 174 347 l 174 0 l 0 0 z "
            },
            "Ç": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 -174 l 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 l 521 521 l 521 694 l 174 694 l 174 174 l 521 174 l 521 347 l 694 347 l 694 174 q 643 50 694 100 q 521 0 591 0 l 347 0 q 296 -122 347 -72 q 174 -174 244 -174 l 174 -174 z "
            },
            "È": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 m 0 1042 l 0 1215 l 174 1215 q 296 1164 245 1215 q 347 1042 347 1112 l 0 1042 z "
            },
            "É": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 m 347 1042 q 397 1164 347 1114 q 521 1215 449 1215 l 694 1215 l 694 1042 l 347 1042 z "
            },
            "Ê": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 l 521 1215 q 643 1164 593 1215 q 694 1042 694 1112 l 0 1042 z "
            },
            "Ë": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 m 87 1042 q 24 1066 50 1042 q 0 1128 0 1092 q 24 1190 0 1164 q 87 1215 50 1215 q 148 1190 122 1215 q 174 1128 174 1164 q 148 1066 174 1092 q 87 1042 122 1042 l 87 1042 m 608 1042 q 545 1066 571 1042 q 521 1128 521 1092 q 545 1190 521 1164 q 608 1215 571 1215 q 669 1190 643 1215 q 694 1128 694 1164 q 669 1066 694 1092 q 608 1042 643 1042 l 608 1042 z "
            },
            "Ì": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 m 0 1042 l 0 1215 l 174 1215 q 296 1164 245 1215 q 347 1042 347 1112 l 0 1042 z "
            },
            "Í": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 l 347 1215 l 347 1042 l 0 1042 z "
            },
            "Î": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 m 0 1042 q 24 1103 0 1077 q 87 1128 50 1128 q 148 1103 122 1128 q 174 1042 174 1077 l 0 1042 z "
            },
            "Ï": {
              "ha": 635,
              "x_min": -174,
              "x_max": 347,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 m -87 1042 q -148 1066 -122 1042 q -174 1128 -174 1092 q -148 1190 -174 1164 q -87 1215 -122 1215 q -24 1190 -50 1215 q 0 1128 0 1164 q -24 1066 0 1092 q -87 1042 -50 1042 l -87 1042 m 260 1042 q 198 1066 224 1042 q 174 1128 174 1092 q 198 1190 174 1164 q 260 1215 224 1215 q 321 1190 296 1215 q 347 1128 347 1164 q 321 1066 347 1092 q 260 1042 296 1042 l 260 1042 z "
            },
            "Ð": {
              "ha": 982,
              "x_min": -174,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 521 l 347 521 l 347 347 l 174 347 l 174 174 l 521 174 m 0 0 l 0 347 l -174 347 l -174 521 l 0 521 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 0 0 z "
            },
            "Ñ": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 694 l 174 694 l 174 0 l 0 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 q 235 1190 209 1215 q 260 1128 260 1164 q 235 1066 260 1092 q 174 1042 209 1042 l 0 1042 m 347 1042 q 285 1066 311 1042 q 260 1128 260 1092 q 285 1190 260 1164 q 347 1215 311 1215 l 694 1215 q 643 1092 694 1142 q 521 1042 591 1042 l 347 1042 z "
            },
            "Ò": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 0 1042 l 0 1215 l 174 1215 q 296 1164 245 1215 q 347 1042 347 1112 l 0 1042 z "
            },
            "Ó": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 347 1042 q 397 1164 347 1114 q 521 1215 449 1215 l 694 1215 l 694 1042 l 347 1042 z "
            },
            "Ô": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 l 521 1215 q 643 1164 593 1215 q 694 1042 694 1112 l 0 1042 z "
            },
            "Õ": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 q 235 1190 209 1215 q 260 1128 260 1164 q 235 1066 260 1092 q 174 1042 209 1042 l 0 1042 m 347 1042 q 285 1066 311 1042 q 260 1128 260 1092 q 285 1190 260 1164 q 347 1215 311 1215 l 694 1215 q 643 1092 694 1142 q 521 1042 591 1042 l 347 1042 z "
            },
            "Ö": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 87 1042 q 24 1066 50 1042 q 0 1128 0 1092 q 24 1190 0 1164 q 87 1215 50 1215 q 148 1190 122 1215 q 174 1128 174 1164 q 148 1066 174 1092 q 87 1042 122 1042 l 87 1042 m 608 1042 q 545 1066 571 1042 q 521 1128 521 1092 q 545 1190 521 1164 q 608 1215 571 1215 q 669 1190 643 1215 q 694 1128 694 1164 q 669 1066 694 1092 q 608 1042 643 1042 l 608 1042 z "
            },
            "×": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 0 174 l 0 347 q 24 408 0 382 q 87 434 50 434 q 24 458 50 434 q 0 521 0 484 l 0 694 l 174 694 l 174 521 l 347 521 l 347 694 l 521 694 l 521 521 q 495 458 521 484 q 434 434 469 434 q 495 408 469 434 q 521 347 521 382 l 521 174 l 347 174 l 347 347 l 174 347 l 174 174 l 0 174 z "
            },
            "Ø": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 521 q 397 571 448 521 q 347 694 347 623 l 174 694 l 174 347 q 296 296 245 347 q 347 174 347 244 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "Ù": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 0 l 174 0 m 0 1042 l 0 1215 l 174 1215 q 296 1164 245 1215 q 347 1042 347 1112 l 0 1042 z "
            },
            "Ú": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 0 l 174 0 m 347 1042 q 397 1164 347 1114 q 521 1215 449 1215 l 694 1215 l 694 1042 l 347 1042 z "
            },
            "Û": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 0 l 174 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 l 521 1215 q 643 1164 593 1215 q 694 1042 694 1112 l 0 1042 z "
            },
            "Ü": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 0 l 174 0 m 87 1042 q 24 1066 50 1042 q 0 1128 0 1092 q 24 1190 0 1164 q 87 1215 50 1215 q 148 1190 122 1215 q 174 1128 174 1164 q 148 1066 174 1092 q 87 1042 122 1042 l 87 1042 m 608 1042 q 545 1066 571 1042 q 521 1128 521 1092 q 545 1190 521 1164 q 608 1215 571 1215 q 669 1190 643 1215 q 694 1128 694 1164 q 669 1066 694 1092 q 608 1042 643 1042 l 608 1042 z "
            },
            "Ý": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 0 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 868 l 174 868 l 174 521 l 347 521 l 347 868 l 174 868 q 224 990 174 940 q 347 1042 275 1042 l 521 1042 l 521 521 q 469 397 521 448 q 347 347 418 347 l 347 0 l 174 0 z "
            },
            "Þ": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 347 347 l 347 521 l 174 521 l 174 347 l 347 347 m 0 0 l 0 868 l 174 868 l 174 694 l 347 694 q 469 643 419 694 q 521 521 521 591 l 521 347 q 469 224 521 274 q 347 174 418 174 l 174 174 l 174 0 l 0 0 z "
            },
            "ß": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 347 521 l 347 694 l 174 694 l 174 521 l 347 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 q 469 817 419 868 q 521 694 521 765 l 521 521 q 643 469 593 521 q 694 347 694 418 l 694 174 q 643 50 694 100 q 521 0 591 0 l 347 0 l 347 174 l 521 174 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "à": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 0 1042 l 0 1215 l 174 1215 q 296 1164 245 1215 q 347 1042 347 1112 l 0 1042 z "
            },
            "á": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 347 1042 q 397 1164 347 1114 q 521 1215 449 1215 l 694 1215 l 694 1042 l 347 1042 z "
            },
            "â": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 l 521 1215 q 643 1164 593 1215 q 694 1042 694 1112 l 0 1042 z "
            },
            "ã": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 q 235 1190 209 1215 q 260 1128 260 1164 q 235 1066 260 1092 q 174 1042 209 1042 l 0 1042 m 347 1042 q 285 1066 311 1042 q 260 1128 260 1092 q 285 1190 260 1164 q 347 1215 311 1215 l 694 1215 q 643 1092 694 1142 q 521 1042 591 1042 l 347 1042 z "
            },
            "ä": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 87 1042 q 24 1066 50 1042 q 0 1128 0 1092 q 24 1190 0 1164 q 87 1215 50 1215 q 148 1190 122 1215 q 174 1128 174 1164 q 148 1066 174 1092 q 87 1042 122 1042 l 87 1042 m 608 1042 q 545 1066 571 1042 q 521 1128 521 1092 q 545 1190 521 1164 q 608 1215 571 1215 q 669 1190 643 1215 q 694 1128 694 1164 q 669 1066 694 1092 q 608 1042 643 1042 l 608 1042 z "
            },
            "å": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 521 l 521 694 l 174 694 l 174 521 l 521 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 260 1042 q 198 1066 224 1042 q 174 1128 174 1092 q 198 1190 174 1164 q 260 1215 224 1215 q 321 1190 296 1215 q 347 1128 347 1164 q 321 1066 347 1092 q 260 1042 296 1042 l 260 1042 z "
            },
            "æ": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 347 521 l 347 694 l 174 694 l 174 521 l 347 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 868 868 l 868 694 l 521 694 l 521 521 l 868 521 l 868 347 l 521 347 l 521 174 l 868 174 l 868 0 l 521 0 q 397 50 448 0 q 347 174 347 102 l 347 347 l 174 347 l 174 0 l 0 0 z "
            },
            "ç": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 -174 l 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 521 l 521 521 l 521 694 l 174 694 l 174 174 l 521 174 l 521 347 l 694 347 l 694 174 q 643 50 694 100 q 521 0 591 0 l 347 0 q 296 -122 347 -72 q 174 -174 244 -174 l 174 -174 z "
            },
            "è": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 m 0 1042 l 0 1215 l 174 1215 q 296 1164 245 1215 q 347 1042 347 1112 l 0 1042 z "
            },
            "é": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 m 347 1042 q 397 1164 347 1114 q 521 1215 449 1215 l 694 1215 l 694 1042 l 347 1042 z "
            },
            "ê": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 l 521 1215 q 643 1164 593 1215 q 694 1042 694 1112 l 0 1042 z "
            },
            "ë": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 694 521 l 694 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 m 87 1042 q 24 1066 50 1042 q 0 1128 0 1092 q 24 1190 0 1164 q 87 1215 50 1215 q 148 1190 122 1215 q 174 1128 174 1164 q 148 1066 174 1092 q 87 1042 122 1042 l 87 1042 m 608 1042 q 545 1066 571 1042 q 521 1128 521 1092 q 545 1190 521 1164 q 608 1215 571 1215 q 669 1190 643 1215 q 694 1128 694 1164 q 669 1066 694 1092 q 608 1042 643 1042 l 608 1042 z "
            },
            "ì": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 m 0 1042 l 0 1215 l 174 1215 q 296 1164 245 1215 q 347 1042 347 1112 l 0 1042 z "
            },
            "í": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 l 347 1215 l 347 1042 l 0 1042 z "
            },
            "î": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 m 0 1042 q 24 1103 0 1077 q 87 1128 50 1128 q 148 1103 122 1128 q 174 1042 174 1077 l 0 1042 z "
            },
            "ï": {
              "ha": 635,
              "x_min": -174,
              "x_max": 347,
              "o": "m 0 0 l 0 868 l 174 868 l 174 0 l 0 0 m -87 1042 q -148 1066 -122 1042 q -174 1128 -174 1092 q -148 1190 -174 1164 q -87 1215 -122 1215 q -24 1190 -50 1215 q 0 1128 0 1164 q -24 1066 0 1092 q -87 1042 -50 1042 l -87 1042 m 260 1042 q 198 1066 224 1042 q 174 1128 174 1092 q 198 1190 174 1164 q 260 1215 224 1215 q 321 1190 296 1215 q 347 1128 347 1164 q 321 1066 347 1092 q 260 1042 296 1042 l 260 1042 z "
            },
            "ð": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 694 174 l 694 347 l 174 347 l 174 174 l 694 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 347 q 50 469 0 419 q 174 521 102 521 l 694 521 l 694 694 l 521 694 q 469 571 521 621 q 347 521 418 521 l 347 694 l 174 694 l 174 868 l 347 868 q 397 990 347 940 q 521 1042 449 1042 l 521 868 l 694 868 q 817 817 766 868 q 868 694 868 765 l 868 174 q 817 50 868 100 q 694 0 765 0 l 174 0 z "
            },
            "ñ": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 0 l 521 0 l 521 694 l 174 694 l 174 0 l 0 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 q 235 1190 209 1215 q 260 1128 260 1164 q 235 1066 260 1092 q 174 1042 209 1042 l 0 1042 m 347 1042 q 285 1066 311 1042 q 260 1128 260 1092 q 285 1190 260 1164 q 347 1215 311 1215 l 694 1215 q 643 1092 694 1142 q 521 1042 591 1042 l 347 1042 z "
            },
            "ò": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 0 1042 l 0 1215 l 174 1215 q 296 1164 245 1215 q 347 1042 347 1112 l 0 1042 z "
            },
            "ó": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 347 1042 q 397 1164 347 1114 q 521 1215 449 1215 l 694 1215 l 694 1042 l 347 1042 z "
            },
            "ô": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 l 521 1215 q 643 1164 593 1215 q 694 1042 694 1112 l 0 1042 z "
            },
            "õ": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 q 235 1190 209 1215 q 260 1128 260 1164 q 235 1066 260 1092 q 174 1042 209 1042 l 0 1042 m 347 1042 q 285 1066 311 1042 q 260 1128 260 1092 q 285 1190 260 1164 q 347 1215 311 1215 l 694 1215 q 643 1092 694 1142 q 521 1042 591 1042 l 347 1042 z "
            },
            "ö": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 694 l 174 694 l 174 174 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 m 87 1042 q 24 1066 50 1042 q 0 1128 0 1092 q 24 1190 0 1164 q 87 1215 50 1215 q 148 1190 122 1215 q 174 1128 174 1164 q 148 1066 174 1092 q 87 1042 122 1042 l 87 1042 m 608 1042 q 545 1066 571 1042 q 521 1128 521 1092 q 545 1190 521 1164 q 608 1215 571 1215 q 669 1190 643 1215 q 694 1128 694 1164 q 669 1066 694 1092 q 608 1042 643 1042 l 608 1042 z "
            },
            "÷": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 434 0 q 372 24 397 0 q 347 87 347 50 q 372 148 347 122 q 434 174 397 174 q 495 148 469 174 q 521 87 521 122 q 495 24 521 50 q 434 0 469 0 l 434 0 m 0 347 l 0 521 l 868 521 l 868 347 l 0 347 m 434 694 q 372 719 397 694 q 347 781 347 745 q 372 842 347 817 q 434 868 397 868 q 495 842 469 868 q 521 781 521 817 q 495 719 521 745 q 434 694 469 694 l 434 694 z "
            },
            "ø": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 521 174 l 521 521 q 397 571 448 521 q 347 694 347 623 l 174 694 l 174 347 q 296 296 245 347 q 347 174 347 244 l 521 174 m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 694 q 50 817 0 766 q 174 868 102 868 l 521 868 q 643 817 593 868 q 694 694 694 765 l 694 174 q 643 50 694 100 q 521 0 591 0 l 174 0 z "
            },
            "ù": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 0 l 174 0 m 0 1042 l 0 1215 l 174 1215 q 296 1164 245 1215 q 347 1042 347 1112 l 0 1042 z "
            },
            "ú": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 0 l 174 0 m 347 1042 q 397 1164 347 1114 q 521 1215 449 1215 l 694 1215 l 694 1042 l 347 1042 z "
            },
            "û": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 0 l 174 0 m 0 1042 q 50 1164 0 1114 q 174 1215 102 1215 l 521 1215 q 643 1164 593 1215 q 694 1042 694 1112 l 0 1042 z "
            },
            "ü": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 521 174 l 521 868 l 694 868 l 694 0 l 174 0 m 87 1042 q 24 1066 50 1042 q 0 1128 0 1092 q 24 1190 0 1164 q 87 1215 50 1215 q 148 1190 122 1215 q 174 1128 174 1164 q 148 1066 174 1092 q 87 1042 122 1042 l 87 1042 m 608 1042 q 545 1066 571 1042 q 521 1128 521 1092 q 545 1190 521 1164 q 608 1215 571 1215 q 669 1190 643 1215 q 694 1128 694 1164 q 669 1066 694 1092 q 608 1042 643 1042 l 608 1042 z "
            },
            "ý": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 0 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 868 l 174 868 l 174 521 l 347 521 l 347 868 l 174 868 q 224 990 174 940 q 347 1042 275 1042 l 521 1042 l 521 521 q 469 397 521 448 q 347 347 418 347 l 347 0 l 174 0 z "
            },
            "þ": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 347 347 l 347 521 l 174 521 l 174 347 l 347 347 m 0 0 l 0 868 l 174 868 l 174 694 l 347 694 q 469 643 419 694 q 521 521 521 591 l 521 347 q 469 224 521 274 q 347 174 418 174 l 174 174 l 174 0 l 0 0 z "
            },
            "ÿ": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 0 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 868 l 174 868 l 174 521 l 347 521 l 347 868 l 521 868 l 521 521 q 469 397 521 448 q 347 347 418 347 l 347 0 l 174 0 z "
            },
            "Ů": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 694 174 l 694 868 l 868 868 l 868 0 l 174 0 z "
            },
            "ů": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 868 l 174 868 l 174 174 l 694 174 l 694 868 l 868 868 l 868 0 l 174 0 z "
            },
            "Ÿ": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 0 l 174 347 q 50 397 100 347 q 0 521 0 449 l 0 694 l 174 694 l 174 521 l 347 521 l 347 694 l 521 694 l 521 521 q 469 397 521 448 q 347 347 418 347 l 347 0 l 174 0 m 87 868 q 24 892 50 868 q 0 955 0 918 q 24 1016 0 990 q 87 1042 50 1042 q 148 1016 122 1042 q 174 955 174 990 q 148 892 174 918 q 87 868 122 868 l 87 868 m 434 868 q 372 892 397 868 q 347 955 347 918 q 372 1016 347 990 q 434 1042 397 1042 q 495 1016 469 1042 q 521 955 521 990 q 495 892 521 918 q 434 868 469 868 l 434 868 z "
            },
            "ẞ": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 347 521 l 347 694 l 174 694 l 174 521 l 347 521 m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 q 469 817 419 868 q 521 694 521 765 l 521 521 q 643 469 593 521 q 694 347 694 418 l 694 174 q 643 50 694 100 q 521 0 591 0 l 347 0 l 347 174 l 521 174 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "—": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 0 347 l 0 521 l 868 521 l 868 347 l 0 347 z "
            },
            "‘": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 521 l 0 694 q 50 817 0 766 q 174 868 102 868 l 174 521 l 0 521 z "
            },
            "’": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 521 l 0 868 l 174 868 l 174 694 q 122 571 174 621 q 0 521 71 521 l 0 521 z "
            },
            "‚": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 0 -174 l 0 174 l 174 174 l 174 0 q 122 -122 174 -72 q 0 -174 71 -174 l 0 -174 z "
            },
            "‛": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 174 521 q 50 571 100 521 q 0 694 0 623 l 0 868 l 174 868 l 174 521 l 174 521 z "
            },
            "“": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 0 521 l 0 694 q 50 817 0 766 q 174 868 102 868 l 174 521 l 0 521 m 347 521 l 347 694 q 397 817 347 766 q 521 868 449 868 l 521 521 l 347 521 z "
            },
            "”": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 0 521 l 0 868 l 174 868 l 174 694 q 122 571 174 621 q 0 521 71 521 l 0 521 m 347 521 l 347 868 l 521 868 l 521 694 q 469 571 521 621 q 347 521 418 521 l 347 521 z "
            },
            "„": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 0 -174 l 0 174 l 174 174 l 174 0 q 122 -122 174 -72 q 0 -174 71 -174 l 0 -174 m 347 -174 l 347 174 l 521 174 l 521 0 q 469 -122 521 -72 q 347 -174 418 -174 l 347 -174 z "
            },
            "†": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 0 l 174 521 l 0 521 l 0 694 l 174 694 l 174 1042 l 347 1042 l 347 694 l 521 694 l 521 521 l 347 521 l 347 0 l 174 0 z "
            },
            "•": {
              "ha": 461,
              "x_min": 0,
              "x_max": 174,
              "o": "m 87 347 q 24 372 50 347 q 0 434 0 397 q 24 495 0 469 q 87 521 50 521 q 148 495 122 521 q 174 434 174 469 q 148 372 174 397 q 87 347 122 347 l 87 347 z "
            },
            "…": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 87 0 q 24 24 50 0 q 0 87 0 50 q 24 148 0 122 q 87 174 50 174 q 148 148 122 174 q 174 87 174 122 q 148 24 174 50 q 87 0 122 0 l 87 0 m 434 0 q 372 24 397 0 q 347 87 347 50 q 372 148 347 122 q 434 174 397 174 q 495 148 469 174 q 521 87 521 122 q 495 24 521 50 q 434 0 469 0 l 434 0 m 781 0 q 719 24 745 0 q 694 87 694 50 q 719 148 694 122 q 781 174 745 174 q 842 148 817 174 q 868 87 868 122 q 842 24 868 50 q 781 0 817 0 l 781 0 z "
            },
            "‹": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 347 q 50 469 0 419 q 174 521 102 521 l 347 521 l 347 347 l 174 347 l 174 174 l 347 174 l 347 0 l 174 0 z "
            },
            "›": {
              "ha": 635,
              "x_min": 0,
              "x_max": 347,
              "o": "m 0 0 l 0 174 l 174 174 l 174 347 l 0 347 l 0 521 l 174 521 q 296 469 245 521 q 347 347 347 418 l 347 174 q 296 50 347 100 q 174 0 244 0 l 0 0 z "
            },
            "€": {
              "ha": 982,
              "x_min": -174,
              "x_max": 694,
              "o": "m 174 0 q 50 50 100 0 q 0 174 0 102 l 0 347 l -174 347 l -174 521 l 0 521 l 0 694 q 50 817 0 766 q 174 868 102 868 l 694 868 l 694 694 l 174 694 l 174 521 l 521 521 l 521 347 l 174 347 l 174 174 l 694 174 l 694 0 l 174 0 z "
            },
            "™": {
              "ha": 808,
              "x_min": 0,
              "x_max": 521,
              "o": "m 174 347 l 174 521 l 0 521 l 0 694 l 347 694 q 469 643 419 694 q 521 521 521 591 l 521 347 l 174 347 z "
            },
            "ﬀ": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 l 347 694 l 174 694 l 174 521 l 521 521 l 521 694 q 571 817 521 766 q 694 868 623 868 l 868 868 l 868 694 l 694 694 l 694 521 l 868 521 l 868 347 l 694 347 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "ﬁ": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 l 347 694 l 174 694 l 174 521 l 694 521 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 608 694 q 545 719 571 694 q 521 781 521 745 q 545 842 521 817 q 608 868 571 868 q 669 842 643 868 q 694 781 694 817 q 669 719 694 745 q 608 694 643 694 l 608 694 z "
            },
            "ﬂ": {
              "ha": 982,
              "x_min": 0,
              "x_max": 694,
              "o": "m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 l 347 694 l 174 694 l 174 521 l 521 521 l 521 868 l 694 868 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "ﬃ": {
              "ha": 1503,
              "x_min": 0,
              "x_max": 1215,
              "o": "m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 l 347 694 l 174 694 l 174 521 l 521 521 l 521 694 q 571 817 521 766 q 694 868 623 868 l 868 868 l 868 694 l 694 694 l 694 521 l 1215 521 l 1215 0 l 1042 0 l 1042 347 l 694 347 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 m 1128 694 q 1066 719 1092 694 q 1042 781 1042 745 q 1066 842 1042 817 q 1128 868 1092 868 q 1190 842 1164 868 q 1215 781 1215 817 q 1190 719 1215 745 q 1128 694 1164 694 l 1128 694 z "
            },
            "ﬄ": {
              "ha": 1503,
              "x_min": 0,
              "x_max": 1215,
              "o": "m 0 0 l 0 694 q 50 817 0 766 q 174 868 102 868 l 347 868 l 347 694 l 174 694 l 174 521 l 521 521 l 521 694 q 571 817 521 766 q 694 868 623 868 l 868 868 l 868 694 l 694 694 l 694 521 l 1042 521 l 1042 868 l 1215 868 l 1215 0 l 1042 0 l 1042 347 l 694 347 l 694 0 l 521 0 l 521 347 l 174 347 l 174 0 l 0 0 z "
            },
            "ﬆ": {
              "ha": 1156,
              "x_min": 0,
              "x_max": 868,
              "o": "m 0 0 l 0 174 l 174 174 q 50 224 100 174 q 0 347 0 275 q 50 469 0 419 q 174 521 102 521 l 868 521 l 868 347 l 694 347 l 694 0 l 521 0 l 521 347 l 174 347 q 296 296 245 347 q 347 174 347 244 q 296 50 347 100 q 174 0 244 0 l 0 0 z "
            }
          },
          "familyName": "KenVector Future Thin",
          "ascender": 1215,
          "descender": -347,
          "underlinePosition": 138,
          "underlineThickness": 69,
          "boundingBox": {
            "yMin": -347,
            "xMin": -174,
            "yMax": 1215,
            "xMax": 1215
          },
          "resolution": 1000,
          "original_font_information": {
            "format": 0,
            "copyright": "Copyright Kenney 2013",
            "fontFamily": "KenVector Future Thin",
            "fontSubfamily": "Regular",
            "uniqueID": "FontStruct KenVector Future Thin",
            "fullName": "KenVector Future Thin Regular",
            "version": "Version 1.0",
            "postScriptName": "KenVector-Future-Thin",
            "trademark": "FontStruct is a trademark of FSI FontShop International GmbH",
            "manufacturer": "http://fontstruct.com",
            "designer": "Kenney",
            "description": "‚ÄúKenVector Future Thin‚Äù was built with FontStruct\n",
            "manufacturerURL": "http://www.fontshop.com",
            "designerURL": "http://fontstruct.com/fontstructions/show/904448",
            "licence": "Creative Commons Attribution Share Alike",
            "licenceURL": "http://creativecommons.org/licenses/by-sa/3.0/",
            "sampleText": "Five big quacking zephyrs jolt my wax bed",
            "unknown1": "CwkMcV1s"
          },
          "cssFontWeight": "normal",
          "cssFontStyle": "normal"
        };
        var floader = new FontLoader();
        var font0 = floader.parse(fontjson);
        // var font0=floader.load("https://raw.githubusercontent.com/Radetzki87/web1/master/doh.json")
        class ftile {
            constructor(a, b, c, d, index, direction, flag, me, me2) {
                this.body = me;
                this.body0 = me2;
                this.a = a;
                this.b = b;
                this.c = c;
                this.d = d;
                this.index = index;
                this.direction = direction;
                this.mx = -bw / 2 + (tw / 2) + (tw) * (b);
                this.mz = -bw / 2 + (tw / 2) + (tw) * (a);
                this.dx = -bw / 2 + (tw / 2) + (tw) * (d);
                this.dz = -bw / 2 + (tw / 2) + (tw) * (c);
                this.tic = 0.15
                this.start = elapsedTime;
                // console.log(this)
                this.merge = flag;
                this.nx = a;
                this.ny = b;
                if (flag) {
                    this.q = 1;
                } else {
                    this.q = 0;
                }

            }
        }

        class Game2048 {
            constructor(size, index) {
                this.size = size;
                this.board = new Array(size).fill(null).map(() => new Array(size).fill(0));
                // this.spawnTile();
                // this.spawnTile();
                this.skin = 0;
                this.boardChanged = false;
                this.index = index;
                this.boardpointer = [];
                this.fullflag=false;
                for (let row = 0; row < this.size; row++) {
                    var temp = [];
                    for (let col = 0; col < this.size; col++) {
                        temp.push([])
                    }
                    this.boardpointer.push(temp);
                }
                // this.move();
            }
            spawnTile(direction) {
                // if(direction=5){
                //   this.boardChanged=false;
                //   return ;
                // }
                var emptyPositions = [];
                // if(direction==5){
                //   for (let row = 0; row < this.size; row++) {
                //     for (let col = 0; col < this.size; col++) {
                //       if (this.board[row][col] === 0) {
                //         emptyPositions.push({ row: row, col: col });
                //       }
                //     }
                //   }
                // }else{
                //   switch (direction) {
                //     case 'up':
                //       for (let row = this.size; row >= this.size; row--) {
                //         for (let col = 0; col < this.size; col++) {
                //           if (this.board[row][col] === 0&&(col==this.size||col==0||row==0||row==this.size)) {
                //             emptyPositions.push({ row: row, col: col });
                //           }
                //         }
                //       }
                //       break;
                //     case 'down':
                //       for (let row = 0; row < 1; row++) {
                //         for (let col = 0; col < this.size; col++) {
                //           if (this.board[row][col] === 0&&(col==this.size||col==0||row==0||row==this.size)) {
                //             emptyPositions.push({ row: row, col: col });
                //           }
                //         }
                //       }
                //       break;
                //     case 'left':
                //       for (let col = this.size; col >= this.size; col--) {
                //         for (let row = 0; row < this.size; row++) {
                //           if (this.board[row][col] === 0&&(col==this.size||col==0||row==0||row==this.size)) {
                //             emptyPositions.push({ row: row, col: col });
                //           }
                //         }
                //       }
                //       break;
                //     case 'right':
                //       for (let col = 0; col < 1; col++) {
                //         for (let row = 0; row < this.size; row++) {
                //           if (this.board[row][col] === 0&&(col==this.size||col==0||row==0||row==this.size)) {
                //             emptyPositions.push({ row: row, col: col });
                //           }
                //         }
                //       }
                //       break;
                //     default:
                //       return;
                //   }
                // }
                for (let row = 0; row < this.size; row++) {
                    for (let col = 0; col < this.size; col++) {
                        if (this.board[row][col] === 0) {
                            emptyPositions.push({
                                row: row,
                                col: col
                            });
                        }
                    }
                }
                emptyPositions.sort(() => Math.random() - 0.5);
                // console.log(direction)
                // console.log(direction)
                if (direction === "up") {
                    emptyPositions.sort(function(a, b) {
                        return b.row - a.row;
                    });
                } else if (direction === "down") {
                    emptyPositions.sort(function(a, b) {
                        return a.row - b.row;
                    });
                } else if (direction === "left") {
                    emptyPositions.sort(function(a, b) {
                        return b.col - a.col;
                    });
                } else if (direction === "right") {
                    emptyPositions.sort(function(a, b) {
                        return a.col - b.col;
                    });
                }
                if (emptyPositions.length > 0) {
                    // const position = emptyPositions[Math.floor(Math.random() * emptyPositions.length)];
                    var position = emptyPositions[0];
                    this.board[position.row][position.col] = Math.random() < 0.9 ? 2 : 4;
                    let ntile;
                    if (this.board[position.row][position.col] == 2) {
                        ntile = tilemold[0].clone();
                        ntile.material = new THREE.MeshLambertMaterial({
                            color: getColorForNumber(2)
                        });
                        ntile.children[0].material = new THREE.MeshBasicMaterial({
                            color: 0xffffff
                        });
                    } else {
                        ntile = tilemold[1].clone();
                        ntile.material = new THREE.MeshLambertMaterial({
                            color: getColorForNumber(4)
                        });
                        ntile.children[0].material = new THREE.MeshBasicMaterial({
                            color: getColorForNumber(2)
                        });
                    }
                    ntile.position.set(
                        0 - bw / 2 + tw / 2 + position.col * tw,
                        0,
                        0 - bw / 2 + tw / 2 + position.row * tw
                    );
                    ntile.userData["time"] = elapsedTime;
                    ntile.userData["merge"] = 0;
                    ntile.userData["skin"] = "tile";
                    ntile.userData["skintype"] =1;
                    ntile.children.forEach((text) => {
                        text.userData["time"] = elapsedTime;
                        text.userData["merge"] = 0;
                        text.userData["skin"] = "tile";
                    })
                    cubes[this.index].mesh.add(ntile);
                    this.boardpointer[position.row][position.col] = ntile;
                    // createTile(this.index,th*0.6, tw, this.board[position.row][position.col], (tile) => {
                    //   tile.position.set(
                    //     0 - bw/2 + tw/2 + position.col * tw,
                    //     0,
                    //     0 - bw/2 + tw/2 + position.row * tw
                    //   );
                    //   createTextMesh(this.board[position.row][position.col].toString(), bw / 8, (textMesh) => {
                    //     textMesh.position.y = +(th/32)
                    //     textMesh.position.z+=th/2;
                    //     textMesh.rotation.order = 'YXZ';
                    //     textMesh.rotation.x = -Math.PI / 2;
                    //     tile.userData["text"]=this.board[position.row][position.col].toString()
                    //     tile.userData["time"]=elapsedTime;
                    //     tile.userData["merge"]=0;
                    //     tile.add(textMesh);
                    //     cubes[this.index].mesh.add(tile);
                    //     this.boardpointer[position.row][position.col]=tile;
                    //   });
                    // });
                    atchanged = elapsedTime;
                    if(emptyPositions.length==1){
                      var full=true;
                      for (let row = 0; row < this.size; row++) {
                          for (let col = 0; col < this.size-1; col++) {
                              if (this.board[row][col] == this.board[row][col+1]) {
                                  full=false;
                              }
                          }
                      }
                      for (let col = 0; col < this.size; col++) {
                          for (let row = 0; row < this.size-1; row++) {
                              if (this.board[row][col] == this.board[row+1][col]) {
                                  full=false;
                              }
                          }
                      }
                      if(full){

                        this.fullflag=true;
                        showpop("FULL!!:","","+500pt")
                        점수+=500;
                        cubes[this.index].mesh.children.forEach((item) => {
                          if(item.userData["skin"]=="tile"){
                            var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][this.index]))
                            item.material.color= new THREE.Color('hsl(' + String(newcl["h"]+Math.log2(parseInt(item.userData["text"]))*8) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                            item.children.forEach((text) => {
                              // text.material.color= new THREE.Color(0xFFFFFF);
                            });
                          }
                        });
                        // gameoverflag=true;
                        if(gamemod!=2){
                          var fullall=true;
                          for (var i = 0; i < 5; i++) {
                            if(!cubes[i].mesh.userData["game2048"].fullflag){
                              fullall=false;
                            }
                          }
                          if(fullall){
                            fullmax=true;
                            // topcam = false;
                            // document.getElementById("gameover-overlay").classList.remove("fade");
                            // document.getElementById("gameover-overlay").classList.remove("hidden");
                            // document.getElementById("gameover-overlay").classList.add("show");
                            // activeFloor = cubes.length;
                          }
                        }
                      }
                    }
                }
                this.boardChanged = false;
            }
            // Implement game logic for moving tiles and updating board state
            // ...
            move(row, col, newRow, newCol, direction) {
                if (this.board[newRow][newCol] === 0) {
                    // console.log(this.boardpointer[col][row]);
                    this.board[newRow][newCol] = this.board[row][col];
                    this.board[row][col] = 0;
                    ftiles.push(new ftile(row, col, newRow, newCol, this.index, direction, false, this, this.boardpointer[row][col]))
                    // renderer.setAnimationLoop(animation);
                    this.boardChanged = true;
                } else if (this.board[newRow][newCol] === this.board[row][col]) {
                    // console.log(this.boardpointer[col][row]);
                    this.board[newRow][newCol] += this.board[row][col];
                    this.board[row][col] = 0;
                    ftiles.push(new ftile(row, col, newRow, newCol, this.index, direction, true, this, this.boardpointer[row][col]))
                    this.boardChanged = true;
                    if (stage4) {
                        if (this.board[newRow][newCol] == 64) {
                            if (cubes.length - 1 == this.index) {
                                const game2048 = new Game2048(칸, cubes.length);
                                // const box = createBox(0, boxSize / 2 + i * boxSize, 0, boxSize, boxSize/2, boxSize, game2048);
                                // box.mesh.userData.body = box.body;
                                // box.mesh.userData.game2048 = game2048;
                                cubes.push(createBox(0, (cubes.length) * bh + bh / 2, 0, bw, bh, bw, game2048));
                                cubes[cubes.length - 1].mesh.userData.body = cubes[cubes.length - 1].body;
                                cubes[cubes.length - 1].mesh.userData.game2048 = game2048
                                // stackHeight++
                                activeFloor = cubes.length - 1;
                            } else {
                                cubes[this.index + 1].mesh.userData.game2048.spawnTile();
                            }
                        }
                    }

                }
            }

            moveBoard3(direction) {
                let rowStep, colStep, startRow, startCol;
                if (direction === "down" || direction === "right") {
                    rowStep = 1;
                    colStep = 1;
                    startRow = 0;
                    startCol = 0;
                } else {
                    rowStep = -1;
                    colStep = -1;
                    startRow = this.size - 1;
                    startCol = this.size - 1;
                }
                const rowCondition = direction === "down" || direction === "up";
                var temp = [];
                for (let row = startRow; row >= 0 && row < this.size; row += rowStep) {
                    for (let col = startCol; col >= 0 && col < this.size; col += colStep) {
                        if (this.board[row][col] === 0) continue;
                        let newRow = row;
                        let newCol = col;
                        while (true) {
                            const nextRow = newRow + (rowCondition ? rowStep : 0);
                            const nextCol = newCol + (rowCondition ? 0 : colStep);
                            if (nextRow < 0 || nextRow >= this.size || nextCol < 0 || nextCol >= this.size) break;
                            if (this.board[nextRow][nextCol] === 0 || this.board[nextRow][nextCol] === this.board[row][col]) {
                                // if (this.board[nextRow][nextCol] === 0) {
                                newRow = nextRow;
                                newCol = nextCol;
                            } else {
                                break;
                            }
                        }
                        if (newRow !== row || newCol !== col) {
                            var dup = false
                            for (var i = 0; i < temp.length; i++) {
                                if (temp[i][0] == row && temp[i][1] == col && temp[i][2] == newRow && temp[i][3] == newCol) {
                                    dup = true;
                                }
                            }
                            if (dup == false) {
                                temp.push([row, col, newRow, newCol, direction]);
                            }
                        }
                    }
                }
                // console.log(temp)
                var temp2 = this.moveBoard0(direction, temp);
                // this.moveBoard2(direction, temp2).forEach((item) => {
                //   temp2.push(item);
                // });

                // console.log(temp2)
                if (direction === "up") {
                    temp2.sort(function(a, b) {
                        return a[0] - b[0];
                    });
                } else if (direction === "down") {
                    temp2.sort(function(a, b) {
                        return b[0] - a[0];
                    });
                } else if (direction === "left") {
                    temp2.sort(function(a, b) {
                        return a[1] - b[1];
                    });
                } else if (direction === "right") {
                    temp2.sort(function(a, b) {
                        return b[1] - a[1];
                    });
                }
                temp2.forEach((item) => {
                    this.move(item[0], item[1], item[2], item[3], item[4]);
                })
                // moveBoard0(direction, lst).forEach((item)=>{
                //   this.move(item[0], item[1], item[2], item[3], item[4]);
                // })
                if (this.boardChanged) {
                    // temp2.forEach((item)=>{
                    //   this.move(item[0], item[1], item[2], item[3], item[4]);
                    // })
                    // renderer.setAnimationLoop(animation);
                    // this.spawnTile(direction);
                }
            }
            moveBoard0(direction, lst) {
                var tempbd = [];
                for (let row = 0; row < this.size; row++) {
                    var temp = [];
                    for (let col = 0; col < this.size; col++) {
                        temp.push(this.board[row][col]);
                    }
                    // console.log(temp)
                    tempbd.push(temp)
                }
                // console.log(lst);
                // console.log(tempbd);
                lst.forEach((item) => {
                    if (tempbd[item[2]][item[3]] === 0 || tempbd[item[2]][item[3]] === tempbd[item[0]][item[1]]) {
                        tempbd[item[2]][item[3]] += tempbd[item[0]][item[1]];
                        tempbd[item[0]][item[1]] = 0;
                    }
                });
                // console.log(lst);
                let rowStep, colStep, startRow, startCol;
                if (direction === "down" || direction === "right") {
                    rowStep = 1;
                    colStep = 1;
                    startRow = 0;
                    startCol = 0;
                } else {
                    rowStep = -1;
                    colStep = -1;
                    startRow = this.size - 1;
                    startCol = this.size - 1;
                }
                const rowCondition = direction === "down" || direction === "up";
                var temp0 = [];
                for (let row = startRow; row >= 0 && row < this.size; row += rowStep) {
                    for (let col = startCol; col >= 0 && col < this.size; col += colStep) {
                        if (tempbd[row][col] === 0) continue;
                        let newRow = row;
                        let newCol = col;
                        while (true) {
                            const nextRow = newRow + (rowCondition ? rowStep : 0);
                            const nextCol = newCol + (rowCondition ? 0 : colStep);
                            if (nextRow < 0 || nextRow >= this.size || nextCol < 0 || nextCol >= this.size) break;
                            // if (tempbd[nextRow][nextCol] === 0 || tempbd[nextRow][nextCol] === tempbd[row][col]) {
                            if (tempbd[nextRow][nextCol] === 0) {
                                newRow = nextRow;
                                newCol = nextCol;
                            } else {
                                break;
                            }
                        }
                        if (newRow !== row || newCol !== col) {
                            var dup = false
                            for (var i = 0; i < temp0.length; i++) {
                                if (temp0[i][0] == row && temp0[i][1] == col && temp0[i][2] == newRow && temp0[i][3] == newCol) {
                                    dup = true;
                                }
                            }
                            if (dup == false) {
                              // tempbd[newRow][newCol] = tempbd[row][col];
                              // tempbd[row][col] = 0;
                              temp0.push([row, col, newRow, newCol, direction]);
                            }
                        }
                    }
                }

                var removelst = [];
                // console.log("전")
                // console.log(lst)
                for (var j = 0; j < temp0.length; j++) {
                    var dup = true
                    for (var i = 0; i < lst.length; i++) {
                        if (lst[i][0] == temp0[j][0] && lst[i][1] == temp0[j][1] && lst[i][2] == temp0[j][2] && lst[i][3] == temp0[j][3]) {
                            removelst.push(i)
                            dup = false
                        } else if (lst[i][2] == temp0[j][0] && lst[i][3] == temp0[j][1]) {
                            lst[i][2] = temp0[j][2];
                            lst[i][3] = temp0[j][3];
                            dup = false
                        } else {}
                    }
                    if (dup) lst.push(temp0[j]);
                }

                removelst.sort(function(a, b) {
                    return b - a;
                });
                removelst.forEach((item) => {
                    lst.splice(item, 1);
                })

                for (let row = 0; row < this.size; row++) {
                    var temp = [];
                    for (let col = 0; col < this.size; col++) {
                        temp.push(tempbd[row][col]);

                    }
                    // console.log(temp)
                    // tempbd.push(temp)
                }



                // switch (direction) {
                //     case 'up':
                //           var i=2;
                //           for (var j = 0; j < this.size; j++) {
                //             var now=tempbd[i][j]
                //             var prev=tempbd[i+1][j]
                //             if(now==0){
                //               if(prev!=0)lst.push([i+1, j, i, j, direction]);
                //             }
                //           }
                //
                //         break;
                //     case 'down':
                //           var i=1;
                //           for (var j = 0; j < this.size; j++) {
                //             var now=tempbd[i][j]
                //             var prev=tempbd[i-1][j]
                //             if(now==0){
                //               if(prev!=0)lst.push([i-1, j, i, j, direction]);
                //             }
                //           }
                //
                //         break;
                //     case 'left':
                //             var j=2;
                //             for (var i = 0; i < this.size; i++) {
                //               var now=tempbd[i][j]
                //               var prev=tempbd[i][j+1]
                //               if(now==0){
                //                 if(prev!=0)lst.push([i, j+1, i, j, direction]);
                //               }
                //             }
                //
                //         break;
                //     case 'right':
                //             var j=1;
                //             for (var i = 0; i < this.size; i++) {
                //               var now=tempbd[i][j]
                //               var prev=tempbd[i][j-1]
                //               if(now==0){
                //                 if(prev!=0)lst.push([i, j-1, i, j, direction]);
                //               }
                //             }
                //
                //         break;
                //     default:
                //         return;
                // }

                return lst;
            }


            moveBoard2(direction, lst) {
                var tempbd = [];
                for (let row = 0; row < this.size; row++) {
                    var temp = [];
                    for (let col = 0; col < this.size; col++) {
                        temp.push(this.board[row][col]);

                    }
                    // console.log(temp)
                    tempbd.push(temp)
                }
                // console.log(lst);
                // console.log(tempbd);
                // lst.forEach((item) => {
                //     if (tempbd[item[2]][item[3]] === 0 || tempbd[item[2]][item[3]] === tempbd[item[0]][item[1]]) {
                //         tempbd[item[2]][item[3]] += tempbd[item[0]][item[1]];
                //         tempbd[item[0]][item[1]] = 0;
                //     }
                // });
                var temp0 = [];

                switch (direction) {
                    case 'up':
                        for (var i = 0; i < this.size-1; i++) {
                          for (var j = 0; j < this.size; j++) {
                            var now=tempbd[i][j]
                            var prev=tempbd[i+1][j]
                            if(now==0){
                              if(prev!=0)temp0.push([i+1, j, i, j, direction]);
                            }
                          }
                        }
                        break;
                    case 'down':
                        for (var i = 3; i >1 ; i--) {
                          for (var j = 0; j < this.size; j++) {
                            var now=tempbd[i][j]
                            var prev=tempbd[i-1][j]
                            if(now==0){
                              if(prev!=0)temp0.push([i-1, j, i, j, direction]);
                            }
                          }
                        }
                        break;
                    case 'left':
                          for (var j = 0; j < this.size-1; j++) {
                            for (var i = 0; i < this.size; i++) {
                              var now=tempbd[i][j]
                              var prev=tempbd[i][j+1]
                              if(now==0){
                                if(prev!=0)temp0.push([i, j+1, i, j, direction]);
                              }
                            }
                          }
                        break;
                    case 'right':
                          for (var j = 3; j >1; j--) {
                            for (var i = 0; i < this.size; i++) {
                              var now=tempbd[i][j]
                              var prev=tempbd[i][j-1]
                              if(now==0){
                                if(prev!=0)temp0.push([i, j-1, i, j, direction]);
                              }
                            }
                          }
                        break;
                    default:
                        return;
                }
                // console.log(temp0);
                return temp0;

                // let rowStep, colStep, startRow, startCol;
                // if (direction === "down" || direction === "right") {
                //     rowStep = 1;
                //     colStep = 1;
                //     startRow = 0;
                //     startCol = 0;
                // } else {
                //     rowStep = -1;
                //     colStep = -1;
                //     startRow = this.size - 1;
                //     startCol = this.size - 1;
                // }
                // const rowCondition = direction === "down" || direction === "up";
                //
                // for (let row = startRow; row >= 0 && row < this.size; row += rowStep) {
                //     for (let col = startCol; col >= 0 && col < this.size; col += colStep) {
                //         if (tempbd[row][col] === 0) continue;
                //         let newRow = row;
                //         let newCol = col;
                //         while (true) {
                //             const nextRow = newRow + (rowCondition ? rowStep : 0);
                //             const nextCol = newCol + (rowCondition ? 0 : colStep);
                //             if (nextRow < 0 || nextRow >= this.size || nextCol < 0 || nextCol >= this.size) break;
                //             // if (tempbd[nextRow][nextCol] === 0 || tempbd[nextRow][nextCol] === tempbd[row][col]) {
                //             if (tempbd[nextRow][nextCol] === 0) {
                //                 newRow = nextRow;
                //                 newCol = nextCol;
                //             } else {
                //                 break;
                //             }
                //         }
                //         if (newRow !== row || newCol !== col) {
                //             var dup = false
                //             for (var i = 0; i < temp0.length; i++) {
                //                 if (temp0[i][0] == row && temp0[i][1] == col && temp0[i][2] == newRow && temp0[i][3] == newCol) {
                //                     dup = true;
                //                 }
                //             }
                //             if (dup == false) {
                //                 temp0.push([row, col, newRow, newCol, direction]);
                //             }
                //         }
                //     }
                // }
                //
                // var removelst = [];
                // // console.log("전")
                // // console.log(lst)
                // for (var j = 0; j < temp0.length; j++) {
                //     var dup = true
                //     for (var i = 0; i < lst.length; i++) {
                //         if (lst[i][0] == temp0[j][0] && lst[i][1] == temp0[j][1] && lst[i][2] == temp0[j][2] && lst[i][3] == temp0[j][3]) {
                //             removelst.push(i)
                //             dup = false
                //         } else if (lst[i][2] == temp0[j][0] && lst[i][3] == temp0[j][1]) {
                //             lst[i][2] = temp0[j][2];
                //             lst[i][3] = temp0[j][3];
                //             dup = false
                //         } else {}
                //     }
                //     if (dup) lst.push(temp0[j]);
                // }
                //
                // removelst.sort(function(a, b) {
                //     return b - a;
                // });
                // removelst.forEach((item) => {
                //     lst.splice(item, 1);
                // })
                //
                // return lst;
            }

            moveBoard(direction) {
            	var tempbd = [];
                for (let row = 0; row < this.size; row++) {
                    var temp = [];
                    for (let col = 0; col < this.size; col++) {
                        temp.push(this.board[row][col]);
                    }
                    // console.log(temp)
                    tempbd.push(temp)
                }
                let rowStep, colStep, startRow, startCol;
                if (direction === "down" || direction === "right") {
                    rowStep = -1;
                    colStep = -1;
                    startRow = this.size - 1;
                    startCol = this.size - 1;

                } else {
                    rowStep = 1;
                    colStep = 1;
                    startRow = 0;
                    startCol = 0;
                }
                const rowCondition = direction === "down" || direction === "up";
                var temp = [];
                for (let row = startRow; row >= 0 && row < this.size; row += rowStep) {

                    for (let col = startCol; col >= 0 && col < this.size; col += colStep) {
                        if (tempbd[row][col] === 0){
                          var prevRow = row - (rowCondition ? rowStep : 0);
                          var prevCol = col - (rowCondition ? 0 : colStep);
                        	let newRow = row;
            	            let newCol = col;
                          let nope=false;
                        	while (true) {
            	                var nextRow = newRow + (rowCondition ? rowStep : 0);
            	                var nextCol = newCol + (rowCondition ? 0 : colStep);
            	                if (nextRow < 0 || nextRow >= this.size || nextCol < 0 || nextCol >= this.size) {
                                nope=true;
                                break;
                              }
            	                if (tempbd[nextRow][nextCol] ===0) {
            	                    // if (tempbd[nextRow][nextCol] === 0) {
            	                    newRow = nextRow;
            	                    newCol = nextCol;

            	                } else {
                                  if(prevRow >= 0 && prevRow < this.size && prevCol >= 0 && prevCol < this.size){
                                    if(tempbd[prevRow][prevCol]==tempbd[nextRow][nextCol]){
                                      tempbd[prevRow][prevCol]+=tempbd[nextRow][nextCol]+1.5
                	                    tempbd[nextRow][nextCol]=0;
                                      newRow = nextRow;
                	                    newCol = nextCol;
                                      row=prevRow;
                                      col=prevCol;

                	                    break
                                    }
                                  }
            	                    tempbd[row][col]=tempbd[nextRow][nextCol]
            	                    tempbd[nextRow][nextCol]=0;
                                  newRow = nextRow;
            	                    newCol = nextCol;
            	                    break
            	                }
            	            }
                          if(nope) continue;

                              var dup = false
                              for (var i = 0; i < temp.length; i++) {
                                  if (temp[i][2] == row && temp[i][3] == col && temp[i][0] == newRow && temp[i][1] == newCol) {
                                      dup = true;
                                  }
                              }
                              if (dup == false) {
                                  temp.push([newRow, newCol, row, col, direction]);
                              }

                        }else {
                        	let newRow = row;
            	            let newCol = col;
                          let nope=false;
            	            while (true) {
            	                var nextRow = newRow + (rowCondition ? rowStep : 0);
            	                var nextCol = newCol + (rowCondition ? 0 : colStep);
            	                if (nextRow < 0 || nextRow >= this.size || nextCol < 0 || nextCol >= this.size){
                                nope=true;
                                break;
                              }
            	                if (tempbd[nextRow][nextCol] == tempbd[row][col]) {

            	                    // if (tempbd[nextRow][nextCol] === 0) {
            	                    tempbd[row][col]+=tempbd[nextRow][nextCol]+1.5
            	                    tempbd[nextRow][nextCol]=0;
                                  newRow = nextRow;
            	                    newCol = nextCol;
            	                    break
            	                } else if(tempbd[nextRow][nextCol] ==0){
            	                    newRow = nextRow;
            	                    newCol = nextCol;
            	                } else{
                                nope=true;
            	                	break;
            	                }
            	            }
                          if(nope) continue;
                              var dup = false
                              for (var i = 0; i < temp.length; i++) {
                                  if (temp[i][2] == row && temp[i][3] == col && temp[i][0] == newRow && temp[i][1] == newCol) {
                                      dup = true;
                                  }
                              }
                              if (dup == false) {
                                  temp.push([newRow, newCol, row, col, direction]);
                              }

                        }


                    }
                }
                // console.log(temp)
                var temp2=temp
                // var temp2 = this.moveBoard0(direction, temp);
                // this.moveBoard2(direction, temp2).forEach((item) => {
                //   temp2.push(item);
                // });

                // console.log(temp2)
                if (direction === "up") {
                    temp2.sort(function(a, b) {
                        return a[0] - b[0];
                    });
                } else if (direction === "down") {
                    temp2.sort(function(a, b) {
                        return b[0] - a[0];
                    });
                } else if (direction === "left") {
                    temp2.sort(function(a, b) {
                        return a[1] - b[1];
                    });
                } else if (direction === "right") {
                    temp2.sort(function(a, b) {
                        return b[1] - a[1];
                    });
                }

                if(temp2.length==0){
                  if(soundic[esound[5]].isPlaying){
                    soundic[esound[5]].stop();
                    soundic[esound[5]].play();
                  }else{
                    soundic[esound[5]].play();
                  }
                  if(ringflag){
                    if (direction === "up") {
                        ring[0].children[0].userData["time"]=elapsedTime;
                    } else if (direction === "down") {
                        ring[0].children[3].userData["time"]=elapsedTime;
                    } else if (direction === "left") {
                        ring[0].children[2].userData["time"]=elapsedTime;
                    } else if (direction === "right") {
                        ring[0].children[1].userData["time"]=elapsedTime;
                    }
                  }


                }
                temp2.forEach((item) => {
                    this.move(item[0], item[1], item[2], item[3], item[4]);
                })
                // moveBoard0(direction, lst).forEach((item)=>{
                //   this.move(item[0], item[1], item[2], item[3], item[4]);
                // })
                if (this.boardChanged) {
                    // temp2.forEach((item)=>{
                    //   this.move(item[0], item[1], item[2], item[3], item[4]);
                    // })
                    // renderer.setAnimationLoop(animation);
                    // this.spawnTile(direction);
                }
            }
        }

        let aniflag = false;
        let atchanged = 0;

        function createimg() {
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            // const padding = 10;
            canvas.width = 314;
            canvas.height = 1664;
            // ctx.fillStyle = backgroundColor;
            // ctx.fillRect(0, 0, canvas.width, canvas.height);
            // ctx.font = `${fontSize}px Arial`;
            // ctx.fillStyle = textColor;
            // ctx.fillText(text, padding, padding + textHeight * 0.8);
            ctx.globalAlpha = 0.6;
            ctx.drawImage(unitimg["scroll"], 0, 0, 314, 1664)
            var img = new THREE.CanvasTexture(canvas);
            return img;
        }

        function createtxt(text, i, mode) {
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            // const padding = 10;
            ctx.globalAlpha = 1;
            canvas.width = 16.5 * 4;
            canvas.height = 5.6 * 4;
            var tl = text.length;
            var textw = tl * (canvas.width / 10);
            // ctx.fillStyle = 0xFFFFFF;
            // ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.font = `${12}px Arial`;
            // ctx.fillStyle = 0x009F4D;
            ctx.fillStyle = 0xFFFFFF;
            // // ctx.fillText(text, padding, padding + textHeight * 0.8);
            if (mode == 1) {
                ctx.fillText(" 재생 중: ", 0 - (parseInt(time * 20) % 70) * (canvas.width * 2 / 70), canvas.height * 0.76, canvas.width * 0.5, canvas.height);
                ctx.fillText(text, 0.5 * canvas.width - (parseInt(time * 20) % 70) * (canvas.width * 2 / 70), canvas.height * 0.76, canvas.width * 1.5, canvas.height);
                ctx.fillText(" 재생 중: ", 2 * canvas.width - (parseInt(time * 20) % 70) * (canvas.width * 2 / 70), canvas.height * 0.76, canvas.width / 2, canvas.height);
                ctx.fillText(text, 2.5 * canvas.width - (parseInt(time * 20) % 70) * (canvas.width * 2 / 70), canvas.height * 0.76, canvas.width * 1.5, canvas.height);
                // ctx.fillText(text, canvas.width-(parseInt(time*20)%50)*(canvas.width/50),canvas.height*0.8, canvas.width, canvas.height);
            } else {
                ctx.fillText(text, 0 - (i) * (textw / 100), canvas.height * 0.73, textw, canvas.height);
                ctx.fillText(text, textw - (i) * (textw / 100), canvas.height * 0.73, textw, canvas.height);
            }
            // ctx.drawImage(unitimg["scroll"], 0,0,314,1664)
            var img3 = new THREE.CanvasTexture(canvas);
            var geometry5 = new THREE.PlaneGeometry(bw * 0.9 * 0.7, bh * 0.8 * 0.7, 1, 1);
            var material5 = new THREE.MeshLambertMaterial({
                map: img3,
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 1
            });
            // var plane = new THREE.Mesh(geometry5, material5);
            // plane.position.set(bw, bw, bw)
            // plane.rotation.y=Math.PI/2
            return material5;
        }

        function createTextTexture(text, fontSize = 16, textColor = 'white', backgroundColor = 'rgba(0, 0, 0, 0.5)') {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const padding = 10;
            ctx.font = `${fontSize}px Arial`;
            const textWidth = ctx.measureText(text).width;
            const textHeight = fontSize;
            canvas.width = textWidth + padding * 2;
            canvas.height = textHeight + padding * 2;
            ctx.fillStyle = backgroundColor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.font = `${fontSize}px Arial`;
            ctx.fillStyle = textColor;
            ctx.fillText(text, padding, padding + textHeight * 0.8);
            const texture = new THREE.CanvasTexture(canvas);
            return texture;
        }

        function type() {
            for (var i = 0; i < 칸; i++) {
                var temp = cubes[cubes.length - 1].mesh.userData.game2048.board[i];
                // console.log(String(temp[0]) + " " + String(temp[1]) + " " + String(temp[2]) + " " + String(temp[3]));
            }
        }
        var gameoverflag = false;
        //스크롤
        const uiScene = new THREE.Scene();
        let uiScene2 = new THREE.Scene();
        // uiScene.add(sprite);
        // Add this line to your existing main scene rendering code
        const uiCamera = new THREE.OrthographicCamera(-window.innerWidth / 200, window.innerWidth / 200, window.innerHeight / 200, -window.innerHeight / 200, 0.1, 1000);
        uiCamera.position.set(0, 0, 1);
        const uiCamera2 = new THREE.OrthographicCamera(-bw / 2, bw / 2, bw / 2, -bw / 2, 0.1, 1000);
        uiCamera2.position.set(0, 0, 1);
        uiCamera2.lookAt(0, 0, 0);
        // uiScene0.background = new THREE.Color(0x2e508d);
        const uicamera0 = new THREE.OrthographicCamera(-5, 5, 5, -5, 0.1, 100);
        uicamera0.position.set(0, -2, 10);
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        var touch0 = 1 - ((window.innerWidth * 0.53) / (window.innerHeight / 2))

        function handleTouchStart(event) {
            if(restartflag) return;
            if(!goahead) return;
            if(!originflag){
              msetting(function(object) {
                // document.getElementById("intro").classList.add("fade");
                document.getElementById("intro").style.top="-120%";
                document.getElementById("intro").style.opacity="0";
                setTimeout(function() {
                    document.getElementById("tut-info").children[0].style.color=hexToHtmlColor(colorlst[colornum][3]);
                    document.getElementById("tut-info").style.opacity="0.8";
                }, 1500);


                originflag=true;
                camera.rotation.x=restartend*1.2;
                restartflag = false;

                return;
              })
              return;

            }else if(!startflag){
              var go=true;
              for (let i = 0; i < 6; i++) {
                  let temp = [0, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, "up", "down", "left", "right", "upper", "lower"]
                  for (let j = 0; j < temp.length; j++) {
                    if(soundic[sdic[i][temp[j]]]==null){
                      go=false;
                    }
                  }
              }
              if(!go) return;
              document.getElementById("tut-info").style.display="none"
              document.getElementById("intro").style.display="none"

              if(gamemod==0){
                world.gravity.set(0, -7, 0);
              }else if(gamemod==1){
                world.gravity.set(0, -8, 0);
              }else if(gamemod==2){
                world.gravity.set(0, -6, 0);
              }
            }
            if (gameoverflag) return;
            if (document.getElementById("setting-overlay").classList.contains("show") || !document.getElementById("gameover-overlay").classList.contains("hidden") || document.getElementById("options-overlay").classList.contains("show") || document.getElementById("optionlst").classList.contains("show")) {
                return;
            } else {


            }
            if (window.innerWidth >= window.innerHeight) {
                mouse.x = (event.touches[0].clientX / window.innerHeight);
                mouse.y = (event.touches[0].clientY / window.innerHeight);
                lastX = (event.touches[0].clientX / window.innerHeight) * 2 - 1;
                lastY = -(event.touches[0].clientY / window.innerHeight) * 2 + 1;
            } else {
                lastX = (event.touches[0].clientX / window.innerWidth) * 2 - 1;
                lastY = -(event.touches[0].clientY / window.innerHeight) * 2 + 1;
                mouse.x = (event.touches[0].clientX / window.innerWidth);
                mouse.y = (event.touches[0].clientY / window.innerWidth);
            }


            if (lastY >= 0.8) {
                if (lastX < -0.8) {
                    // if (!startflag) {
                    //     // startflag=true
                    // }
                    // if (lookcenter) {
                    //   resol(rescounter);
                    //   rescounter++;
                    //   if (rescounter > 5) {
                    //       rescounter = 0;
                    //   }
                    // }
                    // } else if (lookright) {
                    //     if (!rotationflag) {
                    //         rotationflag = true
                    //         rotationend = Math.PI / 4
                    //     }
                    // }
                } else if (lastX > 0.8) {
                    if (!startflag) {
                        startflag = true
                    }
                    if (lookcenter) {
                        skinnum++;
                        if (skinnum >= skinset.length) {
                            skinnum = 0;
                        }
                        bf=999;
                        // if(!rotationflag){
                        // 	lookcenter=false
                        // 	rotationflag=true
                        // 	rotationend=0
                        // }
                    } else if (lookleft) {
                        if (!rotationflag) {
                            rotationflag = true
                            rotationend = Math.PI / 4
                        }
                    }
                }
            } else if (lastY > 0 && lastY < 0.8) {
                for (var j = 0; j < 5; j++) {
                    // var tempy;
                    if(gamemod==2){
                      if(cubes.length==5){
                        if(j<4) continue;
                      }else{

                        return;
                      }

                    }
                    if (lastY > -0.35 + touch0 + 0.1 * j && lastY < -0.25 + touch0 + 0.1 * j) {

                        if (!startflag) {
                            startflag = true
                            elapsedTime=0;
                        }
                        activeFloor = j;
                        // if (soundic[sdic[activeFloor]["upper"]].isPlaying) {
                        //     soundic[sdic[activeFloor]["upper"]].stop();
                        // }
                        // soundic[sdic[activeFloor]["upper"]].play();
                        var thisnum = activeFloor
                        var playable = true
                        for (let i = 0; i < 6; i++) {
                            if (i == thisnum || sdic[i][0] == sdic[thisnum][0]) continue
                            if (soundic[sdic[i][0]].isPlaying) {
                                soundic[sdic[i][0]].stop();
                            }
                        }
                        if (!soundic[sdic[thisnum][0]].isPlaying) {

                            songfade=elapsedTime;
                            // console.log(songfade);
                            soundic[sdic[thisnum][0]].play();
                            songTitleElement.innerText = sdic[thisnum]["title"];
                            artistNameElement.innerText = sdic[thisnum]["producer"];
                            var songInfo = document.getElementById('song-info');
                            songInfo.classList.add("moveleft");
                            songInfo.style.left="0px"

                            document.getElementById('songback1').style.backgroundColor=hexToHtmlColor(colorlst[colornum][1])
                            document.getElementById('songback2').style.backgroundColor=hexToHtmlColor(colorlst[colornum][2])
                            document.getElementById('songback3').style.backgroundColor=hexToHtmlColor(colorlst[colornum][3])




                            if(thisnum==5){
                                document.getElementById('song-title').style.color=hexToHtmlColor(colorlst[colornum][2])
                                document.getElementById('artist-name').style.color=hexToHtmlColor(colorlst[colornum][1])
                                document.getElementById('songback4').style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][0])
                                var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                                // document.getElementById('songback').style.backgroundColor=hslToHex(newcl.h, newcl.s*0.8, newcl.l*0.35)

                                document.getElementById('songback').style.backgroundColor="rgba(50,50,50,0.45)"

                                // document.getElementById('songback').style.opacity="0.35"

                            }else{
                                document.getElementById('songback4').style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][thisnum])
                                document.getElementById('song-title').style.color=hexToHtmlColor(colorlst0[colornum0][thisnum])

                                var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][thisnum]))
                                document.getElementById('artist-name').style.color=hslToHex(newcl.h, newcl.s*0.60, newcl.l*1)
                                var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][thisnum]))
                                // document.getElementById('songback').style.backgroundColor=hslToHex(newcl.h+Math.PI/2, newcl.s, newcl.l*0.35)
                                document.getElementById('songback').style.backgroundColor="rgba(50,50,50,0.45)"
                                // document.getElementById('songback').style.opacity="0.35"

                            }





                            document.getElementById('playing').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // document.getElementById('song-dash1').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // document.getElementById('song-dash2').style.color=hexToHtmlColor(colorlst[colornum][3])

                            // songInfo.classList.add("hidden");
                            if (songInfo.classList.contains("hidden")) songInfo.classList.remove("hidden");
                            // // songInfo.classList.remove("show1");
                            //
                            //
                            //
                            // if (songInfo.classList.contains("fade")) songInfo.classList.remove("fade");
                            songInfo.classList.add("show1");
                            // songInfo.classList.add("show");

                        }
                    }
                }
                dragflag = true;
                return;
            }
            ontouch = true
        }

        function handleTouchMove(event) {
            if(restartflag) return;
            if (gameoverflag) return;
            if (document.getElementById("setting-overlay").classList.contains("show") || !document.getElementById("gameover-overlay").classList.contains("hidden") || document.getElementById("options-overlay").classList.contains("show") || document.getElementById("optionlst").classList.contains("show")) {
                return;
            } else {
                // event.preventDefault();
                // event.stopPropagation();
            }
            // if(inflag) return;
            // event.preventDefault();
            touchx = (event.touches[0].clientX / window.innerWidth) * 2 - 1;
            touchy = -(event.touches[0].clientY / window.innerHeight) * 2 + 1;
            // console.log("x: "+String(touchx)+"   y: "+String(touchy))
            // ctx.beginPath();
            // ctx.moveTo(touchx, touchy);
            // ctx.lineTo(grabx, graby);
            // ctx.stroke();
            if (ontouch) {
                if (bufflag) {
                    buffloor = activeFloor
                    bufflag = false
                }
                if ((lastX < -0.8 || lastX > 0.8) && lastY > -0.3 && lastY < 0) {
                    if (!startflag) {
                        startflag = true
                    }
                    activeFloor = buffloor + parseInt((touchy - lastY) * 12);
                    if (activeFloor > cubes.length) {
                        activeFloor = cubes.length;
                    }
                    if (activeFloor < 0) {
                        activeFloor = 0;
                    }
                } else if (!aniflag) {
                    if (touchx - lastX > 0.28) {
                        if (gameoverflag) {
                            ontouch = false
                            if (!rotationflag) {
                                rotationflag = true
                                restartflag = true
                                pluscoin = parseInt(점수 / 10)
                                // coin += pluscoin;
                                for (var i = 0; i < cubes.length; i++) {
                                    restartloc.push(cubes[i].mesh.position);
                                    restartrot.push(cubes[i].mesh.rotation);
                                }
                                ncolornum = parseInt(Math.random() * colorlst.length);
                                ncolornum0 = parseInt(Math.random() * colorlst0.length);
                                rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                                rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                                renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                                renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                                rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                                renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                                rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                                renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                                bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                                nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                                bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                                nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                                bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                                nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                                bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                                nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                                bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                                nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                                rotationend = Math.PI / 4
                            }
                            return
                        } else {
                            const game2048 = cubes[activeFloor].mesh.userData.game2048;
                            game2048.moveBoard("right");
                        }
                        ontouch = false;
                    } else if (-touchx + lastX > 0.28) {
                        if (gameoverflag) {
                            ontouch = false
                            if (!rotationflag) {
                                rotationflag = true
                                restartflag = true
                                pluscoin = parseInt(점수 / 10)
                                // coin += pluscoin;
                                for (var i = 0; i < cubes.length; i++) {
                                    restartloc.push(cubes[i].mesh.position);
                                    restartrot.push(cubes[i].mesh.rotation);
                                }
                                ncolornum = parseInt(Math.random() * colorlst.length);
                                ncolornum0 = parseInt(Math.random() * colorlst0.length);
                                rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                                rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                                renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                                renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                                rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                                renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                                rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                                renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                                bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                                nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                                bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                                nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                                bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                                nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                                bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                                nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                                bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                                nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                                rotationend = Math.PI / 4
                            }
                            return
                        } else {
                            const game2048 = cubes[activeFloor].mesh.userData.game2048;
                            game2048.moveBoard("left");
                        }
                        ontouch = false;
                    } else if (touchy - lastY > 0.2) {
                        if (gameoverflag) {
                            ontouch = false
                            if (!rotationflag) {
                                rotationflag = true
                                restartflag = true
                                pluscoin = parseInt(점수 / 10)
                                // coin += pluscoin;
                                for (var i = 0; i < cubes.length; i++) {
                                    restartloc.push(cubes[i].mesh.position);
                                    restartrot.push(cubes[i].mesh.rotation);
                                }
                                ncolornum = parseInt(Math.random() * colorlst.length);
                                ncolornum0 = parseInt(Math.random() * colorlst0.length);
                                rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                                rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                                renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                                renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                                rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                                renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                                rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                                renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                                bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                                nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                                bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                                nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                                bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                                nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                                bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                                nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                                bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                                nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                                rotationend = Math.PI / 4
                            }
                            return
                        } else {
                            const game2048 = cubes[activeFloor].mesh.userData.game2048;
                            game2048.moveBoard("up");
                        }
                        ontouch = false;
                    } else if (-touchy + lastY > 0.2) {
                        if (gameoverflag) {
                            ontouch = false
                            if (!rotationflag) {
                                rotationflag = true
                                restartflag = true
                                pluscoin = parseInt(점수 / 10)
                                // coin += pluscoin;
                                for (var i = 0; i < cubes.length; i++) {
                                    restartloc.push(cubes[i].mesh.position);
                                    restartrot.push(cubes[i].mesh.rotation);
                                }
                                ncolornum = parseInt(Math.random() * colorlst.length);
                                ncolornum0 = parseInt(Math.random() * colorlst0.length);
                                rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                                rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                                renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                                renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                                rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                                renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                                rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                                renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                                bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                                nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                                bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                                nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                                bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                                nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                                bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                                nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                                bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                                nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                                rotationend = Math.PI / 4
                            }
                            return
                        } else {
                            const game2048 = cubes[activeFloor].mesh.userData.game2048;
                            game2048.moveBoard("down");
                        }
                        ontouch = false;
                    }
                }
                // console.log(game2048.)
            } else if (dragflag&&gamemod!=2) {

                if (bufflag) {
                    buffloor = activeFloor
                    bufflag = false
                }
                activeFloor = buffloor + parseInt((touchy - lastY) * 10);
                if (activeFloor > cubes.length) {
                    activeFloor = cubes.length;
                }
                if (activeFloor < 0) {
                    activeFloor = 0;
                }
                if (buffloor != activeFloor) {
                    // if (soundic[sdic[activeFloor]["upper"]].isPlaying) {
                    //     soundic[sdic[activeFloor]["upper"]].stop();
                    // }
                    //     soundic[sdic[activeFloor]["upper"]].play();
                    if (true) {
                        var thisnum = activeFloor
                        var playable = true
                        for (let i = 0; i < 6; i++) {
                            if (i == thisnum) continue
                            if (soundic[sdic[i][0]].isPlaying) {
                                soundic[sdic[i][0]].stop();
                            }
                        }
                        if (!soundic[sdic[thisnum][0]].isPlaying) {
                            soundic[sdic[thisnum][0]].play();
                            songTitleElement.innerText = sdic[thisnum]["title"];
                            artistNameElement.innerText = sdic[thisnum]["producer"];
                            var songInfo = document.getElementById('song-info');
                            if(thisnum==5){
                                document.getElementById('song-title').style.color=hexToHtmlColor(colorlst[colornum][2])
                                document.getElementById('artist-name').style.color=hexToHtmlColor(colorlst[colornum][1])

                            }else{
                                document.getElementById('song-title').style.color=hexToHtmlColor(colorlst0[colornum0][thisnum])
                                document.getElementById('artist-name').style.color=hexToHtmlColor(colorlst0[colornum0][thisnum])
                            }


                            document.getElementById('playing').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // document.getElementById('song-dash1').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // document.getElementById('song-dash2').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // songInfo.classList.add("hidden");
                            if (songInfo.classList.contains("hidden")) songInfo.classList.remove("hidden");
                            if (songInfo.classList.contains("fade")) songInfo.classList.remove("fade");
                            if (songInfo.classList.contains("during")) {
                                songInfo.classList.remove("during");
                                songInfo.classList.add("during");
                            } else {
                                songInfo.classList.add("during");
                            }
                            // songInfo.classList.add("show");
                            setTimeout(function() {
                                if (!songInfo.classList.contains("during")) return;
                                // songInfo.classList.remove("show");
                                songInfo.classList.add("fade");
                            }, 2000);
                        }
                    }
                }
            }
            // lastX=pointx
            // lastY=pointy
        }

        function handleTouchEnd(event) {
            if(restartflag) return;
            if (gameoverflag) return;
            if (document.getElementById("setting-overlay").classList.contains("show") || !document.getElementById("gameover-overlay").classList.contains("hidden") || document.getElementById("options-overlay").classList.contains("show") || document.getElementById("optionlst").classList.contains("show")) {
                return;
            } else {
                // event.preventDefault();
                // event.stopPropagation();
            }
            // if(inflag) return;
            // event.preventDefault();
            ontouch = false;
            bufflag = true
            dragflag = false;
            if (lookleft) uilst1[0].material = getui();
            // if(grabflag){
            //   grabx=pointx
            //   graby=pointy
            //   pointx=grabx;
            //   pointy=graby;
            //   ontouch=false;
            // }else{
            //   if(getdist(touchx, touchy, grabx, graby)<5){
            //     touchendx=lastX;
            //     touchendy=lastY;
            //     pointx=lastX;
            //     pointy=lastY;
            //     ontouch=false;
            //   }else{
            //     touchendx=lastX;
            //     touchendy=lastY;
            //     pointx=lastX;
            //     pointy=lastY;
            //     ontouch=false;
            //   }
            // }
        }
        // function onClick(event) {
        //   event.preventDefault();
        //   if(uiflag){
        //     mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
        //     mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        //     console.log(String(parseInt(mouse.x))+" "+String(parseInt(mouse.y)))
        //     raycaster.setFromCamera(mouse, uicamera0);
        //     const intersects = raycaster.intersectObjects(uiScene0.children);
        //     if (intersects.length > 0) {
        //       const firstIntersect = intersects[0];
        //       const clickedObjectName = firstIntersect.object.name;
        //       if (clickedObjectName === 'Game1') {
        //         console.log('Start Game button clicked');
        //         setting(stack);
        //         uiflag=false;
        //         stage1=true;
        //       } else if (clickedObjectName === 'Game2') {
        //         console.log('Settings button clicked');
        //         setting1(1);
        //         uiflag=false;
        //         stage1=true;
        //         stage2=true;
        //       }else if (clickedObjectName === 'Game3') {
        //         console.log('Settings button clicked');
        //         uiflag=false;
        //         stage1=true;
        //         stage3=true;
        //         forceAmount=20;
        //         bw=3
        //         bh=0.5
        //         tw=bw/칸
        //         th=bh/3
        //         setting(stack);
        //       }else if (clickedObjectName === 'Game4') {
        //         console.log('Settings button clicked');
        //         setting(1);
        //         uiflag=false;
        //         stage1=true;
        //         stage4=true;
        //       }else if (clickedObjectName === 'Game5') {
        //         console.log('game5');
        //         setting(5);
        //         uiflag=false;
        //         stage5=true;
        //         stage1=true;
        //         stackHeight=1;
        //       }
        //     }
        //   }else{
        //     mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
        //     mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        //     // console.log(String(parseInt(mouse.x))+" "+String(parseInt(mouse.y)))
        //     raycaster.setFromCamera(mouse, camera);
        //     const intersects = raycaster.intersectObjects(scene.children);
        //     if (intersects.length > 0) {
        //       const firstIntersect = intersects[0];
        //       const clickedObjectName = firstIntersect.object.name;
        //       // console.log(clickedObjectName);
        //       console.log(firstIntersect);
        //       let force2 = new CANNON.Vec3();
        //       force2.set(10000*(firstIntersect.point.x-camera.position.x), 10000*(firstIntersect.point.y-camera.position.y), 10000*(firstIntersect.point.z-camera.position.z));
        //       firstIntersect.object.userData["body"].applyForce(force2, firstIntersect.object.userData["body"].position);
        //     }
        //   }
        // }
        // window.addEventListener('click', onClick, false);
        window.addEventListener("touchstart", handleTouchStart, {
            passive: true
        });
        window.addEventListener("touchmove", handleTouchMove, {
            passive: true
        });
        window.addEventListener("touchend", handleTouchEnd, {
            passive: true
        });
        let boxSize = 1;
        let boxh = boxSize / 2;
        // Set up the scene, camera, and renderer
        let scene = new THREE.Scene();
        // scene.fog = new THREE.FogExp2( 0x000000, 0.001 );
        // scene.background = new THREE.Color(0x2e508d);
        if (lighton) {
            var ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
            scene.add(ambientLight);
            // const dL=new THREE.DirectionalLight(0xffffff,0.7);
            // dL.position.set(13,30,18);
            // scene.add(dL);
            var dl2 = new THREE.DirectionalLight(0xFFFFFF, 0.6);
            dl2.position.set(10, 50, 40);
            // dl2.position.set(-40+Math.random()*80,50,-10+Math.random()*50);
            // dl2.position.set(13,30,-18);
            dl2.target.position.set(0, 0, 0);
            if (shadowon) {
                dl2.shadow.camera.left = -bw * 1.3;
                dl2.shadow.camera.right = bw * 1.3 * 4;
                dl2.shadow.camera.top = bw * 1.3;
                dl2.shadow.camera.bottom = -bw * 1.3 * 4;
                dl2.shadow.camera.near = 0.1;
                dl2.shadow.camera.far = 1000;
                dl2.castShadow = true;
                dl2.shadow.mapSize = new THREE.Vector2(8000, 8000);
            }
            scene.add(dl2)
        }
        if (orthoflag) { //메인카메라
            var camera = new THREE.OrthographicCamera(-bw * 1.3, bw * 1.3 * 4, bw * 1.3, -bw * 1.3 * 4, 0.1, 1000);
            camera.position.set(bw * 2, 0, bw * 2);
            camera.lookAt(0, 0, 0);
            camera.rotation.order = 'YXZ';
            camera.rotation.x = -isoAngle;
            // camera.position.z = 5;
        }
        // const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        // const isoAngle = Math.atan(1 / Math.sqrt(2));
        // camera.rotation.order = 'YXZ';
        // camera.position.z = 5;
        // camera.rotation.x = -isoAngle;
        // const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        // camera.position.z = 5;
        // // camera.position.y = 5;
        const cameraTarget = new THREE.Object3D();
        if (true) {
            var frontalViewCamera = new THREE.OrthographicCamera(-bw / 1.05, bw / 1.05, bw / 1.05, -bw / 1.05, 0.1, 1000);
            frontalViewCamera.position.set(0, bw * 0.8, bw * 1.5);
            frontalViewCamera.lookAt(0, bw * 0.8, 0);
            var sideViewCamera = new THREE.OrthographicCamera(-bw / 1.05, bw / 1.05, bw / 1.05, -bw / 1.05, 0.1, 1000);
            sideViewCamera.position.set(bw * 1.5, bw * 0.8, 0);
            sideViewCamera.lookAt(0, bw * 0.8, 0);
        }
        var topViewCamera = new THREE.OrthographicCamera(-bw / 1.3, bw / 1.3, bw / 1.3, -bw / 1.3, 0.1, 1000);
        topViewCamera.position.set(0, bh * 20, 0);
        topViewCamera.lookAt(0, 0, 0);
        // var color = 0xFFFFFF;
        // var intensity = 1;
        // var light = new THREE.DirectionalLight(color, intensity);
        // //light의 위치와 target의 위치를 지정한다
        // light.position.set(10, 10, 10);
        // light.target.position.set(0, 0, 0);
        // scene.add(light);
        // scene.add(light.target);
        // const color = 0xFFFFFF;
        // const intensity = 0;
        // const light = new THREE.AmbientLight(color, intensity);
        // scene.add(light);
        var renderer = new THREE.WebGLRenderer({
            antialias: true,
            alpha: true
        });
        // var shadowMapRenderer = new THREE.WebGLShadowMapRenderer(renderer);
        // shadowMapRenderer.render(scene, dl);
        if (shadowon) renderer.shadowMap.enabled = true;
        renderer.setSize(window.innerWidth, window.innerHeight, false);
        document.body.appendChild(renderer.domElement);
        // Set up the physics world
        // var world = new CANNON.World();
        // world.gravity.set(-0.06, -8, 0.1285);
        // const groundShape = new CANNON.Plane();
        // const groundBody = new CANNON.Body({ mass: 0 });
        // groundBody.addShape(groundShape);
        // groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI/2);
        var world = new CANNON.World();
        let groundgeometry = new THREE.BoxGeometry(200, 2, 200);
        // let groundcolor =new THREE.Color('hsl('+String(30+6*(10))+', 100%, 50%)');
        let groundcolor = new THREE.Color(colorlst[colornum][0])
        // const material = new THREE.MeshBasicMaterial({ color: 0x00ff00*Math.random() });
        if (lighton) {
            var groundmaterial = new THREE.MeshLambertMaterial({
                color: groundcolor,
                visible: true,
                opacity: 0.06,
                transparent: true
            });
        } else {
            var groundmaterial = new THREE.MeshBasicMaterial({
                color: groundcolor,
                visible: true
            });
        }
        let groundmesh = new THREE.Mesh(groundgeometry, groundmaterial);
        groundmesh.position.set(0, -1, 0);
        if (shadowon) groundmesh.receiveShadow = true




        scene.add(groundmesh);

        // var groundgeometry1 = new THREE.BoxGeometry(100, 2, 100);
        // var groundcolor1 = new THREE.Color(colorlst[colornum][0])
        // var groundmaterial1 = new THREE.MeshLambertMaterial({
        //     color: groundcolor1,
        //     visible: true,
        //     opacity: 0.1,
        //     alphaTest: 0.1,
        //     transparent: true
        // });
        // var groundmesh1 = new THREE.Mesh(groundgeometry1, groundmaterial1);
        // groundmesh1.rotation.x=Math.PI/2
        // groundmesh1.position.set(0, -1, -80);
        //
        // scene.add(groundmesh1);
        //
        // var groundgeometry1 = new THREE.BoxGeometry(100, 2, 100);
        // var groundcolor1 = new THREE.Color(colorlst[colornum][0])
        // var groundmaterial1 = new THREE.MeshLambertMaterial({
        //     color: groundcolor1,
        //     visible: true,
        //     opacity: 0.1,
        //     alphaTest: 0.1,
        //     transparent: true
        // });
        // var groundmesh1 = new THREE.Mesh(groundgeometry1, groundmaterial1);
        // groundmesh1.rotation.z=Math.PI/2
        // groundmesh1.position.set(-80, -1, 0);
        //
        // scene.add(groundmesh1);





        let groundshape = new CANNON.Box(new CANNON.Vec3(100 / 2, 2 / 2, 100 / 2));
        let customMaterial = new CANNON.Material('customMaterial');
        customMaterial.friction = 0.2; // Friction coefficient, range: 0-1
        customMaterial.restitution = 0.4; // Restitution (elasticity), range: 0-1
        let groundBody = new CANNON.Body({
            mass: 0,
            shape: groundshape,
            material: customMaterial
        });
        groundBody.position.set(0, -1, 0);
        // groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -0.02);
        world.addBody(groundBody);
        // groundBody.position.y=boxh/2
        world.gravity.set(0, 0, 0);
        world.broadphase = new CANNON.NaiveBroadphase();
        world.solver.iterations = 2;
        // Add a ground plane to the physics world
        // const groundBody = new CANNON.Body({ mass: 0, shape: new CANNON.Plane() });
        // // groundBody.quaternion.setFromAxiwsAngle(new CANNON.Vec3(1, 0, 0), 0);
        // world.addBody(groundBody);
        // groundBody.position.y=boxh/2
        // const groundShape = new CANNON.Plane();
        // const groundBody = new CANNON.Body({ mass: 0 });
        // // groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 0, 0), 0);
        // groundBody.addShape(groundShape);
        // world.addBody(groundBody);
        // groundBody.position.y=0
        // groundBody.position.y=0
        // const groundBody = new CANNON.Body({ mass: 0, shape: new CANNON.Plane() });
        // groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);
        // world.addBody(groundBody);
        // groundBody.position.y=boxh/2
        // const cube = createBox(0, 1, 0, 1, 0.5, 1);
        // cube.mesh.userData.body = cube.body;
        // Define force constants
        document.addEventListener('keydown', (event) => {
            // if(inflag) return;
            if (event.code === 'KeyW') {
              if(!goahead) return;
                if(!originflag){
                  msetting(function(object) {



                    document.getElementById("intro").style.top="-120%";
                    document.getElementById("intro").style.opacity="0";
                    setTimeout(function() {
                        document.getElementById("tut-info").children[0].style.color=hexToHtmlColor(colorlst[colornum][3]);
                        document.getElementById("tut-info").style.opacity="0.8";
                    }, 1500);

                    originflag=true;
                    camera.rotation.x=restartend*1.2;
                    restartflag = false;

                    return;
                  })
                  return;

                }else if(!startflag){
                  var go=true;
                  for (let i = 0; i < 6; i++) {
                      let temp = [0, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, "up", "down", "left", "right", "upper", "lower"]
                      for (let j = 0; j < temp.length; j++) {
                        if(soundic[sdic[i][temp[j]]]==null){
                          go=false;
                        }

                      }
                  }

                  if(!go) return;
                  document.getElementById("tut-info").style.display="none"
                  document.getElementById("intro").style.display="none"
                  if(gamemod==0){
                    world.gravity.set(0, -7, 0);
                  }else if(gamemod==1){
                    world.gravity.set(0, -8, 0);
                  }else if(gamemod==2){
                    world.gravity.set(0, -6, 0);
                  }
                }
                if (!startflag) {
                    startflag = true;
                    return;
                }
                activeFloor++;
                if (activeFloor > cubes.length) {
                    activeFloor = cubes.length;
                } else {
                    // if (soundic[sdic[activeFloor]["upper"]].isPlaying) {
                    //     soundic[sdic[activeFloor]["upper"]].stop();
                    // }
                    // soundic[sdic[activeFloor]["upper"]].play();
                    if (true) {
                        var thisnum = activeFloor
                        var playable = true
                        for (let i = 0; i < 6; i++) {
                            if (i == thisnum) continue
                            if (soundic[sdic[i][0]].isPlaying) {
                                soundic[sdic[i][0]].stop();
                            }
                        }
                        if (!soundic[sdic[thisnum][0]].isPlaying) {
                            soundic[sdic[thisnum][0]].play();
                            songTitleElement.innerText = sdic[thisnum]["title"];
                            artistNameElement.innerText = sdic[thisnum]["producer"];
                            var songInfo = document.getElementById('song-info');
                            if(thisnum==5){
                                document.getElementById('song-title').style.color=hexToHtmlColor(colorlst[colornum][2])
                                document.getElementById('artist-name').style.color=hexToHtmlColor(colorlst[colornum][1])

                            }else{
                                document.getElementById('song-title').style.color=hexToHtmlColor(colorlst0[colornum0][thisnum])
                                document.getElementById('artist-name').style.color=hexToHtmlColor(colorlst0[colornum0][thisnum])
                            }


                            document.getElementById('playing').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // document.getElementById('song-dash1').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // document.getElementById('song-dash2').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // songInfo.classList.add("hidden");
                            if (songInfo.classList.contains("hidden")) songInfo.classList.remove("hidden");
                            if (songInfo.classList.contains("fade")) songInfo.classList.remove("fade");
                            if (songInfo.classList.contains("during")) {
                                songInfo.classList.remove("during");
                                songInfo.classList.add("during");
                            } else {
                                songInfo.classList.add("during");
                            }
                            // songInfo.classList.add("show");
                            setTimeout(function() {
                                if (!songInfo.classList.contains("during")) return;
                                // songInfo.classList.remove("show");
                                songInfo.classList.add("fade");
                            }, 2000);
                        }
                    }
                }
            } else if (event.code === 'KeyS') {
              if(!goahead) return;
              // showpop("층","","+500pt")
                if(!originflag){

                  msetting(function(object) {



                    document.getElementById("intro").style.top="-120%";
                    document.getElementById("intro").style.opacity="0";
                    setTimeout(function() {
                        document.getElementById("tut-info").children[0].style.color=hexToHtmlColor(colorlst[colornum][3]);
                        document.getElementById("tut-info").style.opacity="0.8";
                    }, 1500);

                    originflag=true;
                    camera.rotation.x=restartend*1.2;
                    restartflag = false;

                    return;
                  })
                  return;

                }else if(!startflag){
                  var go=true;
                  for (let i = 0; i < 6; i++) {
                      let temp = [0, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, "up", "down", "left", "right", "upper", "lower"]
                      for (let j = 0; j < temp.length; j++) {
                        if(soundic[sdic[i][temp[j]]]==null){
                          go=false;
                        }

                      }
                  }

                  if(!go) return;
                  document.getElementById("tut-info").style.display="none"
                  document.getElementById("intro").style.display="none"
                  if(gamemod==0){
                    world.gravity.set(0, -7, 0);
                  }else if(gamemod==1){
                    world.gravity.set(0, -8, 0);
                  }else if(gamemod==2){
                    world.gravity.set(0, -6, 0);
                  }
                }
                if (!startflag) {
                    startflag = true;
                }
                activeFloor--;
                if (activeFloor < 0) {
                    activeFloor = 0;
                } else {
                    if (soundic[sdic[activeFloor]["lower"]].isPlaying) {
                        soundic[sdic[activeFloor]["lower"]].stop();
                    }
                    soundic[sdic[activeFloor]["lower"]].play();
                    if (true) {
                        var thisnum = activeFloor
                        var playable = true
                        for (let i = 0; i < 6; i++) {
                            if (i == thisnum) continue
                            if (soundic[sdic[i][0]].isPlaying) {
                                soundic[sdic[i][0]].stop();
                            }
                        }
                        if (!soundic[sdic[thisnum][0]].isPlaying) {
                            soundic[sdic[thisnum][0]].play();
                            songTitleElement.innerText = sdic[thisnum]["title"];
                            artistNameElement.innerText = sdic[thisnum]["producer"];
                            var songInfo = document.getElementById('song-info');
                            if(thisnum==5){
                                document.getElementById('song-title').style.color=hexToHtmlColor(colorlst[colornum][2])
                                document.getElementById('artist-name').style.color=hexToHtmlColor(colorlst[colornum][1])

                            }else{
                                document.getElementById('song-title').style.color=hexToHtmlColor(colorlst0[colornum0][thisnum])
                                document.getElementById('artist-name').style.color=hexToHtmlColor(colorlst0[colornum0][thisnum])
                            }


                            document.getElementById('playing').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // document.getElementById('song-dash1').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // document.getElementById('song-dash2').style.color=hexToHtmlColor(colorlst[colornum][3])
                            // songInfo.classList.add("hidden");
                            if (songInfo.classList.contains("hidden")) songInfo.classList.remove("hidden");
                            if (songInfo.classList.contains("fade")) songInfo.classList.remove("fade");
                            if (songInfo.classList.contains("during")) {
                                songInfo.classList.remove("during");
                                songInfo.classList.add("during");
                            } else {
                                songInfo.classList.add("during");
                            }
                            // songInfo.classList.add("show");
                            setTimeout(function() {
                                if (!songInfo.classList.contains("during")) return;
                                // songInfo.classList.remove("show");
                                songInfo.classList.add("fade");
                            }, 2000);
                        }
                    }
                }
            } else if (event.code === 'KeyR') {
                restart();
            } else if (event.code === 'KeyQ') {
                if (!startflag) {
                    startflag = true
                }
                if (!rotationflag) {
                    lookcenter = false
                    rotationflag = true
                    rotationend = Math.PI / 2
                }
                // if(lookcenter){
                // }else if(lookright){
                // }
            } else if (event.code === 'KeyH') {
                if (!rotationflag) {
                    rotationflag = true
                    restartflag = true
                    pluscoin = parseInt(점수 / 10)
                    // coin += pluscoin;
                    for (var i = 0; i < cubes.length; i++) {
                        restartloc.push(cubes[i].mesh.position);
                        restartrot.push(cubes[i].mesh.rotation);
                    }
                    ncolornum = parseInt(Math.random() * colorlst.length);
                    ncolornum0 = parseInt(Math.random() * colorlst0.length);
                    rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                    renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                    rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                    renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                    rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                    renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                    rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                    renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                    bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                    nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                    bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                    nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                    bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                    nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                    bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                    nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                    bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                    nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                    rotationend = Math.PI / 4
                }
                // if(lookcenter){
                // }else if(lookright){
                // }
            } else if (event.code === 'KeyZ') {
                skinnum++;
                if (skinnum >= skinset.length) {
                    skinnum = 0;
                }
                bf=999
                // if(lookcenter){
                // }else if(lookright){
                // }
            } else if (event.code === 'KeyE') {
              resol(rescounter);
              rescounter++;
              if (rescounter > 5) {
                  rescounter = 0;
              }
            } else if (event.code === 'KeyC') {
                var songInfo = document.getElementById('song-info');
                songInfo.classList.remove("hidden");
                songInfo.classList.add("show");
                setTimeout(function() {
                    songInfo.classList.remove("show");
                    songInfo.classList.add("fade");
                }, 1500);
                // setTimeout(() => {
                //   songInfo.classList.add('hidden');
                //   songInfo.classList.remove('visible');
                // }, 2000);
            } else if (event.code === 'KeyX') {
                if (!startflag) {
                    startflag = true
                }
                if (!rotationflag) {
                    lookcenter = false
                    rotationflag = true
                    rotationend = Math.PI / 4
                }
            }
            // activeFloor = Math.min(stackHeight, Math.max(0, activeFloor));
        });
        // Add event listener for arrow key presses
        document.addEventListener('keydown', (event) => {
            // if(inflag) return;
            if (aniflag || bounceflag) return;
            let force = new CANNON.Vec3();
            let direction;
            switch (event.code) {
                case 'ArrowUp':
                    force.set(0, 0, -forceAmount);
                    direction = 'up';
                    break;
                case 'ArrowDown':
                    force.set(0, 0, forceAmount);
                    direction = 'down';
                    break;
                case 'ArrowLeft':
                    force.set(-forceAmount, 0, 0);
                    direction = 'left';
                    break;
                case 'ArrowRight':
                    force.set(forceAmount, 0, 0);
                    direction = 'right';
                    break;
                default:
                    return;
            }
            // if (activeFloor < stackHeight) {
            //   const floor = scene.children.find(
            //     (object) => object.userData.body && object.userData.game2048 && object.position.y === boxSize / 2 + activeFloor * boxSize
            //   );
            //   if (floor) {
            //     const game2048 = floor.userData.game2048;
            //     const boardChanged = game2048.moveBoard(direction);
            //     if (boardChanged) {
            //       // Update the tiles' appearance on the floor according to the updated game2048 board state
            //     }
            //   }
            // } else {
            // }
            // cube.body.applyForce(force, cube.body.position);
            // for(item of cubes){
            //   item.body.applyForce(force, item.body.position);
            // }
            if (activeFloor == cubes.length) {
                // fcubes.forEach((item)=>{
                //   item.body.applyForce(force, item.body.position);
                // })
            } else {
                for (var i = 0; i < cubes.length; i++) {
                    if (i == activeFloor) {
                        if (!cubes[i].mesh.userData.game2048.boardChanged && !aniflag) {
                            const game2048 = cubes[i].mesh.userData.game2048;
                            game2048.moveBoard(direction);
                            // console.log(game2048.)
                        }
                        // cubes[i].body.applyForce(force, cubes[i].body.position);
                    }
                }
            }
        });

        // for(item of cubes){
        //     item.body.applyForce(force, item.body.position);
        //   }
        // Create a function to add a new box to the stack
        function restart() {
            fullmax=false;
            // init();
            // return location.reload();
            window.gamemod=gamemod;
            // for (let i = 0; i < sdic.length; i++) {
            //     if (soundic[sdic[i][0]]?.isPlaying) {
            //         soundic[sdic[i][0]].stop();
            //     }
            // }
            var sdickeys = Object.keys(soundic);

            sdickeys.forEach((item) => {
              soundic[item]?.stop();
            });
            cubes.length=5;
            // listener = new THREE.AudioListener();
            // audioLoader = new THREE.AudioLoader();
            world = new CANNON.World();
            camera.left = -bw * 1.3
            camera.right = bw * 1.3 * 4
            camera.top = bw * 1.3
            camera.bottom = -bw * 1.3 * 4
            camera.near = 0.1;
            camera.far = 1000;

             frontalViewCamera.left= -bw / 1.05
            frontalViewCamera.right = bw / 1.05
            frontalViewCamera.top = bw / 1.05
            frontalViewCamera.bottom = -bw / 1.05

            sideViewCamera.left = -bw / 1.05
            sideViewCamera.right =  bw / 1.05
            sideViewCamera.top = bw / 1.05
            sideViewCamera.bottom = -bw / 1.05

            // dl2.shadow.camera.position.y=bh * (cubes.length + 3.5);
            if (gamemod==0){
              cubes[3].body.material.friction = 0.2;
              cubes[3].body.material.restitution = 0.4;
              stack=5;
              forceAmount = bw * bw * bh / 16.5;
              groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 0, 0), 0)
              world.gravity.set(0, 0, 0);
              world.solver.iterations = 2;
              // groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 0, 1), -Math.PI/32)
            }else if (gamemod==1){
              cubes[3].body.material.friction = 0.3;
              cubes[3].body.material.restitution = 0.3;
              stack=5;
              forceAmount = bw * bw * bh / 30;
              groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 0, 0), 0)

              world.gravity.set(0, 0, 0);
              world.solver.iterations = 1;

            }else if (gamemod==2){
              cubes[3].body.material.friction = 1;
              cubes[3].body.material.restitution = 0.8;
              stack=3;
              forceAmount = bw * bw * bh / 10;
              groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 0, 0), 0)
              world.gravity.set(0, 0, 0);
              world.solver.iterations = 2;
            }
            world.addBody(groundBody);
            world.broadphase = new CANNON.NaiveBroadphase();
            renderer.clearDepth();
            scene = new THREE.Scene();
            colornum = ncolornum
            colornum0 = ncolornum0
            let groundgeometry = new THREE.BoxGeometry(200, 2, 200);
            // let groundcolor =new THREE.Color('hsl('+String(30+6*(10))+', 100%, 50%)');
            let groundcolor = new THREE.Color(colorlst[colornum][0])
            // const material = new THREE.MeshBasicMaterial({ color: 0x00ff00*Math.random() });
            if (lighton) {
                var groundmaterial = new THREE.MeshLambertMaterial({
                    color: groundcolor,
                    visible: true,
                    opacity: 0.06,
                    transparent: true
                });
            } else {
                var groundmaterial = new THREE.MeshBasicMaterial({
                    color: groundcolor,
                    visible: true
                });
            }
            groundmesh = new THREE.Mesh(groundgeometry, groundmaterial);
            groundmesh.position.set(0, -1, 0);
            if (shadowon) groundmesh.receiveShadow = true
            groundmesh.rotation.x=0;
            groundmesh.rotation.z=0;


            scene.add(groundmesh);
            coinupdate = [];
            coinfinal = [];
            가장자리 = [];
            점수 = 0;
            pluscoin = 0;
            coinchg = [];
            topcam = true;
            endtext = false;
            initflag = true;
            restartflag = false;
            timlst = []
            gradback = [];
            uilst0 = [];
            uilst1 = [];
            ring=[];

            if(particleflag){
              var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
              var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.75) + '%, ' + String(newcl["l"] + 20) + '%)');
              var material2 = new THREE.ShaderMaterial({
                  uniforms: {
                      color: {
                          value: tc
                      },
                      opacity: 0.1,
                      transparent: true
                  },
                  vertexShader: document.getElementById('vertexshader').textContent,
                  fragmentShader: document.getElementById('fragmentshader').textContent
              });
              particles.material = material2
              scene.add(particles);
            }

            sdic=[];
            templst.sort(() => Math.random() - 0.5);
            sdic.push(nslst[templst[0]])
            sdic.push(nslst[templst[1]])
            sdic.push(nslst[templst[2]])
            sdic.push(nslst[templst[3]])
            sdic.push(nslst[templst[4]])
            sdic.push(nslst[templst[5]])
            // templst=[];
            // sdic.push(nslst["wooden"])
            // sdic.push(nslst["wooden"])
            // sdic.push(nslst["wooden"])
            // sdic.push(nslst["new3"])
            // sdic.push(nslst["ibiza_deep"])
            // sdic.push(nslst["rnb_demo"])

            // templst.push("wooden")
            // templst.push("High End Party")
            // templst.push("Catwalk")
            // templst.push("Lost in the Dessert")
            // templst.push("You_re in the Future")
            // templst.push("Beach House")
            // templst.push("Puzzles")
            // templst.push("frozen winter")
            //
            // templst.sort(() => Math.random() - 0.5);
            // sdic.push(nslst[templst[0]])
            // sdic.push(nslst[templst[1]])
            // sdic.push(nslst[templst[2]])
            // sdic.push(nslst[templst[3]])
            // sdic.push(nslst[templst[4]])
            // sdic.push(nslst[templst[5]])

            for (let i = 0; i < 6; i++) {
                let temp = [0, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, "up", "down", "left", "right", "upper", "lower"]
                var sdickeys = Object.keys(soundic);
                for (let j = 0; j < temp.length; j++) {
                    if (sdickeys.indexOf(sdic[i][temp[j]]) == -1) {
                        //
                        // var audioLoader = new THREE.AudioLoader();
                        audioLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/sound/' + sdic[i][temp[j]], function(buffer) {
                            var sound = new THREE.Audio(listener);
                            sound.setBuffer(buffer);
                            sound.setVolume(0.3);
                            soundic[sdic[i][temp[j]]] = sound;
                        });
                    }
                }
            }
            if (lighton) {
                // let ambientLight= new THREE.AmbientLight(0xffffff,0.4);
                if (true) {
                  ambientLight.color=new THREE.Color(0xffffff);
                  ambientLight.intensity=0.2
                  dl2.color=new THREE.Color(0xffffff);
                  dl2.intensity=0.6
                  dl2.castShadow = true;
                  dl2.shadow.mapSize = new THREE.Vector2(8000, 8000);
                  if(gamemod==2){
                    dl2.intensity=0.65


                    // dl2.position.set(40, 200, 160);
                  }

                }
                scene.add(ambientLight);

                scene.add(dl2)
            }
            arrows.forEach((item) => {
                item.children.forEach((thing) => {
                    item.remove(thing);
                })
                scene.remove(item);
            })
            arrows = [];
            // scene.children.forEach((object) => {
            // 		scene.remove(object);
            // 		// object.geometry.dispose();
            // 		// if (object.material.dispose) {
            // 		//   object.material.dispose();
            // 		// } else if (object.material.length) { // For multi-materials
            // 		//   object.material.forEach((material) => material.dispose());
            // 		// }
            // 		// if (object.material.map) {
            // 		//   object.material.map.dispose();
            // 		// } else if (object.material.length) { // For multi-materials
            // 		//   object.material.forEach((material) => {
            // 		//     if (material.map) {
            // 		//       material.map.dispose();
            // 		//     }
            // 		//   });
            // 		// }
            // 	})
            // txts=[];
            // cubes=[];
            // mouth1=[];
            // mouth2=[];
            // mouth3=[];
            // eye1=[];
            // eye2=[]
            // eye3=[];
            // clmeshlst={0:[], 1:[],2:[],3:[],4:[]}
            txtlst = [];
            // document.getElementById("cl10").style.backgroundColor=hexToHtmlColor(colorlst[colornum][0])
            // document.getElementById("cl11").style.backgroundColor=hexToHtmlColor(colorlst[colornum][1])
            // document.getElementById("cl12").style.backgroundColor=hexToHtmlColor(colorlst[colornum][2])
            // document.getElementById("cl13").style.backgroundColor=hexToHtmlColor(colorlst[colornum][3])
            //
            // document.getElementById("cl20").style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][0])
            // document.getElementById("cl21").style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][1])
            // document.getElementById("cl22").style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][2])
            // document.getElementById("cl23").style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][3])
            // document.getElementById("cl24").style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][4])
            gameoverflag = false;
            elapsedTime = 0
            startflag = false
            // if(document.getElementById("left").classList.contains("hidden")) {
            //   document.getElementById("left").classList.remove("hidden")
            //   document.getElementById("left").classList.add("show")
            // }
            // if(document.getElementById("right").classList.contains("hidden")){
            //   document.getElementById("right").classList.remove("hidden")
            //   document.getElementById("right").classList.add("show")
            // }
            if(gamemod==2) {
              var temp0=[0]
              skinnum = temp0[parseInt(Math.random()*temp0.length)];
              camera.position.y= bh * (cubes.length+0.5)
            }else{
              camera.position.y= bh * (cubes.length+3.5)
            }
            onceflag0=true;

            if(greylst.indexOf(ncolornum)!=-1){
              document.getElementById("left").classList.add("locked")
              document.getElementById("center").classList.add("locked")
              document.getElementById("right").classList.add("locked")

              document.getElementById("opt0").classList.add("locked")
              document.getElementById("opt1").classList.add("locked")
              document.getElementById("opt2").classList.add("locked")
              document.getElementById("opt3").classList.add("locked")
              // document.getElementById("opt4").classList.add("locked")
            }else{
              document.getElementById("left").classList.remove("locked")
              document.getElementById("center").classList.remove("locked")
              document.getElementById("right").classList.remove("locked")

              document.getElementById("opt0").classList.remove("locked")
              document.getElementById("opt1").classList.remove("locked")
              document.getElementById("opt2").classList.remove("locked")
              document.getElementById("opt3").classList.remove("locked")
              // document.getElementById("opt4").classList.remove("locked")

            }
            점수=0;
            maxnum=0;
            soundic[endsound]?.setVolume(0.4)
            sideback=[];

            resetting(stack, function(object) { //재시작
                msetting0(function(object) {
                    if(gamemod!=2){
                      cubes.forEach((item) => {
                          item.mesh.userData.game2048.spawnTile();
                          item.mesh.userData.game2048.spawnTile();
                      })
                    }else{
                      cubes[4].mesh.userData.game2048.spawnTile();
                      cubes[4].mesh.userData.game2048.spawnTile();
                    }
                    txtsetting(function(object) {
                        time0 = performance.now();
                        fps = 0;
                        activeFloor = cubes.length;
                        gameoverflag = false;

                        document.getElementById("coin-info").classList.remove("hidden");
                        document.getElementById("coin-info").classList.remove("fade");
                        document.getElementById("coin-info").classList.add("show");
                        document.getElementById("coin2").innerText=String(coin);
                        addring();

                    })
                })
            });

        }

        function createTextMesh(text, fontSize, callback) {
            // const fontLoader = new THREE.FontLoader();
            if (fontSize == 999) {
                var fsize = bw / 4
                var fhight = 두께*th / 4
                var fcolor = colorlst[colornum][2]
                // var fcolor=cubes[activeFloor].mesh.material.color
            } else if (fontSize == 998) {
                var fsize = bw / 9
                var fhight = 두께*th / 8
                // var fcolor=0xFfAfAf
                var fcolor = colorlst[colornum][3]
            } else if (fontSize == 997) {
                var fsize = bw / 3.5
                var fhight = th / 2
                // var fcolor=0x333333
                var fcolor = colorlst[colornum][3]
            } else if (fontSize == 996) {
                var fsize = bw / 3.5
                var fhight = th / 2
                // var fcolor=0x333333
                var fcolor = colorlst0[colornum0][4]
            } else {
                if (text.length == 4) {
                    var fsize = bw / 11
                    var fhight = th / 3
                    var fcolor = 0xffffff
                } else if (text.length == 3) {
                    var fsize = bw / 10
                    var fhight = th / 3
                    var fcolor = 0xffffff
                } else {
                    var fsize = bw / 10
                    var fhight = th / 3
                    var fcolor = 0xffffff
                }
            }
            const geometry = new TextGeometry(text, {
                font: font0,
                size: fsize,
                height: fhight
            });
            geometry.computeBoundingBox();
            geometry.translate(-geometry.boundingBox.max.x / 2, -geometry.boundingBox.min.y - 0.13, 0);
            if (fontSize == 996) {
                var material = new THREE.MeshLambertMaterial({
                    color: fcolor
                });
            } else {
                var material = new THREE.MeshBasicMaterial({
                    color: fcolor
                });
            }
            const mesh = new THREE.Mesh(geometry, material);


            if(text.length>=3){
              mesh.scale.x=0.9-((text.length-3)/10);
            }else{
              mesh.scale.x=1;
            }
            if (callback) {
                callback(mesh);
            }

        }

        function createBox(x, y, z, width, height, depth, game2048, idx) {
            if (skin0) {
                var geometry = new THREE.BoxGeometry(width * 0.95, height, depth * 0.95);
            } else {
                var geometry = new THREE.BoxGeometry(width, height, depth);
            }
            // const color =new THREE.Color('hsl('+String(30+6*(y/boxh))+', 100%, 50%)');
            // const material = new THREE.MeshLambertMaterial({color});
            if (lighton) {
                var material1 = new THREE.MeshLambertMaterial({
                    color: colorlst0[colornum0][idx]
                });
            } else {
                var material1 = new THREE.MeshBasicMaterial({
                    color: colorlst0[colornum0][idx]
                });
            }
            // material1.alphaTest=0.01
            // const material = new THREE.MeshBasicMaterial({ color: new THREE.Color('hsl('+String(Math.random()*20+(50+Math.random()*50)*(y/height))+', 70%, 50%)')});
            var ratio = 0.7;
            var dify = height * 0.05;
            dify = 0
            // var ratioy=0.6;
            let mesh = new THREE.Mesh(geometry, material1);
            var geoms = [];
            if (skin0) {
                let originHelper = new THREE.Object3D();
                if (true) {
                    originHelper.position.set(0, 0, -depth / 2 + depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 1.0, height, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-width / 2 + depth * 0.025, 0, 0)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.05, height, depth * 0.95);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //앞면
                    originHelper.position.set(0, bh / 2 - height / 11, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 1, height / 5.5, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-width / 2 + width * 0.09, -bh / 2 + height / 20, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.18, height / 10, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0, -bh / 2 + (height * 0.1 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.93 * ratio, height * 0.10 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0, -bh / 2 + (height * 0.1 * ratio) * 2.45, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.93 * ratio, height * 0.1 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //전면매꿈
                    originHelper.position.set(-(width * 1.0) / 2 + (width / 10) * 1, bh / 8, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 5, height / 2, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-(width * 1.0) / 2 + (width / 50) * 1, 0, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 25, height, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-(width * 0.75) / 2 + (width / 40) * 1, 0, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //전면우측
                    originHelper.position.set((width * 1.0) / 2 - (width / 10) * 1, 0, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 5, height, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //  ((우측면))
                    //하측
                    originHelper.position.set(depth / 2 - depth * 0.025, -bh / 2 + height / 16, 0)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, height / 8, width * 1.0);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    var mgeo = new BufferGeometryUtils.mergeGeometries(
                        geoms, false);
                    var mesh1 = new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({
                        color: colorlst0[colornum0][idx]
                    }));
                    mesh1.userData["1"] = true;
                    mesh1.userData["skin"] = "1";
                    mesh1.userData["skintype"] =0;
                    clmeshlst[idx].push(mesh1.material);
                    if (shadowon) {
                        mesh1.receiveShadow = true;
                        mesh1.castShadow = true;
                    }
                    mesh.add(mesh1);




                    var geometry = new THREE.BoxGeometry(width, height * 0.04, depth);
                    var material = new THREE.MeshLambertMaterial({
                        color: colorlst0[colornum0][idx]
                    });
                    var mesh1 = new THREE.Mesh(geometry, material);
                    mesh1.position.set(0, -bh / 2 + (height * 0.04) / 2, 0);
                    // mesh1.position.set(0, 0, 0);
                    // mesh1.userData["5"]=true;
                    mesh1.userData["skin"] = "1";
                    mesh1.userData["skintype"] =0;
                    if (shadowon) {
                        mesh1.receiveShadow = true;
                        mesh1.castShadow = true;
                    }
                    clmeshlst[idx].push(mesh1.material);
                    mesh.add(mesh1);
                    geoms = [];
                    originHelper.position.set(0 - (width * 0.05), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0 + (width * 0.05), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0 - (width * 0.1), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0 + (width * 0.1), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0 - (width * 0.15), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0 + (width * 0.15), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0 - (width * 0.2), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0 + (width * 0.2), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0 - (width * 0.3), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.18 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0 + (width * 0.3), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.18 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-(width * 1.0) / 2 + (width / 10) * 1, -bh / 3.75 + height * 0.08, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 5, height * 0.045, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-(width * 1.0) / 2 + (width / 10) * 1, -bh / 3.75, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 5, height * 0.045, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-(width * 1.0) / 2 + (width / 10) * 1, -bh / 3.75 - height * 0.08, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 5, height * 0.045, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-(width * 1.0) / 2 + (width / 10) * 1, -bh / 3.75 - height * 0.08 - height * 0.045, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 5, height * 0.045, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0, -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //지붕
                    originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height / 16, 0)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, height / 8, width * 1.0);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //구멍시작
                    //세로
                    var difx = 0.17;
                    originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 3)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 4)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 5)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 6)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 7)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, 0, difx + depth / 2 - (width * 0.03) * 8)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, height, width * 0.08);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //가로
                    var difx = 0.06;
                    originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 2, 0.17 + depth / 2 - (width * 0.03) * 4)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 3, 0.17 + depth / 2 - (width * 0.03) * 4)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 4, 0.17 + depth / 2 - (width * 0.03) * 4)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 5, 0.17 + depth / 2 - (width * 0.03) * 4)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 6, 0.17 + depth / 2 - (width * 0.03) * 4)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 7, 0.17 + depth / 2 - (width * 0.03) * 4)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    // originHelper.position.set(depth/2,difx+height/2-(width*0.03)*8.4,0.17+depth/2-(width*0.03)*4)
                    // originHelper.updateWorldMatrix(true, false);
                    // var tg=new THREE.BoxGeometry(depth*0.05, width*0.08, height*0.7);
                    // tg.applyMatrix4(originHelper.matrixWorld);
                    // geoms.push(tg)

                    originHelper.position.set(depth / 2.05 - depth * 0.02, 0 + dify, 0 - depth / 8)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.03, height * 0.8 * ratio, width * 0.9 * ratio);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)


                    originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 8, 0.17 + depth / 2 - (width * 0.03) * 4)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 8 - width * 0.018, 0.17 + depth / 2 - (width * 0.03) * 4)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    var mgeo = new BufferGeometryUtils.mergeGeometries(
                        geoms, false);
                    var mesh1 = new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({
                        color: colorlst0[colornum0][idx]
                    }));
                    mesh1.userData["1"] = true;
                    mesh1.userData["skin"] = "1";
                    mesh1.userData["skintype"] =0;
                    clmeshlst[idx].push(mesh1.material);
                    mesh.add(mesh1);
                }
                var geoms = [];
                if (true) { //신스킨
                    originHelper.position.set(0, 0, -depth / 2 + depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 1.0, height, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-width / 2 + depth * 0.025, 0, 0)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.05, height, depth * 0.95);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //화면바로하측
                    originHelper.position.set(-width / 2 + width * 0.5 / 2, -bh / 2 + height / 40, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.5, height / 20, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-width / 2 + width * 0.5 / 2, -bh / 2 + height / 40 + height / 15, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.5, height / 20, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-width / 2 + width * 0.5 / 2, -bh / 2 + height / 40 + height / 15 + height / 15, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.5, height / 20, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-width / 2 + width * 0.5 / 2, -bh / 2 + height / 40 + 3 * height / 15, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.5, height / 20, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //화면 하측 좌우측 매꿈
                    // originHelper.position.set(-width/2+width*0.5/2,-bh/2+height/10,depth/2-depth*0.025)
                    // originHelper.updateWorldMatrix(true, false);
                    // var tg=new THREE.BoxGeometry(width*0.02, height/5, depth*0.05);
                    // tg.applyMatrix4(originHelper.matrixWorld);
                    // geoms.push(tg)
                    originHelper.position.set(-width / 2 + width * 0.5 / 2 + bw / 5.8, -bh / 2 + height / 10, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.02, height / 5, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-width / 2 + width * 0.5 / 2 - bw / 5.8, -bh / 2 + height / 10, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.02, height / 5, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //전면 처마 너비
                    originHelper.position.set(-width * 0.0025, bh / 2 - height / 12, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width * 0.95, height / 6, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 3.9, -bh / 2 + height / 12, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 2.5, height / 6, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //처마 커버 우면
                    originHelper.position.set(bw / 2.2, 0, 0)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(depth * 0.005, height, depth);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-bw / 2 + width / 30, 0, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 15, height, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-width / 30, 0, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 15, height, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(+width / 50, 0, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 40, height, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(+width / 11.2, 0, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 10, height, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 2 - width / 20, 0, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 25, height, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(0, -bh / 2 + height * 0.15 / 2, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 6, height * 0.15, depth * 0.05);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)

                    var mgeo = new BufferGeometryUtils.mergeGeometries(
                        geoms, false);
                    var mesh1 = new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({
                        color: colorlst0[colornum0][idx]
                    }));
                    if (shadowon) {
                        mesh1.receiveShadow = true;
                        mesh1.castShadow = true;
                    }
                    mesh1.userData["1"] = true;
                    mesh1.userData["skin"] = "카세트";
                    mesh1.userData["skintype"] =0;
                    clmeshlst[idx].push(mesh1.material);
                    mesh.add(mesh1);
                    var geoms = [];
                    //카세트입구
                    originHelper.position.set(bw / 2 - width / 4.7 - width / 7 + width / 80, 0 - depth * 0.01, depth / 2.02)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 40, height * 0.55, depth * 0.002);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 2 - width / 4.8 + width / 7 - width / 80, 0 - depth * 0.007, depth / 2.02)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 40, height * 0.57, depth * 0.002);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 2 - width / 4.7, 0 - depth * 0.01 - height * 0.55 / 2 + height * 0.12 / 2, depth / 2.02)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 3.5, height * 0.12, depth * 0.002);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 2 - width / 4.7, 0 - depth * 0.01 + height * 0.60 / 2 - height * 0.07 / 2, depth / 2.02)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 3.5, height * 0.07, depth * 0.002);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //카세트 슬라이더 눈금 (오른쪽)
                    originHelper.position.set(bw / 12, 0 + height * 0.3, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.1, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.2, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.3, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.4, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.5, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.6, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    //카세트 슬라이더 눈금 (왼쪽)
                    originHelper.position.set(-bw / 32, 0 + height * 0.3, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.1, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.2, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.3, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.4, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.5, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.6, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                    var mgeo = new BufferGeometryUtils.mergeGeometries(
                        geoms, false);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                    var mesh1 = new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({
                        color: new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.65) + '%, ' + String(newcl["l"] + 25) + '%)')
                    }));
                    // mesh1.userData["1"]=true;
                    mesh1.userData["skin"] = "카세트";
                    mesh1.userData["skintype"] =1;
                    clmeshlst1[idx].push(mesh1.material);

                    mesh.add(mesh1);
                    // originHelper.position.set(bw/2-width/4.7,0-depth*0.01,depth/2)
                    // originHelper.updateWorldMatrix(true, false);
                    // var tg=new THREE.BoxGeometry(width/3.5, height*0.55, depth*0.002);
                    // tg.applyMatrix4(originHelper.matrixWorld);
                    // geoms.push(tg)
                    // originHelper.position.set(bw/2-width/4.7,0-depth*0.01,depth/2)
                    // 		originHelper.updateWorldMatrix(true, false);
                    // 		var tg=new THREE.BoxGeometry(width/3.5, height*0.55, depth*0.002);
                    // 		tg.applyMatrix4(originHelper.matrixWorld);
                    // geoms.push(tg)
                    if(true){//몰드
                      //카세트
                      var mtlLoader = new MTLLoader();
                      mtlLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/tape0.mtl', function(materials) {
                          materials.preload();
                          var loader = new OBJLoader();
                          // Load OBJ file
                          loader.setMaterials(materials);
                          loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/tape0.obj', (object) => {

                              object.children[0].position.set(bw / 3.3, -bh / 3, bw / 2.15)
                              object.children[0].scale.x = 1.3;
                              object.children[0].scale.z = 1.3;
                              object.children[0].userData["skin"] = "카세트"
                              if(idx==0){
                                skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                              }
                              mesh.add(object.children[0]);
                          });
                      });
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/caside-0.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          // object.children[0].scale.x=2.57;
                          // object.children[0].scale.z=2.57;
                          // object.children[0].scale.y=2.57;
                          object.children[0].scale.x = 2.25;
                          object.children[0].scale.z = 2.25;
                          object.children[0].scale.y = 1.92;
                          object.children[0].userData["skin"] = "카세트"
                          object.children[0].userData["skintype"] =0;
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: colorlst0[colornum0][idx]
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          clmeshlst[idx].push(object.children[0].material)
                          mesh.add(object.children[0]);
                      });
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/test5.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, 0, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "test5"
                          object.children[0].userData["skintype"] =0;
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: colorlst0[colornum0][idx]
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });

                      //archer
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/archero-0.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, 0, 0)
                          object.children[0].scale.x = 2.57 / 2;
                          object.children[0].scale.z = 2.57 / 2;
                          object.children[0].scale.y = 2.57 / 2;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "archer"
                          object.children[0].userData["skintype"] =2;
                          var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.85) + '%, ' + String(newcl["l"] - 10) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst2[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/archero-1.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, 0, 0)
                          object.children[0].scale.x = 2.57 / 2;
                          object.children[0].scale.z = 2.57 / 2;
                          object.children[0].scale.y = 2.57 / 2;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "archer"
                          object.children[0].userData["skintype"] =1;
                          var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] + 5) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst1[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      if (idx == 4) {
                          var loader = new OBJLoader();
                          // Load OBJ file
                          // loader.setMaterials(materials);
                          loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/archero-2.obj', (object) => {
                              object.children[0].rotation.y = Math.PI / 2
                              object.children[0].position.set(0, 0, 0)
                              object.children[0].scale.x = 2.57 / 2;
                              object.children[0].scale.z = 2.57 / 2;
                              object.children[0].scale.y = 2.57 / 2;
                              // object.children[0].scale.x=2.25;
                              // object.children[0].scale.z=2.25;
                              // object.children[0].scale.y=1.92;
                              object.children[0].userData["skin"] = "archer"
                              object.children[0].userData["skintype"] =2;
                              var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                              var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.85) + '%, ' + String(newcl["l"] - 5) + '%)');
                              object.children[0].material = new THREE.MeshLambertMaterial({
                                  color: tc
                              });
                              if (shadowon) {
                                  object.children[0].receiveShadow = true;
                                  object.children[0].castShadow = true;
                              }
                              clmeshlst2[idx].push(object.children[0].material)
                              if(idx==0){
                                skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                              }
                              mesh.add(object.children[0]);
                          });
                      }
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/archero-3.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, 0, 0)
                          object.children[0].scale.x = 2.57 / 2;
                          object.children[0].scale.z = 2.57 / 2;
                          object.children[0].scale.y = 2.57 / 2;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "archer"
                          object.children[0].userData["skintype"] =0;
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: colorlst0[colornum0][idx]
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var mtlLoader = new MTLLoader();
                      mtlLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/archero-4.mtl', function(materials) {
                          materials.preload();
                          var loader = new OBJLoader();
                          // Load OBJ file
                          loader.setMaterials(materials);
                          loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/archero-4.obj', (object) => {

                              object.children[0].rotation.y = Math.PI / 2
                              object.children[0].position.set(0, 0, 0)
                              object.children[0].scale.x = 2.57 / 2;
                              object.children[0].scale.z = 2.57 / 2;
                              object.children[0].scale.y = 2.57 / 2;
                              // object.children[0].scale.x=2.25;
                              // object.children[0].scale.z=2.25;
                              // object.children[0].scale.y=1.92;
                              object.children[0].userData["skin"] = "archer"
                              if (shadowon) {
                                  object.children[0].receiveShadow = true;
                                  object.children[0].castShadow = true;
                              }
                              if(idx==0){
                                skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                              }
                              mesh.add(object.children[0]);
                          });
                      });
                      //R808
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/R8-2.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "r808"
                          object.children[0].userData["skintype"] =0;
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: colorlst0[colornum0][idx]
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/R8-0.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "r808"
                          object.children[0].userData["skintype"] =2;
                          var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.85) + '%, ' + String(newcl["l"] + 5) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst2[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/R8-3.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "r808"
                          object.children[0].userData["skintype"] =1;

                          var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.65) + '%, ' + String(newcl["l"] + 20) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst1[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var mtlLoader = new MTLLoader();
                      mtlLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/R8-1.mtl', function(materials) {
                          materials.preload();
                          var loader = new OBJLoader();
                          // Load OBJ file
                          loader.setMaterials(materials);
                          loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/R8-1.obj', (object) => {
                              object.children[0].rotation.y = Math.PI / 2
                              object.children[0].position.set(0, -bh / 2, 0)
                              object.children[0].scale.x = 2.57;
                              object.children[0].scale.z = 2.57;
                              object.children[0].scale.y = 2.57;
                              // object.children[0].scale.x=2.25;
                              // object.children[0].scale.z=2.25;
                              // object.children[0].scale.y=1.92;
                              object.children[0].userData["skin"] = "r808"
                              if (shadowon) {
                                  object.children[0].receiveShadow = true;
                                  object.children[0].castShadow = true;
                              }
                              if(idx==0){
                                skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                              }
                              mesh.add(object.children[0]);
                          });
                      });

                      //tower
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/tower-1.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57 / 2;
                          object.children[0].scale.z = 2.57 / 2;
                          object.children[0].scale.y = 2.57 / 2;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "tower"
                          object.children[0].userData["skintype"] =0;
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: colorlst0[colornum0][idx]
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/tower-0.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57 / 2;
                          object.children[0].scale.z = 2.57 / 2;
                          object.children[0].scale.y = 2.57 / 2.2;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "tower"
                          object.children[0].userData["skintype"] =1;
                          var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.75) + '%, ' + String(newcl["l"] + 15) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst1[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      //donut
                      var donutrand = parseInt(Math.random() * 4);
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/donut-0.obj', (object) => {
                          object.children[0].rotation.y = donutrand * Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "donut"
                          object.children[0].userData["skintype"] =0;
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: colorlst0[colornum0][idx]
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/donut-1.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "donut"
                          // object.children[0].userData["skintype"] =1;
                          var newcl = hexToHSL(hexToHtmlColor(0xFBB45F))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var mtlLoader = new MTLLoader();
                      mtlLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/donut-2.mtl', function(materials) {
                          materials.preload();
                          var loader = new OBJLoader();
                          // Load OBJ file
                          loader.setMaterials(materials);
                          loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/donut-2.obj', (object) => {
                              object.children[0].rotation.y = donutrand * Math.PI / 2
                              object.children[0].position.set(0, -bh / 2, 0)
                              object.children[0].scale.x = 2.57;
                              object.children[0].scale.z = 2.57;
                              object.children[0].scale.y = 2.57;
                              // object.children[0].scale.x=2.25;
                              // object.children[0].scale.z=2.25;
                              // object.children[0].scale.y=1.92;
                              object.children[0].userData["skin"] = "donut"
                              if (shadowon) {
                                  object.children[0].receiveShadow = true;
                                  object.children[0].castShadow = true;
                              }
                              if(idx==0){
                                skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                              }
                              mesh.add(object.children[0]);
                          });
                      });
                      //building
                      var donutrand = parseInt(Math.random() * 4);
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/building-0.obj', (object) => {
                          object.children[0].rotation.y = donutrand * Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "building"
                          object.children[0].userData["skintype"] =0;
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: colorlst0[colornum0][idx]
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/building-1.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "building"
                          object.children[0].userData["skintype"] =1;
                          var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.8) + '%, ' + String(newcl["l"] + 15) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst1[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/building-2.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "building"
                          var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst0[3].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/building-3.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "building"
                          var newcl = hexToHSL(hexToHtmlColor(0x1F9394))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      //   var mtlLoader = new MTLLoader();
                      // 	mtlLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/building-3.mtl', function(materials) {
                      //   materials.preload();
                      //   var loader = new OBJLoader();
                      //   // Load OBJ file
                      //   loader.setMaterials(materials);
                      //   loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/building-3.obj', (object) => {
                      //   	object.children[0].rotation.y=donutrand*Math.PI/2
                      //   	object.children[0].position.set(0,-bh/2,0)
                      //   	object.children[0].scale.x=2.57;
                      //   	object.children[0].scale.z=2.57;
                      //   	object.children[0].scale.y=2.57;
                      //   	// object.children[0].scale.x=2.25;
                      //   	// object.children[0].scale.z=2.25;
                      //   	// object.children[0].scale.y=1.92;
                      //   	object.children[0].userData["skin"]="building"
                      //   	if(shadowon) {
                      //     object.children[0].receiveShadow=true;
                      //     object.children[0].castShadow=true;
                      //   }
                      //    mesh.add(object.children[0]);
                      //   });
                      // });
                      //radio
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/radio-0.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "radio"
                          object.children[0].userData["skintype"] =0;
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: colorlst0[colornum0][idx]
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var loader = new OBJLoader();
                      // Load OBJ file
                      // loader.setMaterials(materials);
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/radio-1.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "radio"
                          object.children[0].userData["skintype"] =2;
                          var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.85) + '%, ' + String(newcl["l"] + 5) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/radio-3.obj', (object) => {
                          object.children[0].rotation.y = Math.PI / 2
                          object.children[0].position.set(0, -bh / 2, 0)
                          object.children[0].scale.x = 2.57;
                          object.children[0].scale.z = 2.57;
                          object.children[0].scale.y = 2.57;
                          // object.children[0].scale.x=2.25;
                          // object.children[0].scale.z=2.25;
                          // object.children[0].scale.y=1.92;
                          object.children[0].userData["skin"] = "radio"
                          object.children[0].userData["skintype"] =1;
                          var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.65) + '%, ' + String(newcl["l"] + 20) + '%)');
                          object.children[0].material = new THREE.MeshLambertMaterial({
                              color: tc
                          });
                          if (shadowon) {
                              object.children[0].receiveShadow = true;
                              object.children[0].castShadow = true;
                          }
                          clmeshlst1[idx].push(object.children[0].material)
                          if(idx==0){
                            skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                          }
                          mesh.add(object.children[0]);
                      });
                      var mtlLoader = new MTLLoader();
                      mtlLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/radio-2.mtl', function(materials) {
                          materials.preload();
                          var loader = new OBJLoader();
                          // Load OBJ file
                          loader.setMaterials(materials);
                          loader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/radio-2.obj', (object) => {
                              object.children[0].rotation.y = Math.PI / 2
                              object.children[0].position.set(0, -bh / 2, 0)
                              object.children[0].scale.x = 2.57;
                              object.children[0].scale.z = 2.57;
                              object.children[0].scale.y = 2.57;
                              // object.children[0].scale.x=2.25;
                              // object.children[0].scale.z=2.25;
                              // object.children[0].scale.y=1.92;
                              object.children[0].userData["skin"] = "radio"
                              if (shadowon) {
                                  object.children[0].receiveShadow = true;
                                  object.children[0].castShadow = true;
                              }
                              if(idx==0){
                                skinmold[object.children[0].userData["skin"]].push(object.children[0].clone())
                              }
                              mesh.add(object.children[0]);
                          });
                      });

                    }else{
                      var moldkey=Object.keys(skinmold);
                      moldkey.forEach((item) => {
                        skinmold[item].forEach((obj) => {
                          switch (obj.userData["skintype"]) {
                              case 0:
                                  var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                                  obj.material.color=new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                                  break;
                              case 1:
                                  var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                                  obj.material.color=new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.65) + '%, ' + String(newcl["l"] + 15) + '%)');
                                  break;
                              case 2:
                                  var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                                  obj.material.color=new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] - 10) + '%)');
                                  break;
                              default:
                                  return;
                          }
                          mesh.add(obj);



                        });

                      });


                    }


                    var geoms = [];
                    originHelper.position.set(0, 2 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 20 + width / 60, 2 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(2 * (width / 20 + width / 60), 2 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(3 * (width / 20 + width / 60), 2 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(0, 1 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 20 + width / 60, 1 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(2 * (width / 20 + width / 60), 1 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(3 * (width / 20 + width / 60), 1 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 20 + width / 60, 0 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(2 * (width / 20 + width / 60), 0 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 20 + width / 60, -1 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(2 * (width / 20 + width / 60), -1 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 20 + width / 60, -2 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 20 + width / 60, -3 * (-bh / 15), depth / 2.15)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    var mgeo2 = new BufferGeometryUtils.mergeGeometries(geoms, false);
                    var mesh2 = new THREE.Mesh(mgeo2, new THREE.MeshLambertMaterial({
                        vertexColors: true
                    }));
                    if (shadowon) {
                        mesh2.receiveShadow = true;
                        mesh2.castShadow = true;
                    }
                    mesh2.userData["1"] = true;
                    mesh2.userData["skin"] = "r808";

                    mesh.add(mesh2);



                    originHelper.position.set(-width / 11, -bh / 2 + (height * 0.13) / 2, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 22, height * 0.12, depth * 0.014);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(-width / 11 + (width / 22 + width / 640), -bh / 2 + (height * 0.13) / 2, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 22, height * 0.12, depth * 0.014);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(-width / 11 + 2 * (width / 22 + width / 640), -bh / 2 + (height * 0.13) / 2, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 22, height * 0.12, depth * 0.014);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(-width / 11 + 3 * (width / 22 + width / 640), -bh / 2 + (height * 0.13) / 2, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 22, height * 0.12, depth * 0.014);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 10) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(-width / 11 + 4 * (width / 22 + width / 640), -bh / 2 + (height * 0.13) / 2, depth / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 22, height * 0.12, depth * 0.014);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    var gap = width / 13 + width / 160
                    //우면버튼
                    originHelper.position.set(bw / 2 - (width / 20) / 2, bh / 2 - height * 0.19 / 2, bw / 2.3 - (width / 13) / 2)
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 25, height * 0.19, width / 13);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(bw / 2 - (width / 20) / 2, bh / 2 - height * 0.19 / 2, bw / 2.3 - (width / 13) / 2 - 1 * (gap))
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 25, height * 0.19, width / 13);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)

                    originHelper.position.set(bw / 2 - (width / 20) / 2, bh / 2 - height * 0.19 / 2, bw / 2.3 - (width / 13) / 2 - 2 * (gap))
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 25, height * 0.19, width / 13);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)




                    originHelper.position.set(bw / 2 - (width / 20) / 2, bh / 2 - height * 0.19 / 2, bw / 2.3 - (width / 13) / 2 - 3 * (gap))
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 25, height * 0.19, width / 13);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(bw / 2 - (width / 29) / 2, bh / 2 - height * 0.19 / 2, bw / 2.3 - (width / 13) / 2 - 4 * (gap))
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(width / 36, height * 0.19, width / 13);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    var mgeo2 = new BufferGeometryUtils.mergeGeometries(geoms, false);
                    var mesh2 = new THREE.Mesh(mgeo2, new THREE.MeshLambertMaterial({
                        vertexColors: true
                    }));
                    if (shadowon) {
                        mesh2.receiveShadow = true;
                        mesh2.castShadow = true;
                    }
                    mesh2.userData["1"] = true;
                    mesh2.userData["skin"] = "radio";

                    mesh.add(mesh2);
                }
                // originHelper.position.set(-width/2+width*0.09,-bh/2+height/20,depth/2)
                // originHelper.updateWorldMatrix(true, false);
                // var tg=new THREE.BoxGeometry(width*0.18, height/10, depth*0.05);
                // tg.applyMatrix4(originHelper.matrixWorld);
                // geoms.push(tg)
                // var geoms=[];
                // originHelper.position.set(0,0,-depth/2+depth*0.025)
                // originHelper.updateWorldMatrix(true, false);
                // var tg=new THREE.BoxGeometry(width*1.0, height, depth*0.05);
                // tg.applyMatrix4(originHelper.matrixWorld);
                // geoms.push(tg)
                // originHelper.position.set(-width/2+width*0.025,0,0)
                // originHelper.updateWorldMatrix(true, false);
                // var tg=new THREE.BoxGeometry(width*0.05, height, depth*1.0);
                // tg.applyMatrix4(originHelper.matrixWorld);
                // geoms.push(tg)
                // originHelper.position.set(0,0,depth/2-width*0.025)
                // originHelper.updateWorldMatrix(true, false);
                // var tg=new THREE.BoxGeometry(width*1.0, height, depth*0.05);
                // tg.applyMatrix4(originHelper.matrixWorld);
                // geoms.push(tg)
                // originHelper.position.set(width/2-width*0.025,0,0)
                // originHelper.updateWorldMatrix(true, false);
                // var tg=new THREE.BoxGeometry(width*0.05, height, depth*1.0);
                // tg.applyMatrix4(originHelper.matrixWorld);
                // geoms.push(tg)
                // var mgeo=new BufferGeometryUtils.mergeGeometries(
                //     geoms, false);
                //  var mesh1=new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({ color: colorlst0[colornum0][idx]}));
                var geometry = new THREE.BoxGeometry(width, height * 0.99, depth);
                var material = new THREE.MeshBasicMaterial({
                    color: colorlst0[colornum0][idx]
                });
                var mesh1 = new THREE.Mesh(geometry, material);
                // mesh1.position.set(0, 0, 0);
                // mesh1.userData["5"]=true;
                mesh1.userData["skin"] = "adam";
                mesh1.userData["skintype"] =0;
                mesh.add(mesh1);
                clmeshlst[idx].push(mesh1.material)
                var geometry = new THREE.BoxGeometry(width, height * 0.99, depth);
                var material = new THREE.MeshLambertMaterial({
                    color: colorlst0[colornum0][idx]
                });
                var mesh1 = new THREE.Mesh(geometry, material);
                // mesh1.position.set(0, 0, 0);
                // mesh1.userData["5"]=true;
                mesh1.userData["skin"] = "base";
                mesh1.userData["skintype"] =0;
                if (shadowon) {
                    mesh1.receiveShadow = true;
                    mesh1.castShadow = true;
                }
                mesh.add(mesh1);
                clmeshlst[idx].push(mesh1.material)
                // mesh.userData["cl"]=mesh1.material;
                var geoms = [];
                // tapemold[idx].userData["1"]=true;
                // tapemold[idx].userData["skin"]="5";
                //신스킨
                if (true) {
                    //좌측 키(검정 카세트)
                    originHelper.position.set(-width / 2.15, 0 + height * 0.3, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    // var tc=new THREE.Color(0x20282F)
                    var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] + 15) + '%)');
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.3 * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(-width / 2.15, 0, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    // var tc=new THREE.Color(0x20282F)
                    var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] + 15) + '%)');
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.3 * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //화면(블랙) 카세트
                    originHelper.position.set(0 - bw / 4, 0 + dify + height * 0.05, depth / 2.05 - depth * 0.015)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0x604060)
                    var tg = new THREE.BoxGeometry(width * 0.5 * ratio, height * 0.6 * ratio, depth * 0.03);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //화면 하측 슬롯 음영(카세트)
                    originHelper.position.set(0 - bw / 4, 0 + dify - height * 0.35, depth / 2.05 - depth * 0.005)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0x102010)
                    var tg = new THREE.BoxGeometry(width * 0.6 * ratio, height * 0.3 * ratio, depth * 0.03);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //화면(그레이) 카세트
                    originHelper.position.set(0 - bw / 4, height * 0.45 * ratio + dify, depth / 1.97 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(width * 0.5 * ratio, height * 0.1 * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(0 - bw / 4, -height * 0.3 * ratio + dify, depth / 1.97 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(width * 0.5 * ratio, height * 0.1 * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(-bw / 4 + (width * 0.5 * ratio) / 2, 0 + dify, depth / 1.97 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(width * 0.05 * ratio, height * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(-bw / 4 - (width * 0.5 * ratio) / 2, 0 + dify, depth / 1.97 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(width * 0.05 * ratio, height * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //카세트 슬라이더노브
                    originHelper.position.set(bw / 25, 0 + height * 0.3 - (height * 0.5 * Math.random()), depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst[colornum][1])
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.05 * ratio, depth * 0.036);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(0, 0 + height * 0.3 - (height * 0.5 * Math.random()), depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst[colornum][2])
                    var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.05 * ratio, depth * 0.036);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //카세트 버튼
                    originHelper.position.set(bw / 6, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst[colornum][3])
                    var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.2 * ratio, depth * 0.036);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(bw / 6 + height * 0.2 * ratio * 1.2, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst[colornum][2])
                    var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.18 * ratio, depth * 0.036);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(bw / 6 + height * 0.2 * ratio * 2.4, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst0[colornum0][0])
                    var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.18 * ratio, depth * 0.036);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(bw / 6 + height * 0.2 * ratio * 3.6, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst[colornum][2])
                    var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.18 * ratio, depth * 0.036);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(bw / 6 + height * 0.2 * ratio * 4.8, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst0[colornum0][3])
                    var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.18 * ratio, depth * 0.036);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(bw / 6 + height * 0.2 * ratio * 6, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst[colornum][0])
                    var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.18 * ratio, depth * 0.036);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //뚜껑
                    // originHelper.position.set(0,height/2-height*0.02,0)
                    // originHelper.updateWorldMatrix(true, false);
                    // // var tc=new THREE.Color(0xffffff)
                    // var newcl=hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                    // var tc=new THREE.Color('hsl('+String(newcl["h"])+', '+String(newcl["s"]*0.65)+'%, '+String(newcl["l"]+25)+'%)');
                    // var tg=new THREE.BoxGeometry(width*0.93, height*0.1, depth*0.95);
                    // var rgb = tc.toArray().map(v => v * 255);
                    // var numVerts = geometry.getAttribute('position').count;
                    // var itemSize = 3;  // r, g, b
                    // var colors = new Uint8Array(itemSize * numVerts);
                    // colors.forEach((v, ndx) => {
                    //   colors[ndx] = rgb[ndx % 3];
                    // });
                    // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    // tg.applyMatrix4(originHelper.matrixWorld);
                    // tg.setAttribute('color', colorAttrib);
                    // geoms.push(tg)
                    //카세트 우측면 버튼
                    originHelper.position.set(width / 2 - height * 0.1, height / 2 - ((height / 7)), +depth / 2.35)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst0[colornum0][0])
                    var tg = new THREE.BoxGeometry(height * 0.2, (height / 7), height * 0.3);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 2 - height * 0.1, height / 2 - 2.2 * ((height / 7)), +depth / 2.35)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst0[colornum0][1])
                    var tg = new THREE.BoxGeometry(height * 0.2, (height / 7), height * 0.3);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 2 - height * 0.1, height / 2 - 3.4 * ((height / 7)), +depth / 2.35)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst0[colornum0][2])
                    var tg = new THREE.BoxGeometry(height * 0.2, (height / 7), height * 0.3);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 2 - height * 0.1, height / 2 - 4.6 * ((height / 7)), +depth / 2.35)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst0[colornum0][3])
                    var tg = new THREE.BoxGeometry(height * 0.2, (height / 7), height * 0.3);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 2 - height * 0.1, height / 2 - 5.8 * ((height / 7)), +depth / 2.35)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst0[colornum0][4])
                    var tg = new THREE.BoxGeometry(height * 0.2, (height / 7), height * 0.3);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)

                    //우측면 우측 음영
                    originHelper.position.set(width / 2 - depth * 0.005, 0, -depth / 2 + (depth * 0.2))
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0x000000)
                    var tg = new THREE.BoxGeometry(depth * 0.01, height * 0.95, width * 0.32);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    if (false) {
                        //우측면 좌측 음영
                        originHelper.position.set(width / 2 - depth * 0.025, 0, depth / 2 - (depth * 0.12))
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(0x000000)
                        var tg = new THREE.BoxGeometry(depth * 0.04, height * 0.7, width * 0.15 * ratio);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        originHelper.position.set(width / 2 - depth * 0.025, 0, depth / 2 - (depth * 0.12))
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(0x000000)
                        var tg = new THREE.BoxGeometry(depth * 0.04, height * 0.5, width * 0.3 * ratio);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        // 우측화면(블랙)
                        // originHelper.position.set(depth / 2.05 - depth * 0.02, 0 + dify, 0 - depth / 8)
                        // originHelper.updateWorldMatrix(true, false);
                        // var tc = new THREE.Color(colorlst0[colornum0][idx])
                        // // var tc=new THREE.Color(0xD4DFD8)
                        // var tc1 = hexToHSL(colorlst0[colornum0][idx]);
                        // // tc.setHSL(tc1["h"], tc1["s"], tc1["l"]);
                        // var tg = new THREE.BoxGeometry(depth * 0.03, height * 0.8 * ratio, width * 0.9 * ratio);
                        // var rgb = tc.toArray().map(v => v * 255);
                        // var numVerts = geometry.getAttribute('position').count;
                        // var itemSize = 3; // r, g, b
                        // var colors = new Uint8Array(itemSize * numVerts);
                        // colors.forEach((v, ndx) => {
                        //     colors[ndx] = rgb[ndx % 3];
                        // });
                        // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        // tg.applyMatrix4(originHelper.matrixWorld);
                        // tg.setAttribute('color', colorAttrib);
                        // geoms.push(tg)
                        //우측화면(그레이)
                        originHelper.position.set(depth / 1.97 - depth * 0.025, height * 0.45 * ratio + dify, 0 - depth / 8)
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(0xB4AFA8)
                        var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.15 * ratio, width * 0.9 * ratio);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        originHelper.position.set(depth / 1.97 - depth * 0.025, -height * 0.45 * ratio + dify, 0 - depth / 8)
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(0xB4AFA8)
                        var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.15 * ratio, width * 0.9 * ratio);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        originHelper.position.set(depth / 1.97 - depth * 0.025, 0 + dify, (width * 0.45 + width * 0.03) * ratio - depth / 8)
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(0xB4AFA8)
                        var tg = new THREE.BoxGeometry(depth * 0.02, height * ratio * 1.05, width * 0.07 * ratio);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        originHelper.position.set(depth / 1.97 - depth * 0.025, 0 + dify, (-width * 0.45 - width * 0.03) * ratio - depth / 8)
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(0xB4AFA8)
                        var tg = new THREE.BoxGeometry(depth * 0.02, height * ratio * 1.05, width * 0.07 * ratio);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        //우측면 좌측 키(검정)
                        originHelper.position.set(depth / 1.9 - depth * 0.025, 0 - height * 0.38, width / 2.3)
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(colorlst[colornum][3])
                        var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.1 * ratio, height * 0.35 * ratio);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        originHelper.position.set(depth / 1.9 - depth * 0.025, 0 - height * 0.38, width / 2.9)
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(0xffffff)
                        var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.1 * ratio, height * 0.25 * ratio);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        //오른쪽 작은 박스혹
                        originHelper.position.set(width / 2 - depth * 0.025, height / 2 - ((height / 6) / 2) * 0.7, -depth / 3)
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(0xff0000)
                        var tg = new THREE.BoxGeometry(height * 0.2, (height / 6), height * 0.05);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        originHelper.position.set(width / 2 - depth * 0.025, height / 2 - ((height / 6) / 2) * 0.7, -depth / 3 + height * 0.05)
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(0xffffff)
                        var tg = new THREE.BoxGeometry(height * 0.2, (height / 6), height * 0.05);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        originHelper.position.set(width / 2 - depth * 0.025, height / 2 - ((height / 6) / 2) * 0.7, -depth / 3 + height * 0.1)
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(colorlst[colornum][3])
                        var tg = new THREE.BoxGeometry(height * 0.2, (height / 6), height * 0.05);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                        //뚜컹(카세트)
                        originHelper.position.set(0, height / 2 - height * 0.02, 0)
                        originHelper.updateWorldMatrix(true, false);
                        var tc = new THREE.Color(0xEfefef)
                        // var newcl=hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                        // var tc=new THREE.Color('hsl('+String(newcl["h"])+', '+String(newcl["s"]*0.65)+'%, '+String(newcl["l"]+25)+'%)');
                        var tg = new THREE.BoxGeometry(width * 0.98, height * 0.1, depth * 0.98);
                        var rgb = tc.toArray().map(v => v * 255);
                        var numVerts = geometry.getAttribute('position').count;
                        var itemSize = 3; // r, g, b
                        var colors = new Uint8Array(itemSize * numVerts);
                        colors.forEach((v, ndx) => {
                            colors[ndx] = rgb[ndx % 3];
                        });
                        var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                        tg.applyMatrix4(originHelper.matrixWorld);
                        tg.setAttribute('color', colorAttrib);
                        geoms.push(tg)
                    }
                    var mgeo2 = new BufferGeometryUtils.mergeGeometries(geoms, false);
                    var mesh2 = new THREE.Mesh(mgeo2, new THREE.MeshLambertMaterial({
                        vertexColors: true
                    }));
                    if (shadowon) {
                        mesh2.receiveShadow = true;
                        mesh2.castShadow = true;
                    }
                    mesh2.userData["1"] = true;
                    mesh2.userData["skin"] = "카세트";
                    mesh.add(mesh2);
                    var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0x00C85F
                    }));
                    mesh1.position.set(-bw / 4 + height * 0.3 * ratio, bh / 12 + dify * 3, depth / 2 - depth * 0.016)
                    mesh1.userData["1"] = true;
                    mesh1.userData["skin"] = "카세트";
                    mesh.add(mesh1)
                    var mesh2 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0x00C85F
                    }));
                    mesh2.position.set(-bw / 4 - height * 0.3 * ratio, bh / 12 + dify * 4, depth / 2 - depth * 0.016)
                    mesh2.userData["1"] = true;
                    mesh2.userData["skin"] = "카세트";
                    mesh.add(mesh2)
                    eye1.push([mesh1, mesh2])
                    var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0xF86F08,
                        visible: false
                    }));
                    mesh1.position.set(-bw / 4 + height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                    mesh1.userData["4"] = true;
                    mesh1.userData["skin"] = "카세트b";
                    mesh.add(mesh1)
                    var mesh2 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0xF86F08,
                        visible: false
                    }));
                    mesh2.position.set(-bw / 4 - height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                    mesh2.userData["4"] = true;
                    mesh2.userData["skin"] = "카세트b";
                    mesh.add(mesh2)
                    var mesh3 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.2 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0xF86F08,
                        visible: false
                    }));
                    mesh3.position.set(-bw / 4 + height * 0.3 * ratio, -height * 0.05 + dify * 2, depth / 2 - depth * 0.016)
                    mesh3.userData["4"] = true;
                    mesh3.userData["skin"] = "카세트b";
                    mesh.add(mesh3)
                    var mesh4 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.2 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0xF86F08,
                        visible: false
                    }));
                    mesh4.position.set(-bw / 4 - height * 0.3 * ratio, -height * 0.05 + dify * 2, depth / 2 - depth * 0.016)
                    mesh4.userData["4"] = true;
                    mesh4.userData["skin"] = "카세트b";
                    mesh.add(mesh4)
                    eye2.push([mesh1, mesh2, mesh3, mesh4])
                    var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.4 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0x00C85F
                    }));
                    mesh1.position.set(-bw / 4, 0 - height * 0.01, depth / 2 - depth * 0.016)
                    mesh1.userData["1"] = true;
                    mesh1.userData["skin"] = "카세트";
                    mesh.add(mesh1)
                    mouth1.push(mesh1)
                    var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0xFFA401,
                        visible: false
                    }));
                    mesh1.position.set(-bw / 4, 0 - height * 0.01, depth / 2 - depth * 0.016)
                    mesh1.userData["4"] = true;
                    mesh1.userData["skin"] = "카세트b";
                    mesh.add(mesh1)
                    mouth2.push(mesh1)
                    // originHelper.position.set(0,height/2-height*0.02,0)
                    // originHelper.updateWorldMatrix(true, false);
                    // // var tc=new THREE.Color(0xffffff)
                    // var newcl=hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                    // var tc=new THREE.Color('hsl('+String(newcl["h"])+', '+String(newcl["s"]*0.65)+'%, '+String(newcl["l"]+25)+'%)');
                    // var tg=new THREE.BoxGeometry(width*0.93, height*0.1, depth*0.95);
                    var geometry = new THREE.BoxGeometry(width * 0.98, height * 0.1, depth * 0.98);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.75) + '%, ' + String(newcl["l"] * 1.25) + '%)');
                    var mesh1 = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({
                        color: tc
                    }));
                    mesh1.position.set(0, height / 2 - height * 0.02, 0);
                    // mesh1.userData["bottom"]=true;
                    mesh1.userData["skin"] = "1"
                    mesh1.userData["skintype"] =1;
                    clmeshlst1[idx].push(mesh1.material)
                    mesh.add(mesh1);
                    var geometry = new THREE.BoxGeometry(width * 0.93, height * 0.1, depth * 0.95);
                    var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                    var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.75) + '%, ' + String(newcl["l"] * 1.25) + '%)');
                    var mesh1 = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({
                        color: tc
                    }));
                    mesh1.position.set(0, height / 2 - height * 0.02, 0)
                    // mesh1.userData["bottom"]=true;
                    mesh1.userData["skin"] = "카세트"
                    mesh1.userData["skintype"] =1;
                    clmeshlst1[idx].push(mesh1.material)
                    mesh.add(mesh1);
                }
                var geoms = [];
                if (true) {
                    //음영
                    originHelper.position.set(0, -bh / 2 + (height * 0.25 * ratio) / 1.96, depth / 2.01 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0x000000)
                    var tg = new THREE.BoxGeometry(width * 0.93 * ratio, height * 0.25 * ratio, depth * 0.03);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //음영좌측슬릿
                    originHelper.position.set(-bw / 2 + width * 0.1 * ratio, -bh / 4.05, depth / 2 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0x000000)
                    var tg = new THREE.BoxGeometry(width * 0.2 * ratio, height * 0.5, depth * 0.04);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //우측면 좌측 음영
                    originHelper.position.set(width / 2 - depth * 0.025, 0, depth / 2 - (depth * 0.12))
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0x000000)
                    var tg = new THREE.BoxGeometry(depth * 0.04, height * 0.7, width * 0.15 * ratio);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 2 - depth * 0.025, 0, depth / 2 - (depth * 0.12))
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0x000000)
                    var tg = new THREE.BoxGeometry(depth * 0.04, height * 0.5, width * 0.3 * ratio);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //화면(블랙)
                    originHelper.position.set(0, 0 + dify, depth / 2.05 - depth * 0.015)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0x003E00)
                    var tg = new THREE.BoxGeometry(width * 0.8 * ratio, height * 0.7 * ratio, depth * 0.03);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //화면(그레이)
                    originHelper.position.set(0, height * 0.35 * ratio + dify, depth / 1.97 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(width * 0.8 * ratio, height * 0.15 * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(0, -height * 0.35 * ratio + dify, depth / 1.97 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(width * 0.8 * ratio, height * 0.15 * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set((width * 0.4 + width * 0.05) * ratio, 0 + dify, depth / 1.97 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(width * 0.1 * ratio, height * 0.85 * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set((-width * 0.4 - width * 0.05) * ratio, 0 + dify, depth / 1.97 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(width * 0.1 * ratio, height * 0.85 * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    // 우측화면(블랙)

                    //우측화면(그레이)
                    originHelper.position.set(depth / 1.97 - depth * 0.025, height * 0.45 * ratio + dify, 0 - depth / 8)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.15 * ratio, width * 0.9 * ratio);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(depth / 1.97 - depth * 0.025, -height * 0.45 * ratio + dify, 0 - depth / 8)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.15 * ratio, width * 0.9 * ratio);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(depth / 1.97 - depth * 0.025, 0 + dify, (width * 0.45 + width * 0.03) * ratio - depth / 8)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(depth * 0.02, height * ratio * 1.05, width * 0.07 * ratio);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(depth / 1.97 - depth * 0.025, 0 + dify, (-width * 0.45 - width * 0.03) * ratio - depth / 8)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xB4AFA8)
                    var tg = new THREE.BoxGeometry(depth * 0.02, height * ratio * 1.05, width * 0.07 * ratio);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //방향키
                    originHelper.position.set(-width / 2.3, 0 + height * 0.1, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0x50585F)
                    var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.4 * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(-width / 2.3, 0 + height * 0.1, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0x50585F)
                    var tg = new THREE.BoxGeometry(height * 0.4 * ratio, height * 0.2 * ratio, depth * 0.02);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //우측 키
                    originHelper.position.set(width / 2.2, 0 + height * 0.15, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst[colornum][1])
                    var tg = new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.3 * ratio, depth * 0.036);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    // mouth1.push(mesh1)
                    originHelper.position.set(width / 2.6, 0 - height * 0.15, depth / 1.9 - depth * 0.025)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst[colornum][2])
                    var tg = new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.3 * ratio, depth * 0.036);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    //우측면 좌측 키(검정)
                    originHelper.position.set(depth / 1.9 - depth * 0.025, 0 - height * 0.38, width / 2.3)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst[colornum][3])
                    var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.1 * ratio, height * 0.35 * ratio);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(depth / 1.9 - depth * 0.025, 0 - height * 0.38, width / 2.9)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xffffff)
                    var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.1 * ratio, height * 0.25 * ratio);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    // //우측 키(검정)
                    // originHelper.position.set(width / 2.57, 0 + height * 0.38, depth / 1.9 - depth * 0.025)
                    // originHelper.updateWorldMatrix(true, false);
                    // var tc = new THREE.Color(0x20282F)
                    // var tg = new THREE.BoxGeometry(height * 0.35 * ratio, height * 0.1 * ratio, depth * 0.02);
                    // var rgb = tc.toArray().map(v => v * 255);
                    // var numVerts = geometry.getAttribute('position').count;
                    // var itemSize = 3; // r, g, b
                    // var colors = new Uint8Array(itemSize * numVerts);
                    // colors.forEach((v, ndx) => {
                    //     colors[ndx] = rgb[ndx % 3];
                    // });
                    // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    // tg.applyMatrix4(originHelper.matrixWorld);
                    // tg.setAttribute('color', colorAttrib);
                    // geoms.push(tg)
                    // originHelper.position.set(width / 2.13, 0 + height * 0.38, depth / 1.9 - depth * 0.025)
                    // originHelper.updateWorldMatrix(true, false);
                    // var tc = new THREE.Color(0x20282F)
                    // var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.1 * ratio, depth * 0.02);
                    // var rgb = tc.toArray().map(v => v * 255);
                    // var numVerts = geometry.getAttribute('position').count;
                    // var itemSize = 3; // r, g, b
                    // var colors = new Uint8Array(itemSize * numVerts);
                    // colors.forEach((v, ndx) => {
                    //     colors[ndx] = rgb[ndx % 3];
                    // });
                    // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    // tg.applyMatrix4(originHelper.matrixWorld);
                    // tg.setAttribute('color', colorAttrib);
                    // geoms.push(tg)
                    // //좌측 키(검정)
                    // originHelper.position.set(-width / 2.57, 0 + height * 0.38, depth / 1.9 - depth * 0.025)
                    // originHelper.updateWorldMatrix(true, false);
                    // var tc = new THREE.Color(0x20282F)
                    // var tg = new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.1 * ratio, depth * 0.02);
                    // var rgb = tc.toArray().map(v => v * 255);
                    // var numVerts = geometry.getAttribute('position').count;
                    // var itemSize = 3; // r, g, b
                    // var colors = new Uint8Array(itemSize * numVerts);
                    // colors.forEach((v, ndx) => {
                    //     colors[ndx] = rgb[ndx % 3];
                    // });
                    // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    // tg.applyMatrix4(originHelper.matrixWorld);
                    // tg.setAttribute('color', colorAttrib);
                    // geoms.push(tg)
                    // originHelper.position.set(-width / 2.13, 0 + height * 0.38, depth / 1.9 - depth * 0.025)
                    // originHelper.updateWorldMatrix(true, false);
                    // var tc = new THREE.Color(0x20282F)
                    // var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.1 * ratio, depth * 0.02);
                    // var rgb = tc.toArray().map(v => v * 255);
                    // var numVerts = geometry.getAttribute('position').count;
                    // var itemSize = 3; // r, g, b
                    // var colors = new Uint8Array(itemSize * numVerts);
                    // colors.forEach((v, ndx) => {
                    //     colors[ndx] = rgb[ndx % 3];
                    // });
                    // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    // tg.applyMatrix4(originHelper.matrixWorld);
                    // tg.setAttribute('color', colorAttrib);
                    // geoms.push(tg)
                    //뚜껑
                    // originHelper.position.set(0,height/2-height*0.02,0)
                    // originHelper.updateWorldMatrix(true, false);
                    // // var tc=new THREE.Color(0xffffff)
                    // var newcl=hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                    // var tc=new THREE.Color('hsl('+String(newcl["h"])+', '+String(newcl["s"]*0.65)+'%, '+String(newcl["l"]+25)+'%)');
                    // var tg=new THREE.BoxGeometry(width*0.98, height*0.1, depth*0.98);
                    // var rgb = tc.toArray().map(v => v * 255);
                    // var numVerts = geometry.getAttribute('position').count;
                    // var itemSize = 3;  // r, g, b
                    // var colors = new Uint8Array(itemSize * numVerts);
                    // colors.forEach((v, ndx) => {
                    //   colors[ndx] = rgb[ndx % 3];
                    // });
                    // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    // tg.applyMatrix4(originHelper.matrixWorld);
                    // tg.setAttribute('color', colorAttrib);
                    // geoms.push(tg)
                    //오른쪽 작은 박스혹
                    originHelper.position.set(width / 2 - depth * 0.025, height / 2 - ((height / 6) / 2) * 0.7, -depth / 3)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xff0000)
                    var tg = new THREE.BoxGeometry(height * 0.2, (height / 6), height * 0.05);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 2 - depth * 0.025, height / 2 - ((height / 6) / 2) * 0.7, -depth / 3 + height * 0.05)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(0xffffff)
                    var tg = new THREE.BoxGeometry(height * 0.2, (height / 6), height * 0.05);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    originHelper.position.set(width / 2 - depth * 0.025, height / 2 - ((height / 6) / 2) * 0.7, -depth / 3 + height * 0.1)
                    originHelper.updateWorldMatrix(true, false);
                    var tc = new THREE.Color(colorlst[colornum][3])
                    var tg = new THREE.BoxGeometry(height * 0.2, (height / 6), height * 0.05);
                    var rgb = tc.toArray().map(v => v * 255);
                    var numVerts = geometry.getAttribute('position').count;
                    var itemSize = 3; // r, g, b
                    var colors = new Uint8Array(itemSize * numVerts);
                    colors.forEach((v, ndx) => {
                        colors[ndx] = rgb[ndx % 3];
                    });
                    var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    tg.setAttribute('color', colorAttrib);
                    geoms.push(tg)
                    var mgeo2 = new BufferGeometryUtils.mergeGeometries(geoms, false);
                    var mesh2 = new THREE.Mesh(mgeo2, new THREE.MeshLambertMaterial({
                        vertexColors: true
                    }));
                    if (shadowon) {
                        mesh2.receiveShadow = true;
                        mesh2.castShadow = true;
                    }
                    mesh2.userData["1"] = true;
                    mesh2.userData["skin"] = "1";
                    mesh.add(mesh2);
                    var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0x00C85F
                    }));
                    mesh1.position.set(height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                    mesh1.userData["1"] = true;
                    mesh1.userData["skin"] = "1";
                    mesh.add(mesh1)
                    var mesh2 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0x00C85F
                    }));
                    mesh2.position.set(-height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                    mesh2.userData["1"] = true;
                    mesh2.userData["skin"] = "1";
                    mesh.add(mesh2)
                    eye1.push([mesh1, mesh2])
                    var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0xF86F08,
                        visible: false
                    }));
                    mesh1.position.set(height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                    mesh1.userData["4"] = true;
                    mesh1.userData["skin"] = "1b";
                    mesh.add(mesh1)
                    var mesh2 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0xF86F08,
                        visible: false
                    }));
                    mesh2.position.set(-height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                    mesh2.userData["4"] = true;
                    mesh2.userData["skin"] = "1b";
                    mesh.add(mesh2)
                    var mesh3 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.2 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0xF86F08,
                        visible: false
                    }));
                    mesh3.position.set(height * 0.3 * ratio, -height * 0.05 + dify * 2, depth / 2 - depth * 0.016)
                    mesh3.userData["4"] = true;
                    mesh3.userData["skin"] = "1b";
                    mesh.add(mesh3)
                    var mesh4 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.2 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0xF86F08,
                        visible: false
                    }));
                    mesh4.position.set(-height * 0.3 * ratio, -height * 0.05 + dify * 2, depth / 2 - depth * 0.016)
                    mesh4.userData["4"] = true;
                    mesh4.userData["skin"] = "1b";
                    mesh.add(mesh4)
                    eye2.push([mesh1, mesh2, mesh3, mesh4])
                    var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.4 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0x00C85F
                    }));
                    mesh1.position.set(0, 0 - height * 0.1, depth / 2 - depth * 0.016)
                    mesh1.userData["1"] = true;
                    mesh1.userData["skin"] = "1";
                    mesh.add(mesh1)
                    mouth1.push(mesh1)
                    var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                        color: 0xFFA401,
                        visible: false
                    }));
                    mesh1.position.set(0, 0 - height * 0.1, depth / 2 - depth * 0.016)
                    mesh1.userData["4"] = true;
                    mesh1.userData["skin"] = "1b";
                    mesh.add(mesh1)
                    mouth2.push(mesh1)
                }
            }
            let originHelper = new THREE.Object3D();
            var geoms = [];
            for (let row = 0; row < 칸; row++) {
                for (let col = 0; col < 칸; col++) {
                    originHelper.position.set(
                        0 - bw / 2 + tw / 2 + col * tw,
                        -th / 2,
                        0 - bw / 2 + tw / 2 + row * tw,
                    );
                    originHelper.updateWorldMatrix(true, false);
                    var tg = new THREE.BoxGeometry(tw * 0.9, th / 3.2, tw * 0.9);
                    tg.applyMatrix4(originHelper.matrixWorld);
                    geoms.push(tg)
                }
            }
            var mgeo = new BufferGeometryUtils.mergeGeometries(
                geoms, false);
            var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
            var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] * 1) + '%)');
            var mesh1 = new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({
                color: tc
            }));
            mesh1.userData["bottom"] = true;
            mesh1.userData["skin"] = "bottom"
            mesh1.userData["skintype"] =1;
            clmeshlst[idx].push(mesh1.material)
            mesh.add(mesh1);



            //우측출력
            var mesh1 = new THREE.Mesh(new THREE.PlaneGeometry(width * 0.9 * ratio, height * 0.8 * ratio), new THREE.MeshLambertMaterial({
                color: 0x000000,
                opacity: 1,
                transparent: true
            }), );
            mesh1.position.set(depth / 1.99 - depth * 0.015, 0 + dify, 0 - depth / 8)
            mesh1.rotation.y = Math.PI / 2
            mesh1.userData["1"] = true;
            mesh1.userData["2"] = true;
            mesh1.userData["skin"] = "text1";

            clmeshlst1[idx].push(mesh1.material)
            // mesh1.userData["3"]=true;
            mesh.add(mesh1)
            txts.push(mesh1)

            // 우측출력 음영
            var mesh1 = new THREE.Mesh(new THREE.PlaneGeometry(width * 0.9 * ratio, height * 0.8 * ratio), new THREE.MeshBasicMaterial({
                color: 0xaaaaaa,
                opacity: 0.3,
                transparent: true
            }), );
            mesh1.position.set(depth/2 - depth * 0.016, 0 + dify, 0 - depth / 8)
            mesh1.rotation.y = Math.PI / 2
            // mesh1.userData["3"]=true;
            mesh1.userData["skin"] = "txtback1";

            mesh.position.set(0, y, 0);
            mesh.material.visible = true;
            // clmeshlst2[idx].push(mesh1.material)
            mesh.add(mesh1)


            if (shadowon) {
                mesh.receiveShadow = true;
                mesh.castShadow = true;
            }

            scene.add(mesh);



            const shape = new CANNON.Box(new CANNON.Vec3(width / 2, height / 2, depth / 2));
            // const cylinderShape = new CANNON.Cylinder(width, width, bh, 16);
            // const shape2 = new CANNON.Cylinder(width,width,height,1)
            const customMaterial = new CANNON.Material('customMaterial');
            customMaterial.friction = 0.2; // Friction coefficient, range: 0-1
            customMaterial.restitution = 0.4; // Restitution (elasticity), range: 0-1
            if (stage3) {
                customMaterial.friction = 0.3
            }
            const body = new CANNON.Body({
                mass: 3,
                shape: shape,
                material: customMaterial,
                allowSleep: true,
                sleepSpeedLimit: 100,
                sleepTimeLimit: 0
            });
            body.position.set(0, y, 0);
            world.addBody(body);

            if (game2048) {
                const boardSize = game2048.size;
                const tileSize = width / boardSize;

            }
            return {
                mesh: mesh,
                body: body
            };
        }
        var arrows = [];
        var axis = [];

        function tsetting(callback) {
            for (let i = 0; i < 11; i++) {
                let j = Math.pow(2, i + 1)
                createTile(5, th * 0.6, tw, String(j), (tile) => {
                    tile.position.set(
                        0,
                        0,
                        0
                    );
                    createTextMesh(String(j), bw / 8, (textMesh) => {
                        textMesh.position.y = +(th / 32)
                        textMesh.position.z += th / 2;
                        textMesh.rotation.order = 'YXZ';
                        textMesh.rotation.x = -Math.PI / 2;
                        textMesh.userData["text"] = String(j)
                        textmold.push(textMesh);
                        tile.userData["text"] = String(j)
                        tile.userData["skin"] = "tile"
                        // tile.userData["time"]=elapsedTime;
                        // tile.userData["merge"]=0;
                        tile.add(textMesh);
                        tilemold.push(tile);
                    });
                });
            }
            if (callback) {
                callback();
            }
        }

        function msetting(callback) {
            // for(let i=0;i<6;i++){
            // 	var sdickeys=Object.keys(soundic);
            // 	if(sdickeys.indexOf(sdic[i][0])==-1){
            // 		audioLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/'+sdic[i][0], function( buffer )
            // 		{
            // 			var sound = new THREE.Audio( listener );
            // 			sound.setBuffer( buffer );
            // 			sound.setVolume( 0.3 );
            // 			sound.setLoop( true );
            // 			soundic[sdic[i][0]]=sound;
            // 		});
            // 	}
            // }
            if (callback) {
                callback();
            }
        }

        function msetting2(callback) {
            for (let i = 0; i < 6; i++) {
                let temp = [0, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, "up", "down", "left", "right", "upper", "lower"]
                var sdickeys = Object.keys(soundic);
                for (let j = 1; j < temp.length; j++) {
                    if (sdickeys.indexOf(sdic[i][temp[j]]) == -1) {
                        // var listener = new THREE.AudioListener();
                        // var audioLoader = new THREE.AudioLoader();
                        audioLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/sound/' + sdic[i][temp[j]], function(buffer) {
                            var sound = new THREE.Audio(listener);
                            sound.setBuffer(buffer);
                            sound.setVolume(0.3);
                            soundic[sdic[i][temp[j]]] = sound;
                        });
                    }
                }
            }
            if (callback) {
                callback();
            }
        }

        function msetting0(callback) {

            for (let i = 0; i < 6; i++) {
                let temp = [0, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, "up", "down", "left", "right", "upper", "lower"]
                var sdickeys = Object.keys(soundic);
                for (let j = 0; j < temp.length; j++) {
                    if (sdickeys.indexOf(sdic[i][temp[j]]) == -1) {
                        // var listener = new THREE.AudioListener();
                        // var audioLoader = new THREE.AudioLoader();
                        audioLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/sound/' + sdic[i][temp[j]], function(buffer) {
                            var sound = new THREE.Audio(listener);
                            sound.setBuffer(buffer);
                            sound.setVolume(0.4);
                            if (j == 0) sound.setLoop(true);
                            soundic[sdic[i][temp[j]]] = sound;


                        });
                    }else{
                      soundic[sdic[i][temp[j]]].setVolume(0.4)
                    }
                }
            }

            for (let j = 0; j < esound.length; j++) {
                if (sdickeys.indexOf(esound[j]) == -1) {
                    // var listener = new THREE.AudioListener();
                    // var audioLoader = new THREE.AudioLoader();
                    audioLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/sound/' + esound[j], function(buffer) {
                        var sound = new THREE.Audio(listener);
                        sound.setBuffer(buffer);
                        sound.setVolume(0.3);
                        soundic[esound[j]] = sound;


                    });
                }
            }

            if (callback) {
                callback();
            }
        }

        function txtsetting(callback) {
            //그라디
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            canvas.width = 100;
            canvas.height = 100;
            var grd = ctx.createLinearGradient(0, 0, 0, 100);
            // var hex=colorlst0[colornum0][0].toString(16);
            // if(hex.length==5) hex+="0"
            // grd.addColorStop(0, hexToHtmlColor(colorlst0[colornum0][0]));
            grd.addColorStop(0, "white");
            // grd.addColorStop(1, hexToHtmlColor(colorlst[colornum][0]));
            // grd.addColorStop(0, hexToHtmlColor(colorlst[colornum0][4]));
            // grd.addColorStop(0, hexToHtmlColor(colorlst[colornum][3]));
            grd.addColorStop(0.3, hexToHtmlColor(colorlst[colornum][1]));
            // grd.addColorStop(0.33, "white");
            grd.addColorStop(0.45, hexToHtmlColor(colorlst[colornum][0]));
            grd.addColorStop(1, hexToHtmlColor(colorlst[colornum][0]));
            ctx.fillStyle = grd;
            ctx.fillRect(0, 0, 100, 100);
            var img3 = new THREE.CanvasTexture(canvas);
            // scene.background = img3;
            var material4 = new THREE.MeshBasicMaterial({
                map: img3,
                transparent: true,
                opacity: 1
            });

            var material5 = new THREE.MeshBasicMaterial({
                map: img3,
                transparent: true,
                opacity: 1
            });


            var geometry = new THREE.BoxGeometry(1000, 300, 2);
            var backmesh = new THREE.Mesh(geometry, material4);
            // backmesh.material.depthTest = false;
            backmesh.material.depthWrite = false;
            backmesh.rotation.order = 'YXZ';
            backmesh.rotation.x = -Math.PI / 4;
            backmesh.rotation.y = Math.PI / 4;
            // backmesh.rotation.x = Math.PI/2;
            // backmesh.rotation.z = Math.PI/2;
            backmesh.position.z = -20;
            backmesh.position.x = -40;
            backmesh.position.y = -40;
            scene.add(backmesh);
            gradback.push(backmesh);


            var submat = new THREE.MeshLambertMaterial({
                color: colorlst[colornum][0],
                visible: true,
                opacity: 0.04,
                transparent: true
            });

            var geometry = new THREE.BoxGeometry(60, 500, 2);
            var backmesh = new THREE.Mesh(geometry, material5);
            // backmesh.material.depthTest = false;
            backmesh.material.depthWrite = false;
            backmesh.rotation.order = 'YXZ';
            backmesh.rotation.x = 0;
            // backmesh.rotation.y = Math.PI /2;
            // backmesh.rotation.x = Math.PI/2;
            // backmesh.rotation.z = Math.PI/2;
            backmesh.position.z = -20;
            backmesh.position.x = 0;
            backmesh.position.y = 100;

            scene.add(backmesh);
            sideback.push(backmesh)

            var geometry = new THREE.BoxGeometry(60, 500, 2);
            var backmesh = new THREE.Mesh(geometry, submat);
            // backmesh.material.depthTest = false;
            backmesh.material.depthWrite = false;
            backmesh.rotation.order = 'YXZ';
            backmesh.rotation.x = 0;
            // backmesh.rotation.y = Math.PI /2;
            // backmesh.rotation.x = Math.PI/2;
            // backmesh.rotation.z = Math.PI/2;
            backmesh.position.z = -18;
            backmesh.position.x = 0;
            backmesh.position.y = 120;

            scene.add(backmesh);
            sideback.push(backmesh)




            var geometry = new THREE.BoxGeometry(60, 500, 2);
            var backmesh = new THREE.Mesh(geometry, material5);
            // backmesh.material.depthTest = false;
            backmesh.material.depthWrite = false;
            backmesh.rotation.order = 'YXZ';
            backmesh.rotation.x = 0;
            backmesh.rotation.y = -Math.PI /2;
            // backmesh.rotation.x = Math.PI/2;
            // backmesh.rotation.z = Math.PI/2;
            backmesh.position.z = 0;
            backmesh.position.x = -30;
            backmesh.position.y = 100;

            scene.add(backmesh);
            sideback.push(backmesh)

            var geometry = new THREE.BoxGeometry(60, 500, 2);
            var backmesh = new THREE.Mesh(geometry, submat);
            // backmesh.material.depthTest = false;
            backmesh.material.depthWrite = false;
            backmesh.rotation.order = 'YXZ';
            backmesh.rotation.x = 0;
            backmesh.rotation.y = -Math.PI /2;
            // backmesh.rotation.x = Math.PI/2;
            // backmesh.rotation.z = Math.PI/2;
            backmesh.position.z = 0;
            backmesh.position.x = -28;
            backmesh.position.y = 120;

            scene.add(backmesh);
            sideback.push(backmesh)





            var geometry12 = new TextGeometry("2", {
                font: font0,
                size: bw / 2,
                height: 두께*th / 2
            });
            geometry12.computeBoundingBox();
            geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
            var material = new THREE.MeshBasicMaterial({
                color: colorlst[colornum][3]
            });
            var tmesh = new THREE.Mesh(geometry12, material);

            if(gamemod==2){
              tmesh.position.y = cubes[0].body.position.y+8
            }else{
              tmesh.position.y = cubes[0].body.position.y + 12
            }
            tmesh.position.x = bw * (-0.05)
            tmesh.position.z = bw * (1.2)
            // textMesh.position.x=0;
            tmesh.depth = 10;
            tmesh.rotation.order = 'YXZ';
            tmesh.rotation.y = Math.PI / 4;
            var geometry12 = new TextGeometry("0", {
                font: font0,
                size: bw / 2,
                height: 두께*th / 2
            });
            geometry12.computeBoundingBox();
            geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
            var material = new THREE.MeshBasicMaterial({
                color: colorlst[colornum][2]
            });
            var tmesh1 = new THREE.Mesh(geometry12, material);
            // tmesh1.position.y
            tmesh1.position.x = 4.8;
            tmesh1.depth = 10;
            tmesh1.rotation.order = 'YXZ';
            // tmesh1.rotation.y =Math.PI / 4;
            tmesh.add(tmesh1)
            var geometry12 = new TextGeometry("4", {
                font: font0,
                size: bw / 2,
                height: 두께*th / 2
            });
            geometry12.computeBoundingBox();
            geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
            var material = new THREE.MeshBasicMaterial({
                color: colorlst[colornum][1]
            });
            var tmesh1 = new THREE.Mesh(geometry12, material);
            // tmesh1.position.y
            tmesh1.position.x = 4.8 * 2;
            tmesh1.depth = 10;
            tmesh1.rotation.order = 'YXZ';
            // tmesh1.rotation.y =Math.PI / 4;
            tmesh.add(tmesh1)
            var geometry12 = new TextGeometry("8", {
                font: font0,
                size: bw / 2,
                height: 두께*th / 2
            });
            geometry12.computeBoundingBox();
            geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
            var material = new THREE.MeshBasicMaterial({
                color: colorlst[colornum][0]
            });
            var tmesh1 = new THREE.Mesh(geometry12, material);
            // tmesh1.position.y
            tmesh1.position.x = 4.8 * 3;
            tmesh1.depth = 10;
            tmesh1.rotation.order = 'YXZ';
            // tmesh1.rotation.y =Math.PI / 4;
            tmesh.rotation.order = 'YXZ';
            tmesh.rotation.y = Math.PI / 1000;
            tmesh.add(tmesh1)
            gradback.push(tmesh);
            scene.add(tmesh)

            if(gamemod==1){
              var geometry12 = new TextGeometry("HARD", {
                  font: font0,
                  size: bw / 4,
                  height: 두께*th / 2
              });
              geometry12.computeBoundingBox();
              geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
              var material = new THREE.MeshBasicMaterial({
                  color: colorlst[colornum][1]
              });
              var tmesh = new THREE.Mesh(geometry12, material);
              tmesh.position.y = cubes[2].body.position.y + 10
              tmesh.position.x = bw * (1.1)
              tmesh.position.z = bw * (0.58)
              // textMesh.position.x=0;
              tmesh.depth = 10;
              tmesh.rotation.order = 'YXZ';
              tmesh.rotation.y = Math.PI / 4;

              // var geometry12 = new TextGeometry("A", {
              //     font: font0,
              //     size: bw / 4,
              //     height: 두께*th / 2
              // });
              // geometry12.computeBoundingBox();
              // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
              // var material = new THREE.MeshBasicMaterial({
              //     color: colorlst0[colornum0][1]
              // });
              // var tmesh1 = new THREE.Mesh(geometry12, material);
              // // tmesh1.position.y
              // tmesh1.position.x = 3;
              // tmesh1.depth = 10;
              // tmesh1.rotation.order = 'YXZ';
              // // tmesh1.rotation.y =Math.PI / 4;
              // tmesh.add(tmesh1)
              // var geometry12 = new TextGeometry("R", {
              //     font: font0,
              //     size: bw / 4,
              //     height: 두께*th / 2
              // });
              // geometry12.computeBoundingBox();
              // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
              // var material = new THREE.MeshBasicMaterial({
              //     color: colorlst0[colornum0][2]
              // });
              // var tmesh1 = new THREE.Mesh(geometry12, material);
              // // tmesh1.position.y
              // tmesh1.position.x = 3 * 2;
              // tmesh1.depth = 10;
              // tmesh1.rotation.order = 'YXZ';
              // // tmesh1.rotation.y =Math.PI / 4;
              // tmesh.add(tmesh1)
              // var geometry12 = new TextGeometry("D", {
              //     font: font0,
              //     size: bw / 4,
              //     height: 두께*th / 2
              // });
              // geometry12.computeBoundingBox();
              // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
              // var material = new THREE.MeshBasicMaterial({
              //     color: colorlst0[colornum0][3]
              // });
              // var tmesh1 = new THREE.Mesh(geometry12, material);
              // // tmesh1.position.y
              // tmesh1.position.x = 3 * 3;
              // tmesh1.depth = 10;
              // tmesh1.rotation.order = 'YXZ';

              tmesh.rotation.order = 'YXZ';
              tmesh.rotation.y = Math.PI / 2;
              // tmesh.add(tmesh1)

              textscene.push(tmesh)
              gradback.push(tmesh);
              scene.add(tmesh)
            }

            if(gamemod==2){
              var geometry12 = new TextGeometry("STACK", {
                  font: font0,
                  size: bw / 4,
                  height: 두께*th / 2
              });
              geometry12.computeBoundingBox();
              geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
              var material = new THREE.MeshBasicMaterial({
                  color: colorlst0[colornum0][0]
              });
              var tmesh = new THREE.Mesh(geometry12, material);
              tmesh.position.y = cubes[2].body.position.y + 11-4
              tmesh.position.x = bw * (1.1)
              tmesh.position.z = bw * (0.47)
              // textMesh.position.x=0;
              tmesh.depth = 10;
              tmesh.rotation.order = 'YXZ';
              tmesh.rotation.y = Math.PI / 4;
              tmesh.rotation.order = 'YXZ';
              tmesh.rotation.y = Math.PI / 2;

              // var geometry12 = new TextGeometry("T", {
              //     font: font0,
              //     size: bw / 4,
              //     height: 두께*th / 2
              // });
              // geometry12.computeBoundingBox();
              // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
              // var material = new THREE.MeshBasicMaterial({
              //     color: colorlst0[colornum0][1]
              // });
              // var tmesh1 = new THREE.Mesh(geometry12, material);
              // // tmesh1.position.y
              // tmesh1.position.x = 3;
              // tmesh1.depth = 10;
              // tmesh1.rotation.order = 'YXZ';
              // // tmesh1.rotation.y =Math.PI / 4;
              // tmesh.add(tmesh1)
              // var geometry12 = new TextGeometry("A", {
              //     font: font0,
              //     size: bw / 4,
              //     height: 두께*th / 2
              // });
              // geometry12.computeBoundingBox();
              // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
              // var material = new THREE.MeshBasicMaterial({
              //     color: colorlst0[colornum0][2]
              // });
              // var tmesh1 = new THREE.Mesh(geometry12, material);
              // // tmesh1.position.y
              // tmesh1.position.x = 3 * 2;
              // tmesh1.depth = 10;
              // tmesh1.rotation.order = 'YXZ';
              // // tmesh1.rotation.y =Math.PI / 4;
              // tmesh.add(tmesh1)
              // var geometry12 = new TextGeometry("C", {
              //     font: font0,
              //     size: bw / 4,
              //     height: 두께*th / 2
              // });
              // geometry12.computeBoundingBox();
              // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
              // var material = new THREE.MeshBasicMaterial({
              //     color: colorlst0[colornum0][3]
              // });
              // var tmesh1 = new THREE.Mesh(geometry12, material);
              // // tmesh1.position.y
              // tmesh1.position.x = 3 * 2.9;
              // tmesh1.depth = 10;
              // tmesh1.rotation.order = 'YXZ';
              // tmesh.rotation.order = 'YXZ';
              // tmesh.rotation.y = Math.PI / 2;
              // tmesh.add(tmesh1)
              //
              // var geometry12 = new TextGeometry("K", {
              //     font: font0,
              //     size: bw / 4,
              //     height: 두께*th / 2
              // });
              // geometry12.computeBoundingBox();
              // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
              // var material = new THREE.MeshBasicMaterial({
              //     color: colorlst0[colornum0][4]
              // });
              // var tmesh1 = new THREE.Mesh(geometry12, material);
              // // tmesh1.position.y
              // tmesh1.position.x = 3 * 4;
              // tmesh1.depth = 10;
              // tmesh1.rotation.order = 'YXZ';
              // // tmesh1.rotation.y =Math.PI / 4;
              // tmesh.add(tmesh1)


              textscene.push(tmesh)
              gradback.push(tmesh);
              scene.add(tmesh)
          }
            var geometry12 = new TextGeometry("B", {
                font: font0,
                size: bw / 2,
                height: 두께*th / 2
            });
            geometry12.computeBoundingBox();
            geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
            var material = new THREE.MeshBasicMaterial({
                color: colorlst0[colornum0][3]
            });
            var tmesh = new THREE.Mesh(geometry12, material);
            if(gamemod==2){
              tmesh.position.y = cubes[0].body.position.y+8
            }else{
              tmesh.position.y = cubes[0].body.position.y + 12
            }

            tmesh.position.x = bw * (1.2)
            tmesh.position.z = bw * (1)
            // textMesh.position.x=0;
            tmesh.depth = 10;
            tmesh.rotation.order = 'YXZ';
            tmesh.rotation.y = Math.PI / 4;

            var geometry12 = new TextGeometry("R", {
                font: font0,
                size: bw / 2,
                height: 두께*th / 2
            });
            geometry12.computeBoundingBox();
            geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
            var material = new THREE.MeshBasicMaterial({
                color: colorlst0[colornum0][2]
            });
            var tmesh1 = new THREE.Mesh(geometry12, material);
            // tmesh1.position.y
            tmesh1.position.x = 4.75;
            tmesh1.depth = 10;
            tmesh1.rotation.order = 'YXZ';
            // tmesh1.rotation.y =Math.PI / 4;
            tmesh.add(tmesh1)

            var geometry12 = new TextGeometry("I", {
                font: font0,
                size: bw / 2,
                height: 두께*th / 2
            });
            geometry12.computeBoundingBox();
            geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
            var material = new THREE.MeshBasicMaterial({
                color: colorlst0[colornum0][1]
            });
            var tmesh1 = new THREE.Mesh(geometry12, material);
            // tmesh1.position.y
            tmesh1.position.x = 4.7 * 1.94;
            tmesh1.depth = 10;
            tmesh1.rotation.order = 'YXZ';
            // tmesh1.rotation.y =Math.PI / 4;
            tmesh.add(tmesh1)
            var geometry12 = new TextGeometry("X", {
                font: font0,
                size: bw / 2,
                height: 두께*th / 2
            });
            geometry12.computeBoundingBox();
            geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
            var material = new THREE.MeshBasicMaterial({
                color: colorlst0[colornum0][0]
            });
            var tmesh1 = new THREE.Mesh(geometry12, material);
            // tmesh1.position.y
            tmesh1.position.x = 4.7 * 3;
            tmesh1.depth = 10;
            tmesh1.rotation.order = 'YXZ';
            tmesh.rotation.order = 'YXZ';
            tmesh.rotation.y = Math.PI / 2;
            tmesh.add(tmesh1)
            textscene.push(tmesh)
            gradback.push(tmesh);
            scene.add(tmesh)

            // var canvas = document.createElement('canvas');
            // var ctx = canvas.getContext('2d');
            // canvas.width = 1000;
            // canvas.height =200;
            // ctx.fillStyle = "white";
            // ctx.font = `${50}px GG`;
            // ctx.fillText("            터치하여 시작", 0,canvas.height*0.9);
            // var img3 = new THREE.CanvasTexture(canvas);
            // var material4 = new THREE.SpriteMaterial({ map: img3, transparent:true, opacity:1});
            // var sprite = new THREE.Sprite(material4);
            // sprite.position.set(bw*2,bh*6,bw);
            // sprite.scale.x=50;
            // sprite.scale.y=10;
            // gradback.push(sprite);
            // scene.add(sprite);
            //재화
            var geometry12 = new TextGeometry("★ :", {
                font: font0,
                size: bw / 10,
                height: 두께*th / 3
            });
            geometry12.computeBoundingBox();
            geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
            var material = new THREE.MeshBasicMaterial({
                color: colorlst[colornum][3]
            });
            var tmesh = new THREE.Mesh(geometry12, material);
            tmesh.position.y = bh * 11
            tmesh.position.x = bw * (1.8)
            tmesh.position.z = bw * (0.7)
            // textMesh.position.x=0;
            tmesh.depth = 10;
            tmesh.rotation.x = -Math.PI / 8;
            tmesh.rotation.order = 'YXZ';
            tmesh.rotation.y = Math.PI / 4;


            var geometry12 = new TextGeometry(String(coin), {
                font: font0,
                size: bw / 10,
                height: 두께*th / 3
            });


            geometry12.computeBoundingBox();
            geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
            var material = new THREE.MeshBasicMaterial({
                color: colorlst[colornum][3]
            });
            var tmesh1 = new THREE.Mesh(geometry12, material);
            tmesh1.position.x = 4.5
            // textMesh.position.x=0;
            // tmesh1.depth=10;
            tmesh.add(tmesh1)
            // tmesh1.position.y
            // scene.add(tmesh)
            gradback.push(tmesh);
            가장자리.push(tmesh);


            for (var j = 0; j < 6; j++) {
                var temp = [];
                var text = "재생 중: " + sdic[j][0].substring(0, sdic[j][0].length - 4) + " "
                for (var i = 0; i < 100; i++) {
                    var canvas = document.createElement('canvas');
                    var ctx = canvas.getContext('2d');
                    // const padding = 10;
                    ctx.globalAlpha = 1;
                    canvas.width = 16.5 * 6;
                    canvas.height = 5.6 * 6;
                    var tl = text.length;
                    var textw = tl * (canvas.width / 10);
                    // ctx.fillStyle = 0xFFFFFF;
                    // ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.font = `${14}px Arial`;
                    // ctx.fillStyle = 0x009F4D;
                    ctx.fillStyle = 0xFFFFFF;
                    // // ctx.fillText(text, padding, padding + textHeight * 0.8);
                    ctx.fillText(text, 0 - (i) * (textw / 100), canvas.height * 0.8, textw, canvas.height);
                    ctx.fillText(text, textw - (i) * (textw / 100), canvas.height * 0.8, textw, canvas.height);
                    ctx.font = `${7}px Arial`;
                    ctx.fillText("  AKAI PRO ", 0, canvas.height * 0.35, canvas.width / 2.5, canvas.height);
                    // ctx.drawImage(unitimg["scroll"], 0,0,314,1664)
                    var img3 = new THREE.CanvasTexture(canvas);
                    var material5 = new THREE.MeshLambertMaterial({
                        map: img3,
                        side: THREE.DoubleSide,
                        transparent: true,
                        opacity: 1
                    });
                    // var plane = new THREE.Mesh(geometry5, material5);
                    // plane.position.set(bw, bw, bw)
                    // plane.rotation.y=Math.PI/2
                    temp.push(material5);
                }
                txtlst.push(temp);
            }
            if (callback) {
                callback();
            }
        }

        function resetting(n = 8, callback) {
            stackHeight = n;
            cubes.forEach((item) => {
                item.mesh.userData["game2048"].fullflag=false;
                item.mesh.material.visible = false
                item.mesh.material.opacity = 1
                item.mesh.material.transparent = false;
                item.mesh.children.forEach((tile, index) => {
                    if (tile.userData["skin"] == "tile") {
                        // tile.children.forEach((text, index2) => {
                        // 	tile.remove(text);
                        // 	// tile.children.splice(index, 1)
                        // })
                        // item.mesh.remove(tile);
                        // scene.remove(tile);
                        item.mesh.remove(tile);
                        // item.mesh.children.splice(index, 1)
                    } else if (tile.userData["skin"] == "bottom") {
                        tile.material.visible = false;
                        tile.material.opacity = 0
                        tile.material.transparent = true;
                    } else if (tile.userData["skin"] == skinset[skinnum]) {
                        tile.material.visible = true;
                        tile.material.opacity = 1;
                        tile.material.transparent = false;
                        tile.material.alphaTest = 0;
                    } else if (tile.userData["skin"] == "text1") {
                        if (skinnum == 1) {
                            tile.position.z = -bw / 8
                            tile.material.visible = true;
                            tile.material.opacity = 1
                            tile.material.transparent = true;
                        } else if (skinnum == 2) {
                            tile.position.z = 0
                            tile.material.visible = true;
                            tile.material.opacity = 1
                            tile.material.transparent = true;
                        } else {
                            tile.material.visible = false;
                        }
                    } else if (tile.userData["skin"].substring(0, tile.userData["skin"].length - 1) == "txtback") {
                        if (skinnum == 1) {
                            tile.position.z = -bw / 8
                            tile.material.visible = true;
                            tile.material.opacity = 0.3
                            tile.material.transparent = true;
                        } else if (skinnum == 2) {
                            tile.position.z = 0
                            tile.material.visible = true;
                            tile.material.opacity = 0.3
                            tile.material.transparent = true;
                        } else {
                            tile.material.visible = false;
                        }
                    } else {
                        tile.material.visible = false;
                        tile.material.opacity = 0
                        tile.material.transparent = true;
                    }
                });
            })
            for (let i = 0; i < 5; i++) {
                for (var j = cubes[i].mesh.children.length - 1; j >= 0; j--) {
                    if (cubes[i].mesh.children[j].userData["skin"] == "tile") {
                        cubes[i].mesh.remove(cubes[i].mesh.children[j]);
                    }
                }
                cubes[i].body.force.set(0,0,0)
                cubes[i].body.torque.set(0,0,0)

                if(gamemod!=2){
                  cubes[i].body.velocity.set(0, 0, 0);
                  cubes[i].body.angularVelocity.set(0, 0, 0);
                  cubes[i].body.position.set(0, (i) * bh + bh / 2, 0);
                  cubes[i].body.quaternion.copy(cubes[i].mesh.quaternion);
                  world.addBody(cubes[i].body);
                  scene.add(cubes[i].mesh)
                }else if(i>=  3){


                  cubes[i].body.velocity.set(0, 0, 0);
                  cubes[i].body.angularVelocity.set(0, 0, 0);
                  cubes[i].body.position.set(0, (i-3  ) * bh + bh / 2, 0);
                  cubes[i].body.quaternion.copy(cubes[i].mesh.quaternion);
                  world.addBody(cubes[i].body);
                  scene.add(cubes[i].mesh)
                }

                var game2048 = new Game2048(칸, i);
                // cubes.push(createBox(0,  (i) * bh+bh/2, 0, bw, bh, bw, game2048,i));
                cubes[i].mesh.userData.body = cubes[i].body;
                cubes[i].mesh.userData.game2048 = game2048
                // cubes[cubes.length-1].body.sleepState=1;
                // var loc=[];
                // 	for (let row = 0; row < 칸; row++) {
                // 			var temp=[];
                // 			for (let col = 0; col < 칸; col++) {
                // 					temp.push([-bw/2+(tw/2)+(tw)*(col),0, -bw/2+(tw/2)+(tw)*(row)])
                // 			}
                // 			loc=[];
                // 	}
                if (arrowon) {
                    var dir = new THREE.Vector3(cubes[i].mesh.position.x, 0, cubes[i].mesh.position.y);
                    //normalize the direction vector (convert to vector of length 1)
                    dir.normalize();
                    var origin = new THREE.Vector3(0, cubes[i].mesh.position.y + bh, 0);
                    var length = 1;
                    var hex = 0xffff00;
                    var arrowHelper = new THREE.ArrowHelper(dir, origin, length, hex)
                    arrowHelper.children.forEach((item) => {
                        item.material.opacity = 0;
                        item.material.transparent = true;
                    })
                    arrows.push(arrowHelper);
                    // scene.add( arrowHelper );
                }
            }
            var dir = new THREE.Vector3(0, 1, 0);
            //normalize the direction vector (convert to vector of length 1)
            dir.normalize();
            var origin = new THREE.Vector3(0, 0, 0);
            var length = 200;
            var hex = colorlst[colornum][3];
            var arrowHelper = new THREE.ArrowHelper(dir, origin, length, hex)
            arrowHelper.children.forEach((item) => {
                item.material.opacity = 0.1;
                item.material.transparent = true;
                item.material.linewidth = 1
            })
            // arrowHelper.children.[1].computeLineDistances();
            // arrowHelper.geometry.boundingSphere.radius=20
            //애로우
            // scene.add(arrowHelper);
            axis.push(arrowHelper);
            if (guideflag) {
                var origin2 = new THREE.Vector3(cubes[0].mesh.position.x - bw / 1.98, 0, cubes[0].mesh.position.z + bw / 1.98);
                var origin3 = new THREE.Vector3(cubes[0].mesh.position.x + bw / 1.98, 0, cubes[0].mesh.position.z - bw / 1.98);
                var origin4 = new THREE.Vector3(cubes[0].mesh.position.x + bw / 1.98, 0, cubes[0].mesh.position.z + bw / 1.98);
                var material = new THREE.LineDashedMaterial({
                    color: colorlst0[colornum0][0],
                    dashSize: 1,
                    gapSize: 1,
                    linewidth: 1,
                    scale: 2,
                    opacity: 0.2,
                    transparent: true
                });
                var points = [];
                points.push(origin2);
                points.push(new THREE.Vector3(origin2.x, bh * cubes.length * 1.1, origin2.z));
                var geometry = new THREE.BufferGeometry().setFromPoints(points);
                var line = new THREE.Line(geometry, material);
                line.computeLineDistances();
                scene.add(line);
                guide.push(line);
                var points = [];
                points.push(origin3);
                points.push(new THREE.Vector3(origin3.x, bh * cubes.length * 1.1, origin3.z));
                var geometry = new THREE.BufferGeometry().setFromPoints(points);
                var line = new THREE.Line(geometry, material);
                line.computeLineDistances();
                scene.add(line);
                guide.push(line);
                var points = [];
                points.push(origin4);
                points.push(new THREE.Vector3(origin4.x, bh * cubes.length * 1.1, origin4.z));
                var geometry = new THREE.BufferGeometry().setFromPoints(points);
                var line = new THREE.Line(geometry, material);
                line.computeLineDistances();
                scene.add(line);
                guide.push(line);
            }
            if (callback) {
                callback();
            }
        }

        function setting(n, callback) {
            var id0;
            var id2;
            if(n==0){
              id0=0
              id2=1
            } else{
              id0=1
              id2=5
            }

            for (let i = id0; i < id2; i++) {
                const game2048 = new Game2048(칸, i);
                if(n==0){
                  cubes.push(createBox(0, (i) * bh + bh / 2, 0, bw, bh, bw, game2048, i));
                }else{
                  cubes.push(newbox(0, (i) * bh + bh / 2, 0, bw, bh, bw, game2048, i, false));
                }

                cubes[cubes.length - 1].mesh.userData.body = cubes[cubes.length - 1].body;
                cubes[cubes.length - 1].mesh.userData.game2048 = game2048
                cubes[cubes.length - 1].body.sleepState = 1;
                var loc = [];
                for (let row = 0; row < 칸; row++) {
                    var temp = [];
                    for (let col = 0; col < 칸; col++) {
                        temp.push([-bw / 2 + (tw / 2) + (tw) * (col), 0, -bw / 2 + (tw / 2) + (tw) * (row)])
                    }
                    loc = [];
                }
                if (arrowon) {
                    var dir = new THREE.Vector3(cubes[i].mesh.position.x, 0, cubes[i].mesh.position.y);
                    //normalize the direction vector (convert to vector of length 1)
                    dir.normalize();
                    var origin = new THREE.Vector3(0, cubes[i].mesh.position.y + bh, 0);
                    var length = 1;
                    var hex = 0xffff00;
                    var arrowHelper = new THREE.ArrowHelper(dir, origin, length, hex)
                    arrowHelper.children.forEach((item) => {
                        item.material.opacity = 0;
                        item.material.transparent = true;
                    })
                    arrows.push(arrowHelper);
                    // scene.add( arrowHelper );
                }
            }
            if(n!=0){
              activeFloor = cubes.length;
              var dir = new THREE.Vector3(0, 1, 0);
              //normalize the direction vector (convert to vector of length 1)
              dir.normalize();
              var origin = new THREE.Vector3(0, 0, 0);
              var length = 200;
              var hex = colorlst[colornum][3];
              var arrowHelper = new THREE.ArrowHelper(dir, origin, length, hex)
              arrowHelper.children.forEach((item) => {
                  item.material.opacity = 0.1;
                  item.material.transparent = true;
                  item.material.linewidth = 1
              })
              // arrowHelper.children.[1].computeLineDistances();
              // arrowHelper.geometry.boundingSphere.radius=20
              //애로우
              // scene.add(arrowHelper);
              axis.push(arrowHelper);
              if (guideflag) {
                  var origin2 = new THREE.Vector3(cubes[0].mesh.position.x - bw / 1.98, 0, cubes[0].mesh.position.z + bw / 1.98);
                  var origin3 = new THREE.Vector3(cubes[0].mesh.position.x + bw / 1.98, 0, cubes[0].mesh.position.z - bw / 1.98);
                  var origin4 = new THREE.Vector3(cubes[0].mesh.position.x + bw / 1.98, 0, cubes[0].mesh.position.z + bw / 1.98);
                  var material = new THREE.LineDashedMaterial({
                      color: colorlst0[colornum0][0],
                      dashSize: 1,
                      gapSize: 1,
                      linewidth: 1,
                      scale: 2,
                      opacity: 0.2,
                      transparent: true
                  });
                  var points = [];
                  points.push(origin2);
                  points.push(new THREE.Vector3(origin2.x, bh * cubes.length * 1.1, origin2.z));
                  var geometry = new THREE.BufferGeometry().setFromPoints(points);
                  var line = new THREE.Line(geometry, material);
                  line.computeLineDistances();
                  scene.add(line);
                  guide.push(line);
                  var points = [];
                  points.push(origin3);
                  points.push(new THREE.Vector3(origin3.x, bh * cubes.length * 1.1, origin3.z));
                  var geometry = new THREE.BufferGeometry().setFromPoints(points);
                  var line = new THREE.Line(geometry, material);
                  line.computeLineDistances();
                  scene.add(line);
                  guide.push(line);
                  var points = [];
                  points.push(origin4);
                  points.push(new THREE.Vector3(origin4.x, bh * cubes.length * 1.1, origin4.z));
                  var geometry = new THREE.BufferGeometry().setFromPoints(points);
                  var line = new THREE.Line(geometry, material);
                  line.computeLineDistances();
                  scene.add(line);
                  guide.push(line);
              }
            }

            if (callback) {
              if(n==0){
                setTimeout(function() {
                    callback();
                }, 1000);
              }else{
                callback();
              }


            }
        }

        function addbox() {
            for (let i = 0; i < 10; i++) {
                const boxShape = new CANNON.Box(new CANNON.Vec3(0.5, 0.5, 0.5));
                const boxBody = new CANNON.Body({
                    mass: 10
                });
                boxBody.addShape(boxShape);
                boxBody.position.set(0, 2, 0);
                world.addBody(boxBody);
                const boxGeometry = new THREE.BoxGeometry();
                const boxMaterial = new THREE.MeshBasicMaterial({
                    color: 0x00ff00
                });
                const boxMesh = new THREE.Mesh(boxGeometry, boxMaterial);
                boxMesh.userData.body = boxBody
                scene.add(boxMesh);
                cubes.push({
                    mesh: boxMesh,
                    body: boxBody
                })
            }
        }
        // Generate the initial stack of boxes
        function createTile(idx, height, size, number = 0, callback) {
            if (lighton) {
                var material = new THREE.MeshLambertMaterial({
                    color: getColorForNumber(number)
                });
            } else {
                var material = new THREE.MeshBasicMaterial({
                    color: getColorForNumber(number)
                });
            }
            var geometry = new THREE.BoxGeometry(size * 0.9, height, size * 0.9);
            if (number == 0) {
                // material = new THREE.MeshBasicMaterial({ color:new THREE.Color('hsl('+String(70+4*(2))+', 70%, 60%)')});
                if (lighton) {
                    material = new THREE.MeshLambertMaterial({
                        color: colorlst0[colornum0][idx]
                    });
                } else {
                    material = new THREE.MeshBasicMaterial({
                        color: colorlst0[colornum0][idx]
                    });
                }
                geometry = new THREE.BoxGeometry(size * 0.9, height, size * 0.9);
            }
            // const material = new THREE.MeshBasicMaterial({ color: getColorForNumber(number) });
            const tile = new THREE.Mesh(geometry, material);
            if (number !== 0) {
                createTextMesh(number.toString(), bw / 8, (textMesh) => {
                    textMesh.position.y = th / 16
                    textMesh.position.z += th / 2
                    textMesh.rotation.order = 'YXZ';
                    textMesh.rotation.z = -Math.PI / 2;
                    tile.userData["text"] = number.toString();
                    tile.userData["time"] = elapsedTime;
                    tile.userData["skin"] = "tile";
                    tile.userData["merge"] = 0;
                    if (callback) {
                        callback(tile);
                    }
                });
            } else {
                if (callback) {
                    callback(tile);
                }
            }
        }

        function adjustContrast(color1, color2) {
          // 색상 1의 밝기 계산
          var brightness1 = (parseInt(color1.substr(1, 2), 16) * 299 +
                             parseInt(color1.substr(3, 2), 16) * 587 +
                             parseInt(color1.substr(5, 2), 16) * 114) / 1000;

          // 색상 2의 밝기 계산
          var brightness2 = (parseInt(color2.substr(1, 2), 16) * 299 +
                             parseInt(color2.substr(3, 2), 16) * 587 +
                             parseInt(color2.substr(5, 2), 16) * 114) / 1000;

          // 대비를 높이기 위해 밝기 차이 계산
          var contrastRatio = Math.abs(brightness1 - brightness2);

          // 보정할 색상 선택
          var adjustedColor;
          if (brightness1 > brightness2) {
            // 색상 1이 더 밝은 경우, 색상 2를 어둡게 보정
            var adjustment = Math.floor(contrastRatio / 2);
            adjustedColor = shadeColor(color2, -adjustment);
            return [color1, adjustedColor]
          } else {
            // 색상 2가 더 밝은 경우, 색상 1을 어둡게 보정
            var adjustment = Math.floor(contrastRatio / 2);
            adjustedColor = shadeColor(color1, -adjustment);
            return [color1, color2]
          }


        }

        // 색상 보정 함수
        function shadeColor(color, percent) {
          var f = parseInt(color.slice(1), 16),
              t = percent < 0 ? 0 : 255,
              p = percent < 0 ? percent * -1 : percent,
              R = f >> 16,
              G = f >> 8 & 0x00FF,
              B = f & 0x0000FF;
          return "#" + (0x1000000 +
            (Math.round((t - R) * p) + R) * 0x10000 +
            (Math.round((t - G) * p) + G) * 0x100 +
            (Math.round((t - B) * p) + B)).toString(16).slice(1);
        }


        function getColorForNumber(number) {
            // Define colors for specific numbers. You can customize these colors as needed.
            const colors = {
                0: 0xFCCCAC,
                2: 0xEEEEEE,
                4: 0xEDD0A1,
                8: 0xF2B179,
                16: 0xF59563,
                32: 0xF67C5F,
                64: 0xF65E3B,
                128: 0xEDCF72,
                256: 0xEDCC61,
                512: 0xEDC850,
                1024: 0xEDC53F,
                2048: 0xEDC22E,
            };
            return colors[number] || 0x000000;
        }

        function animate2() {
            requestAnimationFrame(animate2);
            renderer.render(uiScene0, uicamera0);
            renderer.clearDepth();
            // console.log(0)
        }
        let elapsedTime = 0;
        let clock = new THREE.Clock();
        // sdic.sort(() => Math.random() - 0.5);
        // sdic[4]=wooden;
        var bsounds = [];
        var sounds = [];
        if(particleflag){
          var particlenum = 25;
          var vertices = [];
          var geometry = new THREE.BufferGeometry();
          var positions = [];
          var colors = [];
          var sizes = [];
          var scales = [];
          var cl = new THREE.Color();
          for (let i = 0; i < 25; i++) {
              // const x = 20 * Math.random() - 10;
              // const y = 20 * Math.random() - 10;
              // const z = 20 * Math.random() - 10;
              positions.push((Math.random() * bw * 2.5 - bw * 3));
              positions.push((Math.random() * bh * 7));
              positions.push((Math.random() * bw * 2.5 - bw * 3));
              // vertices.push( x, y, z );
              cl.setHSL(i / particlenum, 1.0, 0.5);
              colors.push(cl.r, cl.g, cl.b);
              scales.push(1);
              sizes.push(1);
          }
          // var sprite = new THREE.TextureLoader().load('png/disc.png')
          geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
          geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
          // geometry.setAttribute( 'size', new THREE.Float32BufferAttribute( sizes, 1 ).setUsage( THREE.DynamicDrawUsage ) );
          geometry.setAttribute('size', new THREE.Float32BufferAttribute(sizes, 1));
          geometry.setAttribute('scale', new THREE.Float32BufferAttribute(scales, 1));
          var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
          var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.75) + '%, ' + String(newcl["l"] + 20) + '%)');
          const material2 = new THREE.ShaderMaterial({
              uniforms: {
                  color: {
                      value: tc
                  },
                  opacity: 0.1,
                  transparent: true
              },
              vertexShader: document.getElementById('vertexshader').textContent,
              fragmentShader: document.getElementById('fragmentshader').textContent
          });
          var material = new THREE.PointsMaterial({
              size: 10,
              sizeAttenuation: true,
              // map: sprite,
              alphaTest: 0.1,
              transparent: true,
              opacity: 0.4
          });
          // var material = new THREE.ShaderMaterial( { map: sprite} );
          material.color = new THREE.Color(0xffffff)
          var particles = new THREE.Points(geometry, material2);
          scene.add(particles);
        }

        // guideflag=false;
        let listener;
        if(webflag){
          var csvUrl = 'https://raw.githubusercontent.com/Radetzki87/web1/master/sdic.csv';
        }else{

          var csvUrl = 'sdic.csv';
        }

        var nslst = {};
        var templst=[];
        sdic=[];

        window.rotationflag=rotationflag
        window.restartflag=restartflag
        window.pluscoin=pluscoin
        window.restartloc=restartloc
        window.restartrot=restartrot
        window.ncolornum=ncolornum
        window.ncolornum0=ncolornum0
        window.rehsl1=rehsl1
        window.renhsl1=renhsl1
        window.rehsl2=rehsl2
        window.renhsl2=renhsl2
        window.rehsl3=rehsl3
        window.renhsl3=renhsl3
        window.rehsl4=rehsl4
        window.renhsl4=renhsl4
        window.bhsl0=bhsl0
        window.nbhsl0=nbhsl0
        window.bhsl1=bhsl1
        window.nbhsl1=nbhsl1
        window.bhsl2=bhsl2
        window.nbhsl2=nbhsl2
        window.bhsl3=bhsl3
        window.nbhsl3=nbhsl3
        window.bhsl4=bhsl4
        window.nbhsl4=nbhsl4
        window.rotationend=rotationend
        fetchCSV(csvUrl)
            .then(dictionaries => {
                var tlst=dictionaries;

                // console.log(nslst);

                // templst = Object.keys(nslst);

                templst.push("wooden")
                templst.push("High End Party")
                templst.push("Catwalk")
                templst.push("Lost in the Dessert")
                templst.push("You_re in the Future")
                templst.push("Beach House")
                templst.push("Puzzles")
                templst.push("frozen winter")
                //
                templst.sort(() => Math.random() - 0.5);
                sdic.push(tlst[templst[0]])
                sdic.push(tlst[templst[1]])
                sdic.push(tlst[templst[2]])
                sdic.push(tlst[templst[3]])
                sdic.push(tlst[templst[4]])
                sdic.push(tlst[templst[5]])
                // window.nslst = nslst;
                // for (let i = 0; i < 6; i++) {
                //     let temp = [0, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, "up", "down", "left", "right", "upper", "lower"]
                //     var sdickeys = Object.keys(soundic);
                //     for (let j = 0; j < temp.length; j++) {
                //         if (sdickeys.indexOf(sdic[i][temp[j]]) == -1) {
                //             // var listener = new THREE.AudioListener();
                //             // var audioLoader = new THREE.AudioLoader();
                //             audioLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/sound/' + sdic[i][temp[j]], function(buffer) {
                //                 var sound = new THREE.Audio(listener);
                //                 sound.setBuffer(buffer);
                //                 sound.setVolume(0.3);
                //                 if (j == 0) sound.setLoop(true);
                //                 soundic[sdic[i][temp[j]]] = sound;
                //             });
                //         }
                //     }
                // }
                // console.log(sdic)

                if(greylst.indexOf(colornum)!=-1){
                  document.getElementById("left").classList.add("locked")
                  document.getElementById("center").classList.add("locked")
                  document.getElementById("right").classList.add("locked")

                  document.getElementById("opt0").classList.add("locked")
                  document.getElementById("opt1").classList.add("locked")
                  document.getElementById("opt2").classList.add("locked")
                  document.getElementById("opt3").classList.add("locked")
                  // document.getElementById("opt4").classList.add("locked")
                }else{
                  document.getElementById("left").classList.remove("locked")
                  document.getElementById("center").classList.remove("locked")
                  document.getElementById("right").classList.remove("locked")

                  document.getElementById("opt0").classList.remove("locked")
                  document.getElementById("opt1").classList.remove("locked")
                  document.getElementById("opt2").classList.remove("locked")
                  document.getElementById("opt3").classList.remove("locked")
                  // document.getElementById("opt4").classList.remove("locked")

                }
                document.getElementById("mod-overlay").classList.remove("show");
                document.getElementById("mod-overlay").classList.add("fade");

                document.getElementById("credit-info").classList.remove("show");
                document.getElementById("credit-info").classList.add("fade");
                setTimeout(function() {
                    document.getElementById("mod-overlay").classList.add("hidden");
                    document.getElementById("credit-info").classList.add("hidden");
                }, 100);


                window.scrollTo(0, 0);
                if (document.getElementById("setting-overlay").classList.contains("show")) {
                    document.getElementById("setting-overlay").classList.remove("show");
                    document.getElementById("setting-overlay").classList.add("fade");
                    setTimeout(function() {
                        document.getElementById("setting-overlay").classList.add("hidden");
                    }, 100);
                }
                if (!document.getElementById("gameover-overlay").classList.contains("hidden")) {
                    document.getElementById("gameover-overlay").classList.remove("show");
                    document.getElementById("gameover-overlay").classList.add("fade");
                    setTimeout(function() {
                        document.getElementById("gameover-overlay").classList.add("hidden");
                    }, 100);
                    if (!rotationflag) {
                        rotationflag = true
                        restartflag = true
                        pluscoin = parseInt(점수 / 10)
                        // coin += pluscoin;
                        for (var i = 0; i < cubes.length; i++) {
                            restartloc.push(cubes[i].mesh.position);
                            restartrot.push(cubes[i].mesh.rotation);
                        }
                        ncolornum = parseInt(Math.random() * colorlst.length);
                        ncolornum0 = parseInt(Math.random() * colorlst0.length);
                        rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                        renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                        rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                        renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                        rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                        renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                        rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                        renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                        bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                        nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                        bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                        nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                        bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                        nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                        bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                        nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                        bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                        nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                        rotationend = Math.PI / 4
                    }
                }
                if (!document.getElementById("step1").classList.contains("hidden")) {
                    document.getElementById("options-overlay").classList.add("fade");
                    document.getElementById("options-overlay").classList.remove("show");
                    document.getElementById("center").classList.remove("fade");
                    document.getElementById("left").classList.remove("fade");
                    document.getElementById("right").classList.remove("fade");
                    setTimeout(function() {
                        document.getElementById("options-overlay").classList.add("hidden");
                        document.getElementById("left").classList.add("show");
                        document.getElementById("right").classList.add("show");
                        document.getElementById("left").classList.remove("hidden");
                        document.getElementById("right").classList.remove("hidden");
                        document.getElementById("center").classList.add("show");
                        document.getElementById("center").classList.remove("hidden");

                    }, 100);
                } else if (!document.getElementById("categ1").classList.contains("hidden")) {
                    document.getElementById("categ1").classList.remove("show");
                    document.getElementById("categ1").classList.add("fade");
                    setTimeout(function() {
                        document.getElementById("categ1").classList.add("hidden");
                        document.getElementById("step1").classList.remove("hidden");
                        document.getElementById("step1").classList.add("show");
                    }, 100);
                } else {
                    document.getElementById("step3").classList.remove("show");
                    document.getElementById("step3").classList.add("fade");
                    setTimeout(function() {
                        document.getElementById("step3").classList.add("hidden");
                        document.getElementById("categ1").classList.remove("hidden");
                        document.getElementById("categ1").classList.add("show");
                    }, 100);
                }
                점수=0;
                maxnum=0;
                listener= new THREE.AudioListener();
                // soundic[endsound].setVolume(0.4);
                if(!webflag) Android.loadDb()

                // if(!webflag) initdb()
                setting(0, function(object) { //시작0
                  setting(1, function(object) {
                      addring();
                      tsetting(function(object) {
                          cubes.forEach((item) => {
                              item.mesh.userData.game2048.spawnTile();
                              item.mesh.userData.game2048.spawnTile();
                          })
                          // msetting2(function (object) {
                          msetting0(function(object) {
                              txtsetting(function(object) {
                                  time0 = performance.now();
                                  fps = 0;
                                  // console.log(txtlst);
                                  // camera.add(listener);
                                  // scene.background = new THREE.Color(colorlst[colornum][0]);
                                  skinsetting(function(object) {

                                      setTimeout(function() {
                                          document.getElementById("intro").children[1].style.opacity="0.8";
                                          goahead=true;

                                          // console.log(skinmold)
                                          for(var i=0;i<cubes.length;i++){
                                            cubes[i].mesh.children.forEach((item)=>{
                                              if (item.userData["skin"] != skinset[skinnum]) {
                                                  item.material.visible = false;
                                              }
                                            })
                                          }
                                          document.getElementById("coin2").innerText=String(coin);
                                          bf=999;


                                          // window.setInterval(animate, 100);
                                          animate();

                                      }, 1500  );
                                  })
                                  // console.log(tilemold);
                                  // console.log(textmold)
                              })
                          })
                          // })
                      })
                    })
                });
            })
            .catch(error => {
                console.error(error);
            });

        // Animate the scene
        function animate(currentTime) {
            let deltaTime = currentTime - lastTime;

            if (startflag&&!gameoverflag) { //스타트
                restartonce2=false;
                // console.log(colornum);
                // console.log(colorlst[colornum][0]);
                document.getElementById("coin-info").classList.remove("show");
                document.getElementById("coin-info").classList.add("fade");

                document.getElementById("left").classList.remove("show");
                document.getElementById("left").classList.add("fade");

                document.getElementById("leftup").classList.remove("show");
                document.getElementById("leftup").classList.add("fade");

                document.getElementById("center").classList.remove("show");
                document.getElementById("center").classList.add("fade");
                setTimeout(function() {
                    document.getElementById("coin-info").classList.add("hidden");
                    document.getElementById("left").classList.add("hidden");
                    document.getElementById("leftup").classList.add("hidden");
                    document.getElementById("center").classList.add("hidden");

                }, 100);
                gradback.forEach((item, index) => {
                    if (index == 0) return;
                    item.material.visible = false;
                    item.children.forEach((child) => {
                        child.material.visible = false;
                    })
                })
                // uilst[0].material.visible=false;
                if (initflag) {
                    for (let i = 0; i < 6; i++) {
                        if (i == activeFloor) continue
                        if (soundic[sdic[i][0]]?.isPlaying) {
                            soundic[sdic[i][0]]?.stop();
                        }
                    }
                    if (!soundic[sdic[activeFloor][0]]?.isPlaying) {
                        soundic[sdic[activeFloor][0]].play();
                        songTitleElement.innerText = sdic[activeFloor]["title"];
                        artistNameElement.innerText = sdic[activeFloor]["producer"];
                        var songInfo = document.getElementById('song-info');
                        songInfo.classList.add("hidden");
                        songInfo.classList.remove("hidden");
                        songInfo.classList.add("show");
                        setTimeout(function() {
                            songInfo.classList.remove("show");
                            songInfo.classList.add("fade");
                        }, 1000);
                    }
                    initflag = false;
                    elapsedTime = 0;
                    포인트.forEach((item) => {
                        item.material.visible = true;
                    })
                    시간.forEach((item) => {
                        item.material.visible = true;
                    })
                }
            } else {
                포인트.forEach((item) => {
                    item.material.visible = false;
                })
                시간.forEach((item) => {
                    item.material.visible = false;
                })
                gradback.forEach((item, index) => {
                    if (index == 0) return;
                    item.material.visible = true;
                    item.children.forEach((child) => {
                        child.material.visible = true;
                    })
                })
                var txtcount3 = parseInt(elapsedTime*2 ) % 100
                if(txtcount3%2==0){
                  document.getElementById("intro").children[1].style.opacity="0.1";
                  document.getElementById("tut-info").children[0].style.opacity="0";
                }else{
                  document.getElementById("intro").children[1].style.opacity="1";
                  document.getElementById("tut-info").children[0].style.opacity="1";
                }
            }
            if (restartflag && lookcenter) { //리스타트
                if(!restartonce1){
                  // 포인트.forEach((item) => {
                  //     item.material.visible = false;
                  // })
                  // 시간.forEach((item) => {
                  //     item.material.visible = false;
                  // })
                  while (포인트.length > 0) {
                      scene.remove(포인트.pop());
                  }
                  while (시간.length > 0) {
                      scene.remove(시간.pop());
                  }
                  activeFloor = cubes.length;
                  // console.log(Math.abs(camera.rotation.x-restartend))
                  가장자리[0].material.visible = false;
                  가장자리[0].children[0].material.visible = false;
                  if(particleflag){
                    scene.remove(particles);
                  }
                  document.getElementById('song-info').classList.remove("show1");
                  document.getElementById('song-info').classList.add("hidden");

                  for (var i = 0; i < cubes.length; i++) {
                      cubes[i].mesh.children.forEach((item, idx) => {
                        if (item.userData["skin"]=="tile") {
                          item.material.visible=false;
                        }
                      });
                  }
                  restartonce1=true;
                }
                if (camera.rotation.x - restartend >0) {
                    restartonce1=false;
                    restart();

                } else {
                    // camera.rotation.x += Math.PI / 512
                    camera.rotation.x += deltaTime / 1800
                    var canvas = document.createElement('canvas');
                    var ctx = canvas.getContext('2d');
                    canvas.width = 100;
                    canvas.height = 100;
                    var grd = ctx.createLinearGradient(0, 0, 0, 100);
                    var newcl0 = hslToHex(renhsl1["h"] - (renhsl1["h"] - rehsl1["h"]) * Math.abs(camera.rotation.x - restartend), renhsl1["s"] - (renhsl1["s"] - rehsl1["s"]) * Math.abs(camera.rotation.x - restartend), renhsl1["l"] - (renhsl1["l"] - rehsl1["l"]) * Math.abs(camera.rotation.x - restartend))
                    var newcl1 = hslToHex(renhsl2["h"] - (renhsl2["h"] - rehsl2["h"]) * Math.abs(camera.rotation.x - restartend), renhsl2["s"] - (renhsl2["s"] - rehsl2["s"]) * Math.abs(camera.rotation.x - restartend), renhsl2["l"] - (renhsl2["l"] - rehsl2["l"]) * Math.abs(camera.rotation.x - restartend))
                    var newcl00 = hslToHex0(renhsl1["h"] - (renhsl1["h"] - rehsl1["h"]) * Math.abs(camera.rotation.x - restartend), renhsl1["s"] - (renhsl1["s"] - rehsl1["s"]) * Math.abs(camera.rotation.x - restartend), renhsl1["l"] - (renhsl1["l"] - rehsl1["l"]) * Math.abs(camera.rotation.x - restartend))
                    var newcl10 = hslToHex0(renhsl2["h"] - (renhsl2["h"] - rehsl2["h"]) * Math.abs(camera.rotation.x - restartend), renhsl2["s"] - (renhsl2["s"] - rehsl2["s"]) * Math.abs(camera.rotation.x - restartend), renhsl2["l"] - (renhsl2["l"] - rehsl2["l"]) * Math.abs(camera.rotation.x - restartend))
                    var newcl20 = hslToHex0(renhsl3["h"] - (renhsl3["h"] - rehsl3["h"]) * Math.abs(camera.rotation.x - restartend), renhsl3["s"] - (renhsl3["s"] - rehsl3["s"]) * Math.abs(camera.rotation.x - restartend), renhsl3["l"] - (renhsl3["l"] - rehsl3["l"]) * Math.abs(camera.rotation.x - restartend))
                    var newcl30 = hslToHex0(renhsl4["h"] - (renhsl4["h"] - rehsl4["h"]) * Math.abs(camera.rotation.x - restartend), renhsl4["s"] - (renhsl4["s"] - rehsl4["s"]) * Math.abs(camera.rotation.x - restartend), renhsl4["l"] - (renhsl4["l"] - rehsl4["l"]) * Math.abs(camera.rotation.x - restartend))
                    var boxcl0 = hslToHex0(nbhsl0["h"] - (nbhsl0["h"] - bhsl0["h"]) * Math.abs(camera.rotation.x - restartend), nbhsl0["s"] - (nbhsl0["s"] - bhsl0["s"]) * Math.abs(camera.rotation.x - restartend), nbhsl0["l"] - (nbhsl0["l"] - bhsl0["l"]) * Math.abs(camera.rotation.x - restartend))
                    var boxcl1 = hslToHex0(nbhsl1["h"] - (nbhsl1["h"] - bhsl1["h"]) * Math.abs(camera.rotation.x - restartend), nbhsl1["s"] - (nbhsl1["s"] - bhsl1["s"]) * Math.abs(camera.rotation.x - restartend), nbhsl1["l"] - (nbhsl1["l"] - bhsl1["l"]) * Math.abs(camera.rotation.x - restartend))
                    var boxcl2 = hslToHex0(nbhsl2["h"] - (nbhsl2["h"] - bhsl2["h"]) * Math.abs(camera.rotation.x - restartend), nbhsl2["s"] - (nbhsl2["s"] - bhsl2["s"]) * Math.abs(camera.rotation.x - restartend), nbhsl2["l"] - (nbhsl2["l"] - bhsl2["l"]) * Math.abs(camera.rotation.x - restartend))
                    var boxcl3 = hslToHex0(nbhsl3["h"] - (nbhsl3["h"] - bhsl3["h"]) * Math.abs(camera.rotation.x - restartend), nbhsl3["s"] - (nbhsl3["s"] - bhsl3["s"]) * Math.abs(camera.rotation.x - restartend), nbhsl3["l"] - (nbhsl3["l"] - bhsl3["l"]) * Math.abs(camera.rotation.x - restartend))
                    var boxcl4 = hslToHex0(nbhsl4["h"] - (nbhsl4["h"] - bhsl4["h"]) * Math.abs(camera.rotation.x - restartend), nbhsl4["s"] - (nbhsl4["s"] - bhsl4["s"]) * Math.abs(camera.rotation.x - restartend), nbhsl4["l"] - (nbhsl4["l"] - bhsl4["l"]) * Math.abs(camera.rotation.x - restartend))
                    // console.log(parseInt(boxcl0, 16));
                    clmeshlst[0].forEach((item) => {
                        item.color = new THREE.Color(parseInt(boxcl0, 16));
                    })
                    clmeshlst[1].forEach((item) => {
                        item.color = new THREE.Color(parseInt(boxcl1, 16));
                    })
                    clmeshlst[2].forEach((item) => {
                        item.color = new THREE.Color(parseInt(boxcl2, 16));
                    })
                    clmeshlst[3].forEach((item) => {
                        item.color = new THREE.Color(parseInt(boxcl3, 16));
                    })
                    clmeshlst[4].forEach((item) => {
                        item.color = new THREE.Color(parseInt(boxcl4, 16));
                    })
                    clmeshlst1[0].forEach((item) => {
                        var newcl = hexToHSL(hexToHtmlColor(boxcl0))
                        item.color = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.75) + '%, ' + String(newcl["l"] + 15) + '%)');
                    })
                    clmeshlst1[1].forEach((item) => {
                        var newcl = hexToHSL(hexToHtmlColor(boxcl1))
                        item.color = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.75) + '%, ' + String(newcl["l"] + 15) + '%)');
                    })
                    clmeshlst1[2].forEach((item) => {
                        var newcl = hexToHSL(hexToHtmlColor(boxcl2))
                        item.color = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.75) + '%, ' + String(newcl["l"] + 15) + '%)');
                    })
                    clmeshlst1[3].forEach((item) => {
                        var newcl = hexToHSL(hexToHtmlColor(boxcl3))
                        item.color = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.75) + '%, ' + String(newcl["l"] + 15) + '%)');
                    })
                    clmeshlst1[4].forEach((item) => {
                        var newcl = hexToHSL(hexToHtmlColor(boxcl4))
                        item.color = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.75) + '%, ' + String(newcl["l"] + 15) + '%)');
                    })
                    clmeshlst2[0].forEach((item) => {
                        var newcl = hexToHSL(hexToHtmlColor(boxcl0))
                        item.color = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] - 10) + '%)');
                    })
                    clmeshlst2[1].forEach((item) => {
                        var newcl = hexToHSL(hexToHtmlColor(boxcl1))
                        item.color = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] - 10) + '%)');
                    })
                    clmeshlst2[2].forEach((item) => {
                        var newcl = hexToHSL(hexToHtmlColor(boxcl2))
                        item.color = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] - 10) + '%)');
                    })
                    clmeshlst2[3].forEach((item) => {
                        var newcl = hexToHSL(hexToHtmlColor(boxcl3))
                        item.color = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] - 10) + '%)');
                    })
                    clmeshlst2[4].forEach((item) => {
                        var newcl = hexToHSL(hexToHtmlColor(boxcl4))
                        item.color = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] - 10) + '%)');
                    })
                    clmeshlst0[0].forEach((item) => {
                        item.color = new THREE.Color(parseInt(newcl00, 16));
                    })
                    clmeshlst0[1].forEach((item) => {
                        item.color = new THREE.Color(parseInt(newcl10, 16));
                    })
                    clmeshlst0[2].forEach((item) => {
                        item.color = new THREE.Color(parseInt(newcl20, 16));
                    })
                    clmeshlst0[3].forEach((item) => {
                        // item.color=new THREE.Color(colorlst[colornum][3]);
                        item.color = new THREE.Color(parseInt(newcl30, 16));
                    })
                    avx = 0;
                    avz = 0;
                    for (var i = 0; i < cubes.length; i++) {
                        avx += cubes[i].mesh.position.x;
                        avz += cubes[i].mesh.position.z;
                    }
                    avx /= cubes.length;
                    avz /= cubes.length;
                    camera.position.x = bw * 2;
                    camera.position.z = bw * 2;
                    grd.addColorStop(0, "white");
                    grd.addColorStop(0.23, newcl1);
                    grd.addColorStop(0.46, newcl0);
                    grd.addColorStop(1, newcl0);
                    ctx.fillStyle = grd;
                    ctx.fillRect(0, 0, 100, 100);
                    var img3 = new THREE.CanvasTexture(canvas);
                    gradback[0].material = new THREE.MeshBasicMaterial({
                        map: img3,
                        transparent: true,
                        opacity: 1
                    });
                    for (var i = 0; i < cubes.length; i++) {
                        cubes[i].mesh.position.set(restartloc[i].x * 1.39 * Math.abs(camera.rotation.x - restartend), ((i) * bh + bh / 2) + (restartloc[i].y) * 1.39 * Math.abs(camera.rotation.x - restartend), restartloc[i].z * 1.39 * Math.abs(camera.rotation.x - restartend))
                        cubes[i].mesh.rotation.set(restartrot[i].x * 1.39 * Math.abs(camera.rotation.x - restartend), restartrot[i].y * 1.39 * Math.abs(camera.rotation.x - restartend), restartrot[i].z * 1.39 * Math.abs(camera.rotation.x - restartend))
                    }
                }
            } else {}


            if (Math.abs(camera.rotation.x - restartend) < 0.2) {
                groundmesh.material.visible = false;
            }


            if (!restartflag && lookcenter && !startflag) {
                if(!restartonce2){
                  restartloc = [];
                  for (var i = 0; i < cubes.length; i++) {
                    cubes[i].mesh.children.forEach((item, idx) => {
                      if(item.userData["skin"]=="tile") {
                        item.material.visible=false;
                        item.children.forEach((txt) => {
                          txt.material.visible=false;
                        });

                      }
                    });
                  }
                  restartonce2=true;
                }
                if (-isoAngle - camera.rotation.x > 0) {
                    camera.rotation.x=-isoAngle;

                    // for (var i = 0; i < cubes.length; i++) {
                    //   cubes[i].mesh.children.forEach((item, idx) => {
                    //     if (skinset.indexOf(item.userData["skin"])!=-1){
                    //       if(item.userData["skin"]!=skinset[skinnum]) {
                    //         item.material.visible=false;
                    //       }
                    //     }
                    //   });
                    // }

                    if(onceflag0){
                      document.getElementById("left").classList.remove("hidden");
                      document.getElementById("left").classList.remove("fade");
                      document.getElementById("left").classList.add("show");

                      document.getElementById("center").classList.remove("hidden");
                      document.getElementById("center").classList.remove("fade");
                      document.getElementById("center").classList.add("show");

                      document.getElementById("leftup").classList.remove("hidden");
                      document.getElementById("leftup").classList.remove("fade");
                      document.getElementById("leftup").classList.add("show");

                      if(document.getElementById("right").classList.contains("hidden")){
                        document.getElementById("right").classList.remove("hidden");
                        document.getElementById("right").classList.remove("fade");
                        document.getElementById("right").classList.add("show");
                      }

                      onceflag0=false;
                    }


                } else if(-isoAngle==camera.rotation.x){
                  restartflag=false;
                }else{

                    // camera.rotation.x -= Math.PI / 256
                    camera.rotation.x -= deltaTime / 1200
                    // if (-isoAngle - camera.rotation.x > 0) camera.rotation.x=-isoAngle+0.01;
                    // camera.position.y-=100000*(Math.PI/128)
                }
            }
            if (rotationflag) {

                if (Math.abs(camera.rotation.y - rotationend) < 0.0001) {
                    rotationflag = false;
                    if (rotationend == 0) {
                        lookright = true;
                        lookcenter = false
                        lookleft = false
                    } else if (rotationend == Math.PI / 4) {
                        lookright = false;
                        lookcenter = true
                        lookleft = false
                    } else if (rotationend == Math.PI / 2) {
                        lookright = false;
                        lookcenter = false
                        lookleft = true
                    }
                } else if (camera.rotation.y > rotationend) {
                    if (rotationend == 0) {
                        camera.position.set(bw * 2 - 28 * Math.abs(Math.PI / 4 - camera.rotation.y), bh * (cubes.length + 3.5) - 27 * Math.abs(Math.PI / 4 - camera.rotation.y), bw * 2);
                        // camera.rotation.x = -isoAngle*Math.abs(Math.PI/4-camera.rotation.y);
                        // camera.lookAt(0, 0, 0);
                        camera.rotation.x = -isoAngle + isoAngle * Math.abs(Math.PI / 4 - camera.rotation.y)
                    } else {}
                    camera.rotation.y -= Math.PI / 64
                } else {
                    if (rotationend == Math.PI / 4) {
                        camera.position.set(bw * 2 - 28 * Math.abs(Math.PI / 4 - camera.rotation.y), bh * (cubes.length + 3.5) - 27 * Math.abs(Math.PI / 4 - camera.rotation.y), bw * 2);
                        // camera.rotation.x = -isoAngle*Math.abs(Math.PI/4-camera.rotation.y);
                        // camera.lookAt(0, 0, 0);
                        camera.rotation.x = -isoAngle + isoAngle * Math.abs(Math.PI / 4 - camera.rotation.y)
                    } else {
                        camera.rotation.x = -isoAngle
                    }
                    camera.rotation.y += Math.PI / 64
                }
            }
            requestAnimationFrame(animate);

            //배경컨트롤
            // scene.background = new THREE.Color(0x3e708d);
            // gradback[0].material.visible=true;
            // gradback[0].scale.y=100-1*activeFloor;
            // gradback[0].position.y=bh*2+1*activeFloor;
            // // scene.background = new THREE.Color(colorlst[colornum][0]);
            // var newcl=hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
            // console.log(-isoAngle-camera.rotation.x)
            // scene.background = new THREE.Color('hsl('+String(newcl["h"])+', '+String(newcl["s"])+'%'+String(newcl["l"])+'%)');
            // if(Math.abs(-isoAngle-camera.rotation.x)>0.01){
            // scene.background = new THREE.Color('hsl('+String(newcl["h"])+', '+String(newcl["s"])+'%, '+String(newcl["l"]+45*Math.abs(-isoAngle-camera.rotation.x))+'%)');
            // }else{
            // 	scene.background = new THREE.Color(colorlst[colornum][0]);
            // }

            if (!gameoverflag&&averageflag) {
              avx = 0;
              avz = 0;
                for (var i = 0; i < cubes.length; i++) {
                    avx += cubes[i].mesh.position.x;
                    avz += cubes[i].mesh.position.z;
                    cubes[i].mesh.children.forEach((item) => {
                      if (item.userData["skin"]==skinset[skinnum]) {
                        if(gamemod==2){
                          item.receiveShadow = false;
                          item.castShadow = false;
                        }else{
                          item.receiveShadow = true;
                          item.castShadow = true;
                        }

                        item.material.visible=true;
                      }
                    });
                }
                avx /= cubes.length;
                avz /= cubes.length;
                axis[0].position.x = avx;
                axis[0].position.z = avz;
            } else {

            }
            if (uiflag) {
                requestAnimationFrame(animate);
                renderer.render(uiScene0, uicamera0);
                return;
            } else if (gameoverflag) {
              gradback.forEach((item, index) => {
                  if (index == 0) return;
                  item.material.visible = false;
                  item.children.forEach((child) => {
                      child.material.visible = false;
                  })
              })
                if (!endtext) {
                    // world.removeBody(groundBody);
                    scene.remove(axis[0]);
                    while (guide.length > 0) {
                        scene.remove(guide.pop());
                    }


                    endtext = true

                    // var geometry12 = new TextGeometry("SCORE:" + String(점수), {
                    //     font: font0,
                    //     size: bw / 6,
                    //     height: th / 3
                    // });
                    // geometry12.computeBoundingBox();
                    // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
                    // var material = new THREE.MeshBasicMaterial({
                    //     color: 0xffffff
                    // });
                    // var tmesh = new THREE.Mesh(geometry12, material);
                    // tmesh.position.y = bh * 8
                    // tmesh.position.x = bw * (1) + avx
                    // tmesh.position.z = bw * (1) + avz
                    // // textMesh.position.x=0;
                    // tmesh.depth = 10;
                    // tmesh.rotation.x = -Math.PI / 8;
                    // tmesh.rotation.order = 'YXZ';
                    // tmesh.rotation.y = Math.PI / 4;
                    // // tmesh1.position.y
                    // scene.add(tmesh)
                    // coinupdate.push(tmesh)
                    // var geometry12 = new TextGeometry("BEST:" + String(점수), {
                    //     font: font0,
                    //     size: bw / 6,
                    //     height: th / 3
                    // });
                    // geometry12.computeBoundingBox();
                    // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
                    // var material = new THREE.MeshBasicMaterial({
                    //     color: 0xffffff
                    // });
                    // var tmesh = new THREE.Mesh(geometry12, material);
                    // tmesh.position.y = bh * 6.8
                    // tmesh.position.x = bw * (1) + avx
                    // tmesh.position.z = bw * (1) + avz
                    // // textMesh.position.x=0;
                    // tmesh.depth = 10;
                    // tmesh.rotation.x = -Math.PI / 8;
                    // tmesh.rotation.order = 'YXZ';
                    // tmesh.rotation.y = Math.PI / 4;
                    // // tmesh1.position.y
                    // scene.add(tmesh)
                    // coinupdate.push(tmesh)
                    // var geometry12 = new TextGeometry("★ :", {
                    //     font: font0,
                    //     size: bw / 10,
                    //     height: th / 3
                    // });
                    // geometry12.computeBoundingBox();
                    // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
                    // var material = new THREE.MeshBasicMaterial({
                    //     color: colorlst[colornum][3]
                    // });
                    // var tmesh = new THREE.Mesh(geometry12, material);
                    // tmesh.position.y = bh * 11
                    // tmesh.position.x = bw * (1.8)
                    // tmesh.position.z = bw * (0.7)
                    // // textMesh.position.x=0;
                    // tmesh.depth = 10;
                    // tmesh.rotation.x = -Math.PI / 8;
                    // tmesh.rotation.order = 'YXZ';
                    // tmesh.rotation.y = Math.PI / 4;
                    // var geometry12 = new TextGeometry(String(coin), {
                    //     font: font0,
                    //     size: bw / 10,
                    //     height: th / 3
                    // });
                    // geometry12.computeBoundingBox();
                    // geometry12.translate(-geometry12.boundingBox.max.x / 2, -geometry12.boundingBox.min.y - 0.13, 0);
                    // var material = new THREE.MeshBasicMaterial({
                    //     color: colorlst[colornum][3],
                    //     transparent: true
                    // });
                    // var tmesh1 = new THREE.Mesh(geometry12, material);
                    // tmesh1.position.x = 4.5
                    // coinupdate.push(tmesh1)
                    // coinupdate.push(tmesh)
                    // // textMesh.position.x=0;
                    // // tmesh1.depth=10;
                    // tmesh.add(tmesh1)
                    // // tmesh1.position.y
                    // scene.add(tmesh)

                }

            } else if (!stage1) {
                return;
            }
            var now = performance.now();
            var elapsed = now - time0;
            time0 = now;
            fps = Math.floor(1 / (elapsed / 1000));
            elapsedTime += clock.getDelta();
            var txtcount = parseInt(elapsedTime * 20) % 100
            if(gameoverflag){
              var txtcount2 = parseInt(elapsedTime * 3) % 1000
              var temp0=document.querySelectorAll(".gameover");
              if(txtcount2%2==0){
                temp0[0].children[1].style.backgroundColor="rgba(50, 200, 100, 0.4)"

                // temp0[0].children[1].style.backgroundImage = 'url("png/green_button09.png")'
                // temp0[1].children[1].style.backgroundImage = 'url("png/blue_button09.png")'


              }else{
                temp0[0].children[1].style.backgroundColor="rgba(250, 80, 80, 0.4)"
                // temp0[0].children[1].style.backgroundImage = 'url("png/red_button08.png")'
                // temp0[1].children[1].style.backgroundImage = 'url("png/red_button08.png")'
              }
            }

            // if(txtcount==0){
            // 	for(let i=0;i<6;i++){
            // 			if(i==activeFloor) continue
            // 			if(soundic[sdic[i][0]]?.isPlaying){
            // 					soundic[sdic[i][0]].stop();
            // 			}
            // 	}
            // 	if(!soundic[sdic[i][0]]?.isPlaying){
            // 		soundic[sdic[activeFloor][0]]?.play();
            // 	}
            // }

            if(fpslst.length>30) {
              var fsum=0;
              fpslst.forEach((item) => {
                fsum+=item;
              });

              document.getElementById('fps').innerText=String(parseInt(fsum/fpslst.length));
              fpslst=[];
            }else{
              fpslst.push(fps);
            }




            if (skin0 && skinflag) {
                if (txtcount != txttimebuf) {
                    if(particleflag){
                      const positions0 = particles.geometry.attributes.position.array;
                      // const size0 = particles.geometry.attributes.size.array;
                      const scales0 = particles.geometry.attributes.scale.array;
                      // console.log(positions)
                      var i = 0,
                          j = 0;
                      for (let ix = 0; ix < 5; ix++) {
                          for (let iy = 0; iy < 5; iy++) {
                              positions0[i + 1] = bh * ((Math.sin((ix + txtcount) * 0.15) * 0.1) - (Math.sin((iy + txtcount) * 0.15) * 0.1));
                              scales0[j] = 0.5+(Math.sin((ix * txtcount / 2) * 0.25 / 3)) * (1 + 0) + (Math.sin((iy * txtcount / 3) * 0.25)) * (1 + 0);
                              // scales0[ j ] = 32
                              i += 3;
                              j++;
                          }
                      }
                      particles.geometry.attributes.position.needsUpdate = true;
                      // particles.geometry.attributes.size.needsUpdate = true;
                      particles.geometry.attributes.scale.needsUpdate = true;
                    }

                    // particles.geometry.setAttribute( 'position', new THREE.Float32BufferAttribute( positions, 3 ) );
                    // particles.geometry.setAttribute( 'color', new THREE.Float32BufferAttribute( colors, 3 ) );
                    // particles.geometry.setAttribute( 'size', new THREE.Float32BufferAttribute( sizes, 1 ).setUsage( THREE.DynamicDrawUsage ) );

                    if(skinnum==1||skinnum==2){
                      // txts[0].material = createtxt("  FPS: " + String(fps), txtcount)

                      for (var i = 0; i < cubes.length; i++) {

                          // if(i==0) continue;
                          txts[i].material = txtlst[i][txtcount];

                      }
                    }

                    txttimebuf = txtcount;
                }
            } else if (!skinflag) {}
            if (tilting) {
                for (var i = 0; i < cubes.length; i++) {
                    let force0 = new CANNON.Vec3();
                    if (i == 0) {
                        var forcex = 0
                        var forcez = 0
                    } else {
                        var forcex = (-cubes[i - 1].body.position.x + cubes[i].body.position.x)
                        var forcez = (-cubes[i - 1].body.position.z + cubes[i].body.position.z)
                    }
                    // if(txttimebuf==txtcount)
                    if (skinflag) {
                        if (skin1 || skin0) {
                            if (gameoverflag) {
                                mouth1[i].material.visible = false;
                                mouth2[i].material.visible = true;
                                mouth2[i].material.color = new THREE.Color(0xF86F08);
                                eye1[i][0].material.visible = false;
                                eye1[i][1].material.visible = false;
                                eye2[i][0].material.visible = true;
                                eye2[i][1].material.visible = true;
                                eye2[i][2].material.visible = true;
                                eye2[i][3].material.visible = true;
                            } else {
                                if (Math.abs(cubes[i].mesh.rotation.x) > 0.07 || Math.abs(cubes[i].mesh.rotation.z) > 0.07 || Math.abs(forcex > bw / 6) || Math.abs(forcez > bw / 6)) {
                                    mouth1[i].material.visible = false;
                                    mouth2[i].material.visible = true;
                                    eye1[i][0].material.color = new THREE.Color(0xFFA401);
                                    eye1[i][1].material.color = new THREE.Color(0xFFA401);
                                } else {
                                    mouth1[i].material.visible = true;
                                    mouth2[i].material.visible = false;
                                    eye1[i][0].material.color = new THREE.Color(0x00C85F);
                                    eye1[i][1].material.color = new THREE.Color(0x00C85F);
                                }
                            }
                        }
                    }
                    if (i == 0) continue;
                    if (Math.abs(forcex > bw / 2) || Math.abs(forcez > bw / 2)) {
                        forcex = 0
                        forcez = 0
                    } else {
                        if (forcex > 1.5) {
                            forcex = 1.5;
                        }
                        if (forcex < -1.5) {
                            forcex = -1.5;
                        }
                        if (forcez > 1.5) {
                            forcez = 1.5;
                        }
                        if (forcez < -1.5) {
                            forcez = -1.5;
                        }
                    }
                    force0.set(forcex * 1.5, 0, forcez * 1.5);
                    // console.log(String(forcex)+" "+String(forcey));
                    if (startflag) cubes[i].body.applyForce(force0, cubes[i].body.position);
                }
            }
            if (arrowon) {
                while (arrows.length > 0) {
                    scene.remove(arrows.pop());
                }
                for (var i = 0; i < cubes.length; i++) {
                    if (i != 0) {
                        let force0 = new CANNON.Vec3();
                        force0.set((-cubes[i - 1].body.position.x + cubes[i].body.position.x), 0, (-cubes[i - 1].body.position.z + cubes[i].body.position.z));
                        if (!gameoverflag) cubes[i].body.applyForce(force0, cubes[i].body.position);
                        var dir = new THREE.Vector3(2 * (-cubes[i - 1].body.position.x + cubes[i].body.position.x), 0, 2 * (-cubes[i - 1].body.position.z + cubes[i].body.position.z));
                        dir.normalize();
                        var origin = new THREE.Vector3(cubes[i].body.position.x, cubes[i].mesh.position.y, cubes[i].body.position.z);
                        var length0 = 2 * Math.sqrt(4 * (-cubes[i - 1].body.position.x + cubes[i].body.position.x) * (-cubes[i - 1].body.position.x + cubes[i].body.position.x) + 4 * (-cubes[i - 1].body.position.z + cubes[i].body.position.z) * (-cubes[i - 1].body.position.z + cubes[i].body.position.z));
                        var length = bw / 1.2
                    } else {
                        var dir = new THREE.Vector3((cubes[i].body.position.x), 0, (cubes[i].body.position.z));
                        dir.normalize();
                        var origin = new THREE.Vector3(cubes[i].body.position.x, cubes[i].mesh.position.y, cubes[i].body.position.z);
                        var length0 = Math.sqrt((cubes[i].body.position.x) * (cubes[i].body.position.x) + (cubes[i].body.position.z) * (cubes[i].body.position.z));
                        var length = bw / 1.2
                    }
                    var hex = colorlst0[colornum0][i];
                    var arwidth = length0 * 0.3
                    if (arwidth > 3) {
                        arwidth = 3;
                    }
                    var arr = new THREE.ArrowHelper(dir, origin, length, hex, length * 0.15, arwidth)
                    // if(i==4) console.log(length0*0.2);
                    arr.children.forEach((object, index) => {
                        object.material.opacity = 0;
                        object.material.transparent = true;
                    })
                    arr.remove(arr.children[0]);
                    scene.add(arr)
                    arrows.push(arr);
                }
            }
            if (guideflag && !gameoverflag) {
                guide[0].position.x = cubes[0].mesh.position.x
                guide[0].position.z = cubes[0].mesh.position.z
                guide[1].position.x = cubes[0].mesh.position.x
                guide[1].position.z = cubes[0].mesh.position.z
                guide[2].position.x = cubes[0].mesh.position.x
                guide[2].position.z = cubes[0].mesh.position.z
                if (activeFloor < cubes.length) {
                    guide[2].material.opacity = 0.2;
                } else {
                    guide[2].material.opacity = 0.4;
                }
            }
            if (dimlines.length > 0) {
                dimlines.forEach((item) => {
                    scene.remove(dimlines.pop())
                })
            }
            if (curveflag && !gameoverflag) {
                var pointlst = [];
                // pointlst.push(new THREE.Vector3(cubes[0].mesh.position.x,0,cubes[0].mesh.position.z))
                for (var i = 0; i < cubes.length; i++) {
                    pointlst.push(new THREE.Vector3(cubes[i].mesh.position.x, cubes[i].mesh.position.y + bh / 4, cubes[i].mesh.position.z))
                }
                for (var i = 0; i < cubes.length; i++) {
                    // var material = new THREE.LineDashedMaterial( { color: colorlst[colornum][3], dashSize:1, gapSize: 0.5 ,linewidth: 0.5,  scale: 4
                    // })
                    // var points = [];
                    // if(averageflag){
                    //   points.push( new THREE.Vector3( avx, pointlst[i].y, avz ) );
                    // }else{
                    //   points.push( new THREE.Vector3( cubes[0].mesh.position.x, pointlst[i].y, cubes[0].mesh.position.z ) );
                    // }
                    // points.push( pointlst[i] );
                    // var geometry = new THREE.BufferGeometry().setFromPoints( points );
                    // var line = new THREE.Line( geometry, material );
                    // line.computeLineDistances();
                    var dir = new THREE.Vector3(-pointlst[i].x + avx, 0, -pointlst[i].z + avz);
                    dir.normalize();
                    var origin = new THREE.Vector3(pointlst[i].x, th + pointlst[i].y, pointlst[i].z);
                    var length = Math.sqrt((pointlst[i].x - avx) * (pointlst[i].x - avx) + (pointlst[i].z - avz) * (pointlst[i].z - avz));
                    var hex = colorlst0[colornum0][0];
                    var arrowHelper = new THREE.ArrowHelper(dir, origin, length, hex, length, 0.2 * Math.sqrt(length))
                    if (i == activeFloor) {
                        arrowHelper.children.forEach((item) => {
                            item.material.opacity = 0.3;
                            item.material.transparent = true;
                        })
                    } else {
                        arrowHelper.children.forEach((item) => {
                            item.material.opacity = 0;
                            item.material.transparent = true;
                        })
                    }
                    // scene.add(arrowHelper);
                    // dimlines.push(arrowHelper);
                }
            }
            // cubes.forEach((item)=>{
            //     // var matrix=item.mesh.userData["game2048"].board;
            //   let force0 = new CANNON.Vec3();
            //   force0.set(-0.04, 0, -0.36);
            //   item.body.applyForce(force0, item.body.position);
            // })
            if (ftiles.length != 0) {
                aniflag = true;
                // ftiles.sort(function(a, b) {
                //   return a.elapsedTime - b.elapsedTime;
                // });
                // ftiles.sort(function(a, b) {
                //   return a.q - b.q;
                // });
                //  if(ftiles[0].direction === "up"){
                //   ftiles.sort(function(a, b) {
                //   return a.a - b.a;
                // });
                // }else if(ftiles[0].direction === "down"){
                //   ftiles.sort(function(a, b) {
                //   return b.a - a.a;
                // });
                // }else if(ftiles[0].direction === "left"){
                //   ftiles.sort(function(a, b) {
                //   return a.b - b.b;
                // });
                // }else if(ftiles[0].direction === "right"){
                //   ftiles.sort(function(a, b) {
                //   return b.b- a.b;
                // });
                // }
                // let speed= 0.15*(Math.abs((item.c-item.a)+(item.d-item.b))/8);
                if(gamemod==1){
                  var speed = deltaTime*bw / 185;
                }else{
                  var speed = deltaTime*bw / 235;
                }

                // const vspeed=speed*2;
                var rmvftile = [];
                ftiles.forEach((item, index) => {
                    // if(item.body0==""){
                    //     item.body0=item.body.boardpointer[item.a][item.b];
                    //     // rmvftile.push(index);
                    //     return;
                    // }
                    if (!item.merge && item.body0 != []) item.body.boardpointer[item.c][item.d] = item.body0;
                    switch (item.direction) {
                        case 'up':
                            // if(item.body0==){
                            //     rmvftile.push(index);
                            //     return;
                            // }
                            // console.log(item);
                            item.body0.position.z -= speed;
                            // console.log("up")
                            // console.log(String(item.a)+","+String(item.b)+" -> "+String(item.c)+","+String(item.d));
                            // item.nx-=vspeed;
                            // console.log(item.body0.position.z);
                            // console.log(item.dz);
                            // console.log("result: "+String(item.body0.position.z-item.dz));
                            var 결과 = item.body0.position.z - item.dz;
                            // console.log(결과)
                            break;
                        case 'down':
                            // if(item.body0==[]){
                            //     rmvftile.push(index);
                            //     return;
                            // }
                            // console.log(item);
                            item.body0.position.z += speed;
                            // console.log("down")
                            // console.log(String(item.a)+","+String(item.b)+" -> "+String(item.c)+","+String(item.d));
                            // console.log(item.dz);
                            // console.log("result: "+String(item.body0.position.z-item.dz));
                            var 결과 = item.dz - item.body0.position.z;
                            // console.log(결과)
                            break;
                        case 'left':
                            // if(item.body0!=[]){
                            //     rmvftile.push(index);
                            //     return;
                            // }
                            // console.log(item);
                            item.body0.position.x -= speed;
                            // console.log("left")
                            // console.log(String(item.a)+","+String(item.b)+" -> "+String(item.c)+","+String(item.d));
                            // console.log(item.dx);
                            // console.log("result: "+String(item.body0.position.x-item.dx));
                            var 결과 = item.body0.position.x - item.dx;
                            // console.log(결과)
                            break;
                        case 'right':
                            // if(item.body0==[]){
                            //     rmvftile.push(index);
                            //     return;
                            // }
                            // console.log(item);
                            item.body0.position.x += speed;
                            // console.log("rigth")
                            // console.log(String(item.a)+","+String(item.b)+" -> "+String(item.c)+","+String(item.d));
                            // console.log(item.body.position.x);
                            // console.log(item.dx);
                            // console.log("result: "+String(item.body0.position.x-item.dx));
                            var 결과 = item.dx - item.body0.position.x;
                            // console.log(결과)
                            break;
                        default:
                            return;
                    }
                    if ((결과 < speed)) {
                        atchanged = elapsedTime;
                        item.body0.position.x = item.dx;
                        item.body0.position.z = item.dz;
                        if (item.merge) {
                            // type();
                            // console.log(ftiles)
                            var num = parseInt(item.body.board[item.c][item.d])
                            if(num>maxnum) maxnum=num
                            점수+=num;
                            // item.body.boardpointer[item.c][item.d].userData["text"]=String(num*2);
                            cubes[item.index].mesh.remove(item.body0);
                            item.body.boardpointer[item.a][item.b] = [];
                            // console.log(String(item.c)+", "+String(item.d))
                            if (item.body.boardpointer[item.c][item.d] != "") {
                                item.body.boardpointer[item.c][item.d].userData["time"] = elapsedTime;
                                item.body.boardpointer[item.c][item.d].userData["skin"] = "tile";
                                item.body.boardpointer[item.c][item.d].userData["merge"] = 1;
                                const color = getColorForNumber(num);
                                var tile = item.body.boardpointer[item.c][item.d];
                                if (tile.material.color.getHex() !== color) {
                                    tile.material.color.set(color);
                                }
                                const text = num.toString();
                                tile.children.forEach((item) => {
                                    tile.remove(item);
                                })
                                let ntext;
                                var jeg = parseInt(Math.log(num) / Math.log(2));
                                ntext = textmold[jeg - 1].clone();
                                ntext.material = new THREE.MeshBasicMaterial({
                                    color: 0xffffff
                                });

                                if(text.length>=3){
                                  ntext.scale.x=0.8-((text.length-3)/5);
                                }else{
                                  ntext.scale.x=1;
                                }
                                ntext.userData["time"] = elapsedTime;
                                ntext.userData["merge"] = 1;
                                tile.add(ntext);
                                tile.userData["skin"] = "tile"
                                tile.userData["skintype"] = "1"
                                tile.userData["text"] = text;
                                atchanged = elapsedTime;
                                var tempflag = true
                                tempeffects.forEach((object) => {
                                    if (object[1] >= num && object[2] == item.direction) {
                                        tempflag = false
                                    }
                                })
                                if (tempflag) {
                                    if (soundic[sdic[activeFloor][num]]?.isPlaying) {
                                        soundic[sdic[activeFloor][num]].stop();
                                    }
                                    soundic[sdic[activeFloor][num]]?.play();
                                    tempeffects.push([item.index, num, item.direction]);
                                    이펙트2(item.index, num, item.direction);
                                }

                                if(gamemod==2){
                                  // var tnum=Math.pow(2, (cubes.length-3))
                                  if(num==stacknum[activeFloor]&&activeFloor==cubes.length-1){
                                    sdic.push(nslst[templst[cubes.length+2]])

                                    var temp2 = [0, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, "up", "down", "left", "right", "upper", "lower"]
                                    var sdickeys = Object.keys(soundic);
                                    for (let j = 0; j < temp2.length; j++) {
                                        if (sdickeys.indexOf(sdic[sdic.length-1][temp2[j]]) == -1) {
                                            // var listener = new THREE.AudioListener();
                                            // var audioLoader = new THREE.AudioLoader();
                                            audioLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/sound/' + sdic[sdic.length-1][temp2[j]], function(buffer) {
                                                var sound = new THREE.Audio(listener);
                                                sound.setBuffer(buffer);
                                                sound.setVolume(0.3);
                                                if (j == 0) sound.setLoop(true);
                                                soundic[sdic[sdic.length-1][temp2[j]]] = sound;
                                            });
                                        }
                                    }
                                    var temp = [];
                                    var text1 = "재생 중: " + sdic[cubes.length][0].substring(0, sdic[cubes.length][0].length - 4) + " "
                                    for (var i = 0; i < 100; i++) {
                                        var canvas = document.createElement('canvas');
                                        var ctx = canvas.getContext('2d');
                                        // const padding = 10;
                                        ctx.globalAlpha = 1;
                                        canvas.width = 16.5 * 6;
                                        canvas.height = 5.6 * 6;
                                        var tl = text1.length;
                                        var textw = tl * (canvas.width / 10);
                                        ctx.font = `${14}px Arial`;
                                        ctx.fillStyle = 0xFFFFFF;
                                        // // ctx.fillText(text, padding, padding + textHeight * 0.8);
                                        ctx.fillText(text1, 0 - (i) * (textw / 100), canvas.height * 0.8, textw, canvas.height);
                                        ctx.fillText(text1, textw - (i) * (textw / 100), canvas.height * 0.8, textw, canvas.height);
                                        ctx.font = `${7}px Arial`;

                                        ctx.fillText("  AKAI PRO ", 0, canvas.height * 0.35, canvas.width / 2.5, canvas.height);
                                        // ctx.drawImage(unitimg["scroll"], 0,0,314,1664)
                                        var img3 = new THREE.CanvasTexture(canvas);
                                        var material5 = new THREE.MeshLambertMaterial({
                                            map: img3,
                                            side: THREE.DoubleSide,
                                            transparent: true,
                                            opacity: 1
                                        });
                                        temp.push(material5);
                                    }
                                    txtlst.push(temp);

                                    // console.log(sdic);
                                    // console.log(txtlst);


                                    // dl2.position.y=50+((cubes.length-3) * bh)
                                    // dl2.shadow.camera.position.y= bh * (cubes.length)

                                    const game2048 = new Game2048(칸, cubes.length);

                                    cubes.push(newbox(cubes[cubes.length-1].mesh.position.x,  (cubes.length-3) * bh+bh, cubes[cubes.length-1].mesh.position.z, bw, bh, bw, game2048, cubes.length, true));
                                    cubes[cubes.length-1].mesh.quaternion.copy(cubes[cubes.length-2].mesh.quaternion);
                                    cubes[cubes.length-1].body.quaternion.copy(cubes[cubes.length-2].body.quaternion);

                                    cubes[cubes.length-1].mesh.userData.body = cubes[cubes.length-1].body;
                                    cubes[cubes.length-1].mesh.userData.game2048 = game2048
                                    cubes[cubes.length-1].mesh.userData.game2048.spawnTile();
                                    activeFloor=cubes.length;
                                    stacktime=elapsedTime;

                                    camera.left = -bw * 1.3-cubes.length/2;
                                    camera.right = bw * 1.3 * 4+cubes.length/2;
                                    camera.top = bw * 1.3+cubes.length/2;
                                    camera.bottom = -bw * 1.3 * 4-cubes.length/2;
                                    camera.near = 0.1;
                                    camera.far = 1000;
                                    camera.lookAt.x=0
                                    camera.lookAt.z=0

                                  }else{
                                    // forceAmount=1000;
                                    var force = new CANNON.Vec3();
                                    // var offset = new CANNON.Vec3(-bw/2+(tw/2)+(tw)*(col), 0, -bw/2+(tw/2)+(tw)*(row));
                                    switch (item.direction) {
                                        case 'up':
                                            force.set(0, 0, -forceAmount * Math.sqrt((num) * 25 ));
                                            break;
                                        case 'down':
                                            force.set(0, 0, forceAmount * Math.sqrt((num) * 25 ));
                                            break;
                                        case 'left':
                                            force.set(-forceAmount * Math.sqrt((num) * 25 ), 0, 0);
                                            break;
                                        case 'right':
                                            force.set(forceAmount * Math.sqrt((num) * 25 ), 0, 0);
                                            break;
                                        default:
                                            return;
                                    }
                                    let quaternion = new CANNON.Quaternion();
                                    quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), cubes[item.index].mesh.rotation.y);
                                    let rotatedVec = force.clone();
                                    // rotatedVec.applyQuaternion(quaternion);
                                    rotatedVec=quaternion.vmult(force);
                                      // var a=cubes[this.index].body.position
                                      // cubes[activeFloor].body.applyForce(force, cubes[activeFloor].body.position.clone().vadd(offset));
                                      cubes[item.index].body.applyForce(rotatedVec, cubes[item.index].body.position);
                                  }

                                }else{
                                  var force = new CANNON.Vec3();
                                  // var offset = new CANNON.Vec3(-bw/2+(tw/2)+(tw)*(col), 0, -bw/2+(tw/2)+(tw)*(row));
                                  switch (item.direction) {
                                      case 'up':
                                          force.set(0, 0, -forceAmount * Math.sqrt((num) *20 +10*(1+2.2* (5 - item.index))));
                                          break;
                                      case 'down':
                                          force.set(0, 0, forceAmount * Math.sqrt((num) * 20 +10*(1+2.2* (5 - item.index))));
                                          break;
                                      case 'left':
                                          force.set(-forceAmount * Math.sqrt((num) * 20 +10*(1+2.2* (5 - item.index))), 0, 0);
                                          break;
                                      case 'right':
                                          force.set(forceAmount * Math.sqrt((num) * 20 +10*(1+2.2* (5 - item.index))), 0, 0);
                                          break;
                                      default:
                                          return;
                                  }


                                  let quaternion = new CANNON.Quaternion();
                                  quaternion.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), cubes[item.index].mesh.rotation.y);
                                  let rotatedVec = force.clone();
                                  // rotatedVec.applyQuaternion(quaternion);
                                  rotatedVec=quaternion.vmult(force);

                                  // console.log(rotatedVec);




                                    // var a=cubes[this.index].body.position
                                    // cubes[activeFloor].body.applyForce(force, cubes[activeFloor].body.position.clone().vadd(offset));
                                    cubes[item.index].body.applyForce(rotatedVec, cubes[item.index].body.position);
                                }

                            } else {}
                            // type();
                        } else {
                            // if (soundic[sdic[activeFloor][item.direction]][0].isPlaying) {
                            //     soundic[sdic[activeFloor][item.direction]][0].stop();
                            // }
                            if (!soundic[sdic[item.index][item.direction]]?.isPlaying) soundic[sdic[item.index][item.direction]]?.play();


                        }
                        rmvftile.push(index);
                    }
                })

                if (rmvftile.length != 0 && ftiles.length == rmvftile.length && ftiles[0].body.boardChanged) {
                    ftiles[0].body.spawnTile(ftiles[0].direction);
                    tempeffects = [];
                    // var dupeffects=findDuplicates(tempeffects);
                    // var neweffects=removeDuplicates(tempeffects);
                    // console.log(dupeffects);
                    // if (sounds[0][0].isPlaying) {
                    //     sounds[0][0].stop();
                    // }
                    if (sleepflag) {
                        sleepflag = false;
                    }
                }
                rmvftile.sort(function(a, b) {
                    return b - a;
                });
                rmvftile.forEach((item) => {
                    ftiles.splice(item, 1);
                })
            } else {
                aniflag = false;
            }
            // }

            if (false) {
                cubes.forEach((item) => {
                    var matrix = item.mesh.userData["game2048"].board;
                    let force0 = new CANNON.Vec3();
                    for (i = 0; i < 4; i++) {
                        for (j = 0; j < 4; j++) {
                            if (matrix[i][j] > 0) {
                                var offset = new CANNON.Vec3(j * (boxSize / 2) - (boxSize), 0, i * (boxSize / 2) - (boxSize));
                                force0.set(0, -1 * matrix[i][j], 0);
                                item.body.applyForce(force0, item.body.position.clone().vadd(offset));
                                // console.log(matrix[i][j])
                            }
                        }
                    }
                })
            }

            if (false) {
                cubes.forEach((item) => {
                    // var matrix=item.mesh.userData["game2048"].board;
                    let force0 = new CANNON.Vec3();
                    if (Math.sqrt(Math.abs((item.body.position.x) * (item.body.position.z))) < 0.2) {
                        force0.set(50 * (0 - item.body.position.x), 0, 50 * (0 - item.body.position.z));
                        item.body.applyForce(force0, item.body.position);
                    } else {
                        force0.set(10 * (0 - item.body.position.x), 0, 10 * (0 - item.body.position.z));
                        item.body.applyForce(force0, item.body.position);
                    }
                })
            }


            if (effects.length != 0) { //효
                // if (activeFloor == effects[0][3]) {
                //     ring[0].position.set(cubes[effects[0][3]].mesh.position.x, cubes[effects[0][3]].mesh.position.y - th / 3, cubes[effects[0][3]].mesh.position.z)
                //     ring[0].children.forEach((item) => {
                //         // item.material.visible = true;
                //     })
                //     ring[0].rotation.x = cubes[effects[0][3]].mesh.rotation.x - Math.PI / 2
                //     ring[0].rotation.z = cubes[effects[0][3]].mesh.rotation.z
                //     switch (effects[0][2]) {
                //         case 'up':
                //             ring[0].rotation.y = cubes[effects[0][3]].mesh.rotation.y
                //             break;
                //         case 'down':
                //             ring[0].rotation.y = cubes[effects[0][3]].mesh.rotation.y + Math.PI;
                //             break;
                //         case 'left':
                //             ring[0].rotation.y = cubes[effects[0][3]].mesh.rotation.y + Math.PI / 2;
                //             break;
                //         case 'right':
                //             ring[0].rotation.y = cubes[effects[0][3]].mesh.rotation.y - Math.PI / 2;
                //             break;
                //         default:
                //             return;
                //     }
                // }
                // ring[0].quaternion.copy(cubes[activeFloor].body.quaternion);
                for (let i = effects.length-1; i >= 0; i--) {

                  if (activeFloor < cubes.length) {
                    var tempy=effects[i][0].rotation.y;

                      // item[0].quaternion.copy(cubes[effects[0][3]].body.quaternion);
                      // item[0].rotation.order = 'YXZ';
                      // item[0].rotation.y=tempy;
                      // item[0].rotation.x-= Math.PI / 2
                      // item[0].rotation.z=-cubes[effects[0][3]].mesh.rotation.z;

                      // item[0].rotation.y+=cubes[effects[0][3]].mesh.rotation.y
                      // item[0].rotation.z-=cubes[effects[0][3]].mesh.rotation.z;

                      // item[0].rotation.z = -cubes[effects[0][3]].mesh.rotation.z

                      // item[0].position.set(cubes[effects[0][3]].mesh.position.x, cubes[effects[0][3]].mesh.position.y - th / 3 + (th / 16) * index, cubes[effects[0][3]].mesh.position.z)
                  }
                  effects[i][0].scale.y +=(deltaTime/800)
                  // item[0].position.y+=0.03;
                  effects[i][0].scale.x +=(deltaTime/3000);

                  effects[i][0].material.transparent=true;

                  effects[i][0].children[0].material.alphaTest=0.6 -(effects[i][0].scale.y - 1)*0.75
                  effects[i][0].children[0].material.opacity = 0.6 -(effects[i][0].scale.y - 1)*0.75

                  effects[i][0].children[1].material.alphaTest=0.6 -(effects[i][0].scale.y - 1)*0.75
                  effects[i][0].children[1].material.opacity = 0.6 -(effects[i][0].scale.y - 1)*0.75

                  effects[i][0].children[2].material.alphaTest=0.6 -(effects[i][0].scale.y - 1)*0.75
                  effects[i][0].children[2].material.opacity = 0.6 -(effects[i][0].scale.y - 1)*0.75





                  effects[i][0].children[0].material.visible = true;

                  // item[0].children[0].material.transparent=true;
                  // effects[i][0].children[0].material.alphaTest=0.05+0.4 * Math.cos(Math.PI * (effects[i][0].scale.y - 1) / 0.8);
                  // effects[i][0].children[0].material.opacity = 0.05+0.4 * Math.cos(Math.PI * (effects[i][0].scale.y - 1) / 0.8);
                  effects[i][0].children[1].material.visible = true;
                  // item[0].children[1].material.transparent=true;
                  // effects[i][0].children[1].material.alphaTest=0.05+0.4 * Math.cos(Math.PI * (effects[i][0].scale.y - 1) / 0.8);
                  // effects[i][0].children[1].material.opacity = 0.05+0.4 * Math.cos(Math.PI * (effects[i][0].scale.y - 1) / 0.8);
                  effects[i][0].children[2].material.visible = true;
                  // item[0].children[2].material.transparent=true;
                  // effects[i][0].children[2].material.alphaTest=0.05+0.4 * Math.cos(Math.PI * (effects[i][0].scale.y - 1) / 0.8);
                  // effects[i][0].children[2].material.opacity =  0.05+0.4 * Math.cos(Math.PI * (effects[i][0].scale.y - 1) / 0.8);

                  if (effects[i][0].scale.y > 1.8) {
                      // console.log(1);

                      cubes[effects[i][3]].mesh.remove(effects[i][0]);
                      scene.remove(effects[i][0]);
                      effects.splice(i, 1);
                  }
                }
                // effects.forEach((item, index) => {
                //
                // })
            } else {
                ring[0].children.forEach((item) => {
                    item.material.visible = false;
                })
            }

            if(parseInt(elapsedTime*300)==300*60){
              showpop("1분 경과:","","+300pt",0)
              점수+=100;
            }

            if(parseInt(elapsedTime*300)==300*360){
              showpop("3분 경과:","","+300pt",0)
              점수+=300;
            }

            if(parseInt(elapsedTime*300)==300*600){
              showpop("10분 경과:","","+300pt",0)
              점수+=1000;
            }

            if(elapsedTime - stacktime > 1.3&&elapsedTime - stacktime < 1.31){
              // console.log(sdic);
              // console.log(cubes);
              // console.log(txtlst);
              // console.log(txtlst);
              if(cubes.length>=7){
                for (var j = cubes[cubes.length-2].mesh.children.length - 1; j >= 0; j--) {
                    if (cubes[cubes.length-2].mesh.children[j].userData["skin"] != skinset[skinnum]) {
                      if(cubes[cubes.length-2].mesh.children[j].userData["skin"]!="text1") cubes[cubes.length-2].mesh.remove(cubes[cubes.length-2].mesh.children[j]);
                    }
                }
              }

              cubes[cubes.length-2].mesh.children.forEach((item, i) => {
                if(item.userData["skin"] == skinset[skinnum]) item.material.transparent=false;
              });
              activeFloor=cubes.length-1;
              if (!soundic[sdic[activeFloor][0]].isPlaying) {
                  if(soundic[sdic[activeFloor-1][0]].isPlaying) soundic[sdic[activeFloor-1][0]].stop();
                  songfade=elapsedTime;
                  // console.log(songfade);
                  soundic[sdic[activeFloor][0]].play();
                  songTitleElement.innerText = sdic[activeFloor]["title"];
                  artistNameElement.innerText = sdic[activeFloor]["producer"];
                  var songInfo = document.getElementById('song-info');
                  songInfo.style.left="0px"
                  document.getElementById('songback1').style.backgroundColor=hexToHtmlColor(colorlst[colornum][1])
                  document.getElementById('songback2').style.backgroundColor=hexToHtmlColor(colorlst[colornum][2])
                  document.getElementById('songback3').style.backgroundColor=hexToHtmlColor(colorlst[colornum][3])
                  document.getElementById('song-title').style.color=hexToHtmlColor(colorlst[colornum][2])
                  document.getElementById('artist-name').style.color=hexToHtmlColor(colorlst[colornum][1])
                  document.getElementById('songback4').style.backgroundColor=hexToHtmlColor(colorlst0[colornum0][0])
                  document.getElementById('playing').style.color=hexToHtmlColor(colorlst[colornum][3])
                  if (songInfo.classList.contains("hidden")) songInfo.classList.remove("hidden");
                  songInfo.classList.add("show1");
              }

            }


            if(elapsedTime - songfade > 2.2){
              document.getElementById('song-info').classList.remove("moveleft");
              document.getElementById('song-info').style.left="150%"



              if(elapsedTime - songfade > 3){
                document.getElementById('song-info').classList.remove("show1");
                document.getElementById('song-info').classList.add("hidden");
              }

              // document.getElementById('song-info').style.opacity=1-0.5*parseInt((elapsedTime - songfade-1.5))


            }

            if (elapsedTime - atchanged > 0 && elapsedTime - atchanged < 0.1) {
                bounceflag = true;
                if (activeFloor != cubes.length) {
                    cubes[activeFloor].mesh.children.forEach((item) => {
                        if (item.userData["1"] == true) return
                        if (item.userData.merge == 1) {
                            if (elapsedTime - item.userData.time > 0 && elapsedTime - item.userData.time < 0.1) {
                                item.scale.x = 0.6 + 4 * (elapsedTime - item.userData.time);
                                item.scale.z = 0.6 + 4 * (elapsedTime - item.userData.time);
                                item.scale.y = 0.5 * Math.cos(2 * 2 * 15.708 * (elapsedTime - item.userData.time)) + 0.4
                                tscale = item.scale.y
                                // console.log(item.scale.x)
                            }

                        } else {
                            if (elapsedTime - item.userData.time > 0 && elapsedTime - item.userData.time < 0.1) {
                                item.scale.x = 0.7 + 4 * (elapsedTime - item.userData.time);
                                item.scale.z = 0.7 + 4 * (elapsedTime - item.userData.time);
                                item.scale.y = 0.6 * Math.cos((elapsedTime - item.userData.time)) + 0.3
                                tscale = 0.9;
                                // console.log(item.scale.x)
                            }

                        }
                        // for(item of cubes[activeFloor].mesh.children){
                    })
                }
            } else {
                tscale = 0.9;
                if (activeFloor != cubes.length) {
                    cubes[activeFloor].mesh.children.forEach((item) => {
                          if (item.userData["skin"]=="effect") return;
                        if (item.userData["1"] || item.userData["2"] || item.userData["3"] || item.userData["4"] || item.userData["5"] || skinset.indexOf(item.userData["skin"]) != -1) return
                        item.scale.x = 1
                        item.scale.z = 1
                        item.scale.y = 0.9
                    })
                }
                bounceflag = false;
            }

            var overlimit = 0;


            if (!gameoverflag) {

                  cubes.forEach((item, index) => {
                      var tempheight;
                      if(gamemod==2){
                        tempheight=bh*(index-4)
                      }else{
                        tempheight=bh*4
                      }

                      if (index > 3 && item.mesh.position.y < tempheight) {
                          // overlimit++;
                          if(!gameoverflag||fullmax){
                            gameoverflag = true;

                            endsound=sdic[activeFloor][0];
                            soundic[sdic[activeFloor][0]].setVolume(0.15);
                            soundic[esound[4]].play();
                            topcam = false;

                            document.getElementById("gameover-overlay").classList.remove("fade");
                            document.getElementById("gameover-overlay").classList.remove("hidden");
                            document.getElementById("gameover-overlay").classList.add("show");


                            var temp1=document.querySelectorAll(".gameover");

                            temp1.forEach((item, i) => {
                              item.style.opacity=0;
                            });

                            var temp1=document.querySelectorAll(".gameinfo1");
                            temp1[0].children[0].style.color=hexToHtmlColor(colorlst[colornum][3])
                            if(점수>25000){
                              temp1[0].children[0].innerText="G"
                              temp1[0].children[1].innerText="oat!!!!!!!!"
                            }if(점수>20000){
                              temp1[0].children[0].innerText="L"
                              temp1[0].children[1].innerText="egend!!!!!!!"
                            }if(점수>15000){
                              temp1[0].children[0].innerText="SS"
                              temp1[0].children[1].innerText="pecial!!!!!"
                            }if(점수>10000){
                              temp1[0].children[0].innerText="S"
                              temp1[0].children[1].innerText="uperb!!!!!"
                            }else if(점수>8000){
                              temp1[0].children[0].innerText="A"
                              temp1[0].children[1].innerText="wesome!!!!"
                            }else if(점수>6000){
                              temp1[0].children[0].innerText="B"
                              temp1[0].children[1].innerText="rilliant!!!"
                            }else if(점수>3000){
                              temp1[0].children[0].innerText="C"
                              temp1[0].children[1].innerText="ool!!"
                            }else if(점수>1000){
                              temp1[0].children[0].innerText="D"
                              temp1[0].children[1].innerText="elightful!"
                            }else{
                              temp1[0].children[0].innerText="E"
                              temp1[0].children[1].innerText="fficeint"
                            }

                            document.getElementById("총획득").classList.remove("show");
                            document.getElementById("코인").classList.remove("show");
                            document.getElementById("기본").classList.remove("show");
                            document.getElementById("full").classList.remove("show");
                            document.getElementById("max").classList.remove("show");
                            document.getElementById("시간").classList.remove("show");
                            document.getElementById("총획득").classList.add("hidden");
                            document.getElementById("코인").classList.add("hidden");
                            document.getElementById("기본").classList.add("hidden");
                            document.getElementById("full").classList.add("hidden");
                            document.getElementById("max").classList.add("hidden");
                            document.getElementById("시간").classList.add("hidden");
                            if(gamemod==2){
                              document.querySelector(".gameinfo0").innerText="floor: "+String(cubes.length-3)+"\nbest: "+String(parseInt(20));
                            }else{
                              document.querySelector(".gameinfo0").innerText="point: "+String(점수)+"\nbest: "+String(parseInt(bestscore));
                            }
                            document.getElementById('song-info').classList.remove("show1");
                            document.getElementById('song-info').classList.add("hidden");
                            showinfo();
                            activeFloor = cubes.length;
                          }
                      }
                  })
            }

            if(gameoverflag){

              for (var i = 0; i < 5; i++) {
                cubes[i].mesh.children.forEach((item, i) => {
                  if(item.userData["skin"]=="tile"){
                    item.material.visible=false;
                  }else if(item.userData["skin"]==skinset[skinnum]){
                    item.material.opacity=1;
                    item.material.alphaTest=1;
                  }
                });
              }
            }
            sideback.forEach((item) => {
              item.material.visible=false;
            });

            if (orthoflag && lookcenter&&bf!=activeFloor) {
                if (!gameoverflag) {
                    if (activeFloor == cubes.length) {
                        camera.position.set(
                            bw * 2 + avx,
                            // cubes[cubes.length-1].mesh.position.y+bh*5,
                            bh * (cubes.length + 3.5),
                            bw * 2 + avz,
                        );
                        if(gamemod==2) {
                          camera.position.y= bh * (cubes.length+0.5)

                        }
                        // camera.lookAt(cubes[0].body.position.x,cubes[cubes.length-1].mesh.position.y+bh*5,cubes[0].body.position.y)
                        // var isoAngle = Math.atan(1 / Math.sqrt(2));
                        // camera.rotation.order = 'YXZ';
                        // camera.rotation.x = -isoAngle;
                        cubes.forEach((item, index) => {
                            if (arrowon) {
                                arrows[index].children[0].material.opacity = 0;
                                arrows[index].children[0].material.transparent = true;
                            }
                            item.mesh.material.visible = false
                            item.mesh.material.opacity = 1
                            item.mesh.material.alphaTest=1
                            item.mesh.material.transparent = false;
                            item.mesh.children.forEach((tile) => {
                                if (tile.userData["skin"] == "tile") {
                                    tile.material.visible = false;
                                    tile.material.opacity = 0
                                    tile.material.transparent = true;
                                    tile.children.forEach((text) => {
                                        text.material.opacity = 1;
                                        text.material.visible = false;
                                        text.material.transparent = true;
                                    })
                                } else if (tile.userData["skin"] == "bottom") {
                                    tile.material.visible = false;
                                    tile.material.opacity = 0
                                    tile.material.transparent = true;
                                } else if (tile.userData["skin"] == skinset[skinnum]) {
                                    tile.material.visible = true;
                                    tile.material.opacity = 1;
                                    tile.material.transparent = false;

                                } else if (tile.userData["skin"] == "text1") {
                                    if (skinnum == 1) {
                                        tile.position.z = -bw / 8
                                        tile.material.visible = true;
                                        tile.material.opacity = 1
                                        tile.material.transparent = true;
                                    } else if (skinnum == 2) {
                                        tile.position.z = 0
                                        tile.material.visible = true;
                                        tile.material.opacity = 1
                                        tile.material.transparent = true;
                                    } else {
                                        tile.material.visible = false;
                                    }
                                } else if (tile.userData["skin"].substring(0, tile.userData["skin"].length - 1) == "txtback") {
                                    if (skinnum == 1) {
                                        tile.position.z = -bw / 8
                                        tile.material.visible = true;
                                        tile.material.opacity = 0.3
                                        tile.material.transparent = true;
                                    } else if (skinnum == 2) {
                                        tile.position.z = 0
                                        tile.material.visible = true;
                                        tile.material.opacity = 0.3
                                        tile.material.transparent = true;
                                    } else {
                                        tile.material.visible = false;
                                    }
                                } else {
                                    tile.material.visible = false;
                                    tile.material.opacity = 0
                                    tile.material.transparent = true;
                                }

                            });
                        })
                    } else {
                        for (var i = 0; i < cubes.length; i++) {

                            if (i == activeFloor) {
                                camera.position.set(
                                    bw * 2 + avx,
                                    // cubes[cubes.length-1].mesh.position.y+(i-3)*bh,
                                    // cubes[cubes.length-1].mesh.position.y+bh*5,
                                    bh * (cubes.length + 3.5),
                                    bw * 2 + avz,
                                );
                                if(gamemod==2) camera.position.y= bh * (cubes.length+0.5)

                                if (arrowon) arrows[i].children[0].material.opacity = 0.5
                                // cubes[i].mesh.tile.material.visible = true
                                cubes[i].mesh.opacity = 0.05;
                                cubes[i].mesh.alphaTest = 0.05;
                                cubes[i].mesh.transparent = true;

                                cubes[i].mesh.children.forEach((tile, index) => {
                                    if (tile.userData["skin"] == "tile") {
                                        tile.material.visible = true;
                                        tile.material.opacity = 1
                                        tile.material.transparent = false;
                                        tile.children.forEach((text) => {
                                            text.material.opacity = 1;
                                            text.material.visible = true;
                                            text.material.transparent = false;
                                        })
                                    } else if (tile.userData["skin"] == "bottom") {

                                            tile.material.visible = true;
                                            tile.material.opacity = 1
                                            tile.material.transparent = false;

                                    } else if (tile.userData["skin"] == skinset[skinnum]) {
                                        tile.material.visible = true;
                                        tile.material.opacity = 0.05;
                                        tile.material.alphaTest = 0.05;
                                        tile.material.transparent = true;
                                    } else if (tile.userData["skin"] == "text1") {
                                        if (skinnum == 1) {
                                            tile.position.z = -bw / 8
                                            tile.material.visible = true;
                                            tile.material.opacity = 0.2
                                            tile.material.transparent = true;
                                        } else if (skinnum == 2) {
                                            tile.position.z = 0
                                            tile.material.visible = true;
                                            tile.material.opacity = 0.2
                                            tile.material.transparent = true;
                                        } else {
                                            tile.material.visible = false;
                                        }
                                    } else if (tile.userData["skin"].substring(0, tile.userData["skin"].length - 1) == "txtback") {
                                        if (skinnum == 1) {
                                            tile.position.z = -bw / 8
                                            tile.material.visible = true;
                                            tile.material.opacity = 0.05
                                            tile.material.transparent = true;
                                        } else if (skinnum == 2) {
                                            tile.position.z = 0
                                            tile.material.visible = true;
                                            tile.material.opacity = 0.05
                                            tile.material.transparent = true;
                                        } else {
                                            tile.material.visible = false;
                                        }
                                    } else {
                                        tile.material.visible = false;
                                        tile.material.opacity = 0
                                        tile.material.transparent = true;
                                    }

                                });
                            } else {
                                if (i > activeFloor) {
                                    cubes[i].mesh.material.opacity = 0.04;
                                    cubes[i].mesh.material.alphaTest = 0.04;
                                    cubes[i].mesh.material.transparent = true;
                                    cubes[i].mesh.children.forEach((tile) => {
                                        if (tile.userData["skin"] == "tile") {
                                            tile.material.visible = false;
                                            tile.material.opacity = 1
                                            tile.material.transparent = false;
                                            tile.children.forEach((text) => {
                                                text.material.opacity = 1;
                                                text.material.visible = false;
                                                text.material.transparent = false;
                                            })
                                        } else if (tile.userData["skin"] == "bottom") {
                                            tile.material.visible = false;
                                            tile.material.opacity = 1
                                            tile.material.transparent = false;
                                        } else if (tile.userData["skin"] == skinset[skinnum]) {
                                            if(activeFloor==3||(activeFloor<3&&i==4)){
                                              tile.material.visible = true;
                                              tile.material.opacity = 0.12
                                              tile.material.alphaTest = 0.12
                                              tile.material.transparent = true;
                                            }else{
                                              tile.material.visible = true;
                                              tile.material.opacity = 0.04 + (i - activeFloor) * 0.015;
                                              tile.material.alphaTest = 0.04 + (i - activeFloor) * 0.015;
                                              tile.material.transparent = true;
                                            }

                                        } else if (tile.userData["skin"] == "text1") {
                                            if (skinnum == 1) {
                                                tile.position.z = -bw / 8
                                                tile.material.visible = true;
                                                tile.material.opacity = 0.2
                                                tile.material.transparent = true;
                                            } else if (skinnum == 2) {
                                                tile.position.z = 0
                                                tile.material.visible = true;
                                                tile.material.opacity = 0.2
                                                tile.material.transparent = true;
                                            } else {
                                                tile.material.visible = false;
                                            }
                                        } else if (tile.userData["skin"].substring(0, tile.userData["skin"].length - 1) == "txtback") {
                                            if (skinnum == 1) {
                                                tile.position.z = -bw / 8
                                                tile.material.visible = true;
                                                tile.material.opacity = 0.05
                                                tile.material.transparent = true;
                                            } else if (skinnum == 2) {
                                                tile.position.z = 0
                                                tile.material.visible = true;
                                                tile.material.opacity = 0.05
                                                tile.material.transparent = true;
                                            } else {
                                                tile.material.visible = false;
                                            }
                                        } else {
                                            tile.material.visible = false;
                                            // tile.material.alphaTest =  0.1;
                                            tile.material.opacity = 0.1;
                                            tile.material.transparent = true;
                                        }

                                    });
                                } else {

                                    cubes[i].mesh.material.opacity = 1;
                                    cubes[i].mesh.material.transparent = false;
                                    cubes[i].mesh.children.forEach((tile, index) => {
                                        if (tile.userData["skin"] == "tile") {
                                            tile.material.visible = false;
                                            tile.material.opacity = 1
                                            tile.material.transparent = false;
                                            tile.children.forEach((text) => {
                                                text.material.opacity = 1;
                                                text.material.visible = false;
                                                text.material.transparent = false;
                                            })
                                        } else if (tile.userData["skin"] == "bottom") {
                                            tile.material.visible = false;
                                            tile.material.opacity = 1
                                            tile.material.transparent = false;
                                        } else if (tile.userData["skin"] == skinset[skinnum]) {
                                            tile.material.visible = true;
                                            tile.material.opacity = 1;
                                            // tile.material.alphaTest =  1;
                                            tile.material.transparent = false;
                                        } else if (tile.userData["skin"] == "text1") {
                                            if (skinnum == 1) {
                                                tile.position.z = -bw / 8
                                                tile.material.visible = true;
                                                tile.material.opacity = 1
                                                tile.material.transparent = true;
                                            } else if (skinnum == 2) {
                                                tile.position.z = 0
                                                tile.material.visible = true;
                                                tile.material.opacity = 1
                                                tile.material.transparent = true;
                                            } else {
                                                tile.material.visible = false;
                                            }
                                        } else if (tile.userData["skin"].substring(0, tile.userData["skin"].length - 1) == "txtback") {
                                            if (skinnum == 1) {
                                                tile.position.z = -bw / 8
                                                tile.material.visible = true;
                                                tile.material.opacity = 0.3
                                                tile.material.transparent = true;
                                            } else if (skinnum == 2) {
                                                tile.position.z = 0
                                                tile.material.visible = true;
                                                tile.material.opacity = 0.3
                                                tile.material.transparent = true;
                                            } else {
                                                tile.material.visible = false;
                                            }
                                        } else {
                                            tile.material.visible = false;
                                            // tile.material.alphaTest =  0.1;
                                            tile.material.opacity = 0.1;
                                            tile.material.transparent = true;
                                        }
                                    });
                                }
                            }
                        }
                    }
                }
            }else {
              camera.position.x=bw * 2 + avx;
              camera.position.z=bw * 2 + avz;


              if(gamemod==2&&activeFloor==cubes.length){
                // dl2.shadow.camera.position.y= bh * (cubes.length)
                cubes[cubes.length-2].mesh.children.forEach((tile, index) => {
                  if (tile.userData["skin"] == "tile") {
                    tile.material.visible = false;
                  }
                })
              }
              if(skinnum==1||skinnum==2){
                for (var i = 0; i < cubes.length; i++) {
                    if (i == activeFloor) {
                        cubes[i].mesh.children.forEach((tile, index) => {
                            if (tile.userData["skin"] == "text1") {
                                if (skinnum == 1) {
                                    tile.position.z = -bw / 8
                                    tile.material.visible = true;
                                    tile.material.opacity = 0.2
                                    tile.material.transparent = true;
                                } else if (skinnum == 2) {
                                    tile.position.z = 0
                                    tile.material.visible = true;
                                    tile.material.opacity = 0.2
                                    tile.material.transparent = true;
                                } else {
                                    tile.material.visible = false;
                                }
                            } else if (tile.userData["skin"].substring(0, tile.userData["skin"].length - 1) == "txtback") {
                                if (skinnum == 1) {
                                    tile.position.z = -bw / 8
                                    tile.material.visible = true;
                                    tile.material.opacity = 0.05
                                    tile.material.transparent = true;
                                } else if (skinnum == 2) {
                                    tile.position.z = 0
                                    tile.material.visible = true;
                                    tile.material.opacity = 0.05
                                    tile.material.transparent = true;
                                } else {
                                    tile.material.visible = false;
                                }
                            }
                        });
                    } else {
                        if (i > activeFloor) {
                            cubes[i].mesh.children.forEach((tile) => {
                                if (tile.userData["skin"] == "text1") {
                                    if (skinnum == 1) {
                                        tile.position.z = -bw / 8
                                        tile.material.visible = true;
                                        tile.material.opacity = 0.2
                                        tile.material.transparent = true;
                                    } else if (skinnum == 2) {
                                        tile.position.z = 0
                                        tile.material.visible = true;
                                        tile.material.opacity = 0.2
                                        tile.material.transparent = true;
                                    } else {
                                        tile.material.visible = false;
                                    }
                                } else if (tile.userData["skin"].substring(0, tile.userData["skin"].length - 1) == "txtback") {
                                    if (skinnum == 1) {
                                        tile.position.z = -bw / 8
                                        tile.material.visible = true;
                                        tile.material.opacity = 0.05
                                        tile.material.transparent = true;
                                    } else if (skinnum == 2) {
                                        tile.position.z = 0
                                        tile.material.visible = true;
                                        tile.material.opacity = 0.05
                                        tile.material.transparent = true;
                                    } else {
                                        tile.material.visible = false;
                                    }
                                }

                            });
                        } else {
                            cubes[i].mesh.children.forEach((tile, index) => {
                                if (tile.userData["skin"] == "text1") {
                                    if (skinnum == 1) {
                                        tile.position.z = -bw / 8
                                        tile.material.visible = true;
                                        tile.material.opacity = 1
                                        tile.material.transparent = true;
                                    } else if (skinnum == 2) {
                                        tile.position.z = 0
                                        tile.material.visible = true;
                                        tile.material.opacity = 1
                                        tile.material.transparent = true;
                                    } else {
                                        tile.material.visible = false;
                                    }
                                } else if (tile.userData["skin"].substring(0, tile.userData["skin"].length - 1) == "txtback") {
                                    if (skinnum == 1) {
                                        tile.position.z = -bw / 8
                                        tile.material.visible = true;
                                        tile.material.opacity = 0.3
                                        tile.material.transparent = true;
                                    } else if (skinnum == 2) {
                                        tile.position.z = 0
                                        tile.material.visible = true;
                                        tile.material.opacity = 0.3
                                        tile.material.transparent = true;
                                    } else {
                                        tile.material.visible = false;
                                    }
                                }
                            });
                        }
                    }
                }

              }

            }
            // Update the physics world

            if(startflag)world.step(1 / 60);
            if (!restartflag) {
                cubes.forEach((item) => {
                    // item.mesh.position.copy(item.mesh.userData.body.position);
                    // item.mesh.quaternion.copy(item.mesh.userData.body.quaternion);
                    item.mesh.position.copy(item.body.position);
                    item.mesh.quaternion.copy(item.body.quaternion);
                })
            }

            if (window.innerWidth > window.innerHeight) {
                if (restartflag) {
                    renderer.setViewport(0, window.innerHeight - window.innerHeight * 2.5, window.innerHeight * 2.5, window.innerHeight * 2.5);
                    renderer.setScissor(0, 0, window.innerWidth, window.innerHeight);
                    renderer.setScissorTest(true);
                    renderer.render(scene, camera);
                } else {
                    renderer.setViewport(0, window.innerHeight - window.innerHeight * 2.5, window.innerHeight * 2.5, window.innerHeight * 2.5);
                    renderer.setScissor(0, 0, window.innerWidth, window.innerHeight);
                    renderer.setScissorTest(true);
                    renderer.render(scene, camera);
                }
            } else {
                if (restartflag) {

                    renderer.setViewport(0, window.innerHeight - window.innerWidth * 2.5, window.innerWidth * 2.5, window.innerWidth * 2.5);
                    renderer.setScissor(0, 0, window.innerWidth, window.innerHeight);
                    renderer.setScissorTest(true);
                    renderer.render(scene, camera);
                } else {
                    renderer.setViewport(0, window.innerHeight - window.innerWidth * 2.5, window.innerWidth * 2.5, window.innerWidth * 2.5);
                    renderer.setScissor(0, 0, window.innerWidth, window.innerHeight);
                    renderer.setScissorTest(true);
                    renderer.render(scene, camera);
                }
            }

            if (!gameoverflag&&!restartflag) {

                var temptxt;
                if (averageflag) {
                    포인트.forEach((item) => {
                        item.position.x = avx - bw / 1.5;
                        if(gamemod==2){
                            temptxt="+:"+String(stacknum[cubes.length-1])
                            if (temptxt.toString().length >= 4) {
                                item.position.z = 4+avz - bw / 3;
                            } else if (temptxt.toString().length == 3) {
                                item.position.z = 3+avz - bw / 2.6;
                            } else {
                                item.position.z = 1+avz - bw / 2.3;
                            }
                        }else{
                          if (parseInt(pointbuf).toString().length >= 4) {
                              item.position.z = 1+avz -bw /(3.1+(parseInt(pointbuf).toString().length-4)*0.3);
                          } else if (parseInt(pointbuf).toString().length == 3) {
                              // item.position.z = 3+avz - bw / 2.6;
                              item.position.z = 1+avz - bw / 2.6;
                          } else {
                              item.position.z = 1+avz - bw / 2.3;
                          }
                        }

                    })

                    시간.forEach((item) => {
                        item.position.x = avx - bw / 2.5;
                        item.position.z = avz - bw / 1.5;


                    })
                }



                if (pointbuf != 점수) {
                    pointbuf = 점수
                    while (포인트.length > 0) {
                        scene.remove(포인트.pop());
                    }


                    if(gamemod==2){
                      temptxt="+:"+String(stacknum[cubes.length-1])
                    }else{
                      temptxt=parseInt(점수)
                    }

                    createTextMesh(temptxt.toString(), 999, (textMesh) => {
                        if(gamemod==2){
                          textMesh.position.y = (cubes.length-3) * bh - th * 0
                        }else{
                          textMesh.position.y = cubes.length * bh - th * 0
                        }

                        // textMesh.position.z=0
                        if (temptxt.toString().length >= 4) {
                            textMesh.position.z = 1+avz - bw /(3.1+(temptxt.toString().length-4)*0.3);
                        } else if (temptxt.toString().length == 3) {
                            // textMesh.position.z = 3+avz - bw / 2.6;
                            textMesh.position.z = 1+avz - bw / 2.6;
                        } else {
                            textMesh.position.z = 1+avz - bw / 2.3;
                        }
                        textMesh.position.x = avx - bw / 1.5;
                        textMesh.depth = 10;
                        textMesh.rotation.order = 'YXZ';
                        textMesh.rotation.y = Math.PI / 2;
                        scene.add(textMesh)
                        포인트.push(textMesh);
                        // console.log(textMesh);
                    });
                }


                // if (timebuf != parseInt(elapsedTime)) {
                //
                //     timebuf = parseInt(elapsedTime)
                //     while (시간.length > 0) {
                //         scene.remove(시간.pop());
                //     }
                //     if (parseInt(elapsedTime) % 60 >= 10) {
                //         if (parseInt(elapsedTime / 60) >= 10) {
                //             var timestring = String(parseInt(elapsedTime / 60)) + ":" + String(parseInt(elapsedTime) % 60);
                //         } else {
                //             var timestring = "0" + String(parseInt(elapsedTime / 60)) + ":" + String(parseInt(elapsedTime) % 60);
                //         }
                //     } else {
                //         if (parseInt(elapsedTime / 60) >= 10) {
                //             var timestring = String(parseInt(elapsedTime / 60)) + ":0" + String(parseInt(elapsedTime) % 60);
                //         } else {
                //             var timestring = "0" + String(parseInt(elapsedTime / 60)) + ":0" + String(parseInt(elapsedTime) % 60);
                //         }
                //     }
                //     createTextMesh(timestring, 998, (textMesh) => {
                //         textMesh.position.y = cubes.length * bh - th * 0.2
                //         textMesh.position.x = avx - bw / 2.5;
                //         textMesh.position.z = avz - bw / 1.5;
                //         // textMesh.position.x=0;
                //         textMesh.depth = 10;
                //         textMesh.rotation.order = 'YXZ';
                //         textMesh.rotation.y = 2 * Math.PI;
                //         scene.add(textMesh)
                //         시간.push(textMesh);
                //         // console.log(textMesh);
                //     });
                // }





                //색상표
                // const text = String(colornum)+"  "+ String(colornum0);
                // const fontSize = 24;
                // const texture = createTextTexture(text, fontSize);
                // const material = new THREE.SpriteMaterial({ map: texture, transparent: true });
                // const sprite = new THREE.Sprite(material);
                // sprite.scale.set(texture.image.width / 200, texture.image.height / 200, 1);
                // sprite.position.set(window.innerWidth/240, window.innerHeight/200- texture.image.height / 400, -1);
                // // sprite.position.set(0, window.innerHeight/200- texture.image.height / 200, -1);
                // uiScene.remove(uiScene.children[uiScene.children.length-1]);
                // uiScene.add(sprite);
            } else {

            }

            ring[0].children.forEach((item) => {
                item.material.visible = false;
            })
            if(!restartflag){
              포인트.forEach((item) => {
                  item.material.opacity = 0
                  item.material.transparent = true;
                  item.material.visible = false;
              })
              시간.forEach((item) => {
                  item.material.opacity = 0
                  item.material.transparent = true;
                  item.material.visible = false;
              })
            }

            gradback[0].material.visible = true;
            if (topcam&&!restartflag) {
              if(particleflag) particles.material.visible=false;
                // groundmesh.material.visible = true;
                if (shadowon) groundmesh.receiveShadow = false
                if (activeFloor == cubes.length) {

                  for (var i = 0; i < cubes.length; i++) {
                      cubes[i].mesh.children.forEach((item) => {
                        if (item.userData["skin"]==skinset[skinnum]) {

                            // item.material.visible=false;
                            item.receiveShadow = false;
                            item.castShadow = false;



                        }
                      });
                    }
                    // topViewCamera.position.set(0, bh*20, 0);
                    // topViewCamera.lookAt(0, 0, 0);
                    if(gamemod==2){
                      topViewCamera.position.set(cubes[cubes.length - 1].body.position.x, bh *(cubes.length+2-2) , cubes[cubes.length - 1].body.position.z);
                    }else{
                      topViewCamera.position.set(cubes[cubes.length - 1].body.position.x, bh *(cubes.length+2) , cubes[cubes.length - 1].body.position.z);
                    }

                    topViewCamera.rotation.order = 'YXZ';
                    topViewCamera.lookAt(cubes[cubes.length - 1].body.position.x, 0, cubes[cubes.length - 1].body.position.z);
                    topViewCamera.rotation.y = cubes[cubes.length - 1].mesh.rotation.y
                } else {


                    for (var i = 0; i < cubes.length; i++) {
                        cubes[i].mesh.children.forEach((item) => {
                          if (item.userData["skin"]==skinset[skinnum]) {
                            if(i>=activeFloor){
                              item.material.visible=false;
                              item.receiveShadow = false;
                              item.castShadow = false;
                            }else{
                              item.receiveShadow = false;
                              item.castShadow = false;
                            }
                          }
                        });
                        if (i == activeFloor) {
                            cubes[i].mesh.material.opacity = 0.1;
                            if (!gameoverflag) {
                                if(gamemod==2){
                                  topViewCamera.position.set(cubes[i].body.position.x, bh *(activeFloor+2-2), cubes[i].body.position.z);
                                }else{
                                  topViewCamera.position.set(cubes[i].body.position.x, bh *(activeFloor+2), cubes[i].body.position.z);
                                }
                                topViewCamera.rotation.order = 'YXZ';
                                topViewCamera.lookAt(cubes[i].body.position.x, 0, cubes[i].body.position.z);
                                topViewCamera.rotation.y = cubes[i].mesh.rotation.y
                                if(ringflag){
                                  ring[0].position.set(cubes[activeFloor].mesh.position.x, cubes[activeFloor].mesh.position.y, cubes[activeFloor].mesh.position.z)
                                  ring[0].children.forEach((item, index) => {
                                      item.material.visible = true;
                                      item.material.color= new THREE.Color(colorlst0[colornum0][activeFloor]);
                                      if(elapsedTime-item.userData["time"]<0.5&&elapsedTime-item.userData["time"]>=0){
                                        if(index==2||index==1){
                                          item.scale.x=21-40*(elapsedTime-item.userData["time"])
                                          item.scale.y=1.4-0.8*(elapsedTime-item.userData["time"]);
                                          item.position.x=ringloc[index][0]+ringloc[index][0]*(0.5)*0.4-ringloc[index][0]*(elapsedTime-item.userData["time"])*0.4;
                                        }else{
                                          item.scale.y=21-40*(elapsedTime-item.userData["time"])
                                          item.scale.x=1.4-0.8*(elapsedTime-item.userData["time"]);
                                          item.position.y=ringloc[index][1]+ringloc[index][1]*(0.5)*0.4-ringloc[index][1]*(elapsedTime-item.userData["time"])*0.4;
                                        }
                                        item.material.opacity=1.6*(elapsedTime-item.userData["time"]);
                                      }else{
                                        item.scale.x=1;
                                        item.scale.y=1;
                                        item.scale.z=1;
                                        item.position.set(ringloc[index][0],ringloc[index][1],ringloc[index][2]);
                                        item.material.opacity=0.8;
                                      }
                                  })
                                  ring[0].rotation.order = 'XZY';
                                  ring[0].rotation.x = cubes[activeFloor].mesh.rotation.x-Math.PI/2;
                                  ring[0].rotation.z = cubes[activeFloor].mesh.rotation.y;
                                  ring[0].rotation.y = cubes[activeFloor].mesh.rotation.z-Math.PI;
                                }

                            }
                        } else if (i > activeFloor) {
                            // cubes[i].mesh.material.opacity = 0.0;
                            // cubes[i].mesh.material.transparent = true;


                        }
                    }
                }
            }
            // }
            effects.forEach((item) => {
                item[0].children.forEach((box) => {
                    box.material.visible = false;
                })
            })
            // uilst[0].material.visible=false;
            // scene.background = new THREE.Color(0x4e808d);
            // scene.background = new THREE.Color(colorlst[colornum][0]);
            if (topcam&&!restartflag) {
                if ((window.innerWidth / window.innerHeight) < 3 / 5) {
                    var width = window.innerWidth / 1.1;
                    var height = window.innerWidth / 1.1
                    renderer.setViewport(window.innerWidth / 2 - width / 2, -3000 * Math.abs(-isoAngle - camera.rotation.x) - 1500 * Math.abs(Math.PI / 4 - camera.rotation.y), width, height);
                    renderer.setScissor(window.innerWidth / 2 - width / 2, -3000 * Math.abs(-isoAngle - camera.rotation.x) - 1500 * Math.abs(Math.PI / 4 - camera.rotation.y), width, height);
                    renderer.setScissorTest(true);
                    renderer.render(scene, topViewCamera);
                } else if ((window.innerWidth / window.innerHeight) > 13 / 8) {
                    var width = window.innerHeight / 1.1;
                    var height = window.innerHeight / 1.1;
                    renderer.setViewport(window.innerWidth - height - (window.innerWidth - window.innerHeight) / 8, -3500 * Math.abs(-isoAngle - camera.rotation.x) - 1000 * Math.abs(Math.PI / 4 - camera.rotation.y), width, width);
                    renderer.setScissor(window.innerWidth - height - (window.innerWidth - window.innerHeight) / 8, -3500 * Math.abs(-isoAngle - camera.rotation.x) - 1000 * Math.abs(Math.PI / 4 - camera.rotation.y), width, width);
                    renderer.setScissorTest(true);
                    renderer.render(scene, topViewCamera);
                }
            }
            ring[0].children.forEach((item) => {
                item.material.visible = false;
            })

            // if(Math.abs(restartend-camera.rotation.x)<0.5){
            // 	renderer.render(scene, camera);
            // 	console.log(restartend-camera.rotation.x);
            // }else{
            // }
            // uilst[0].material.visible=true;
            sideback.forEach((item) => {
              item.material.visible=true;
            });
            if (sidecam && !gameoverflag&&!restartflag) {
              if(!startflag){
                gradback.forEach((item, index) => {
                    if (index == 0) return;
                    item.material.visible = false;
                    item.children.forEach((child) => {
                        child.material.visible = false;
                    })
                })
              }
              // groundmesh.material.visible=false;
                // scene.background = new THREE.Color(colorlst[colornum][0]);
                // scene.background = new THREE.Color(colorlst[colornum][0]);
                for (var i = 0; i < cubes.length; i++) {
                    cubes[i].mesh.children.forEach((item) => {
                      if (item.userData["skin"]==skinset[skinnum]) {
                        if(i>activeFloor){
                          item.material.opacity=1;
                          // item.material.alphaTest=0.1;

                          item.material.visible=true;

                        }else if(i==activeFloor){
                          item.material.opacity=0.45;
                          item.material.visible=true;
                        }


                      }
                    });

                    // if (!gameoverflag) {
                    //     if (i == activeFloor) {
                    //         // camera.position.set(
                    //         // +boxSize*2,
                    //         // cubes[i].mesh.position.y+boxSize*2,
                    //         // +boxSize*2,
                    //         // );
                    //         cubes[i].mesh.material.opacity = 0.2;
                    //         cubes[i].mesh.material.transparent = true;
                    //         cubes[i].mesh.children.forEach((tile) => {
                    //             if (tile.userData["1"] == true || !tile.userData["2"]) {} else if (tile.userData["2"]) {
                    //                 tile.material.opacity = 1
                    //                 tile.material.transparent = false;
                    //             } else {
                    //                 tile.material.opacity = 1
                    //                 tile.material.transparent = false;
                    //                 tile.children.forEach((text) => {
                    //                     text.material.opacity = 1;
                    //                     text.material.transparent = false;
                    //                 })
                    //             }
                    //         });
                    //     } else {
                    //         cubes[i].mesh.material.opacity = 1;
                    //         // cubes[i].mesh.material.opacity =  0
                    //         cubes[i].mesh.material.transparent = true;
                    //         cubes[i].mesh.children.forEach((tile) => {
                    //             if (tile.userData["3"]) {
                    //                 tile.material.opacity = 0.6
                    //                 tile.material.transparent = true;
                    //             } else if (tile.userData["1"] == true) {
                    //                 tile.material.opacity = 1;
                    //                 tile.material.transparent = true;
                    //             } else {
                    //                 tile.material.opacity = 1;
                    //                 tile.material.transparent = false;
                    //                 tile.children.forEach((text) => {
                    //                     text.material.opacity = false;
                    //                     text.material.transparent = false;
                    //                 })
                    //             }
                    //         });
                    //     }
                    // }
                }
                if(gamemod==2){
                  if(cubes.length>=10){
                    frontalViewCamera.left = -bw / 1.05
                    frontalViewCamera.right = bw / 1.05
                    frontalViewCamera.top = bw / 1.05+3*(cubes.length-9)
                    frontalViewCamera.bottom = -bw / 1.05-3*(cubes.length-9)

                    sideViewCamera.left = -bw / 1.05
                    sideViewCamera.right =  bw / 1.05
                    sideViewCamera.top = bw / 1.05+3*(cubes.length-9)
                    sideViewCamera.bottom = -bw / 1.05-3*(cubes.length-9)

                    frontalViewCamera.position.set(avx, bw * (0.8)+bh*(cubes.length-9), bw * 3);
                    frontalViewCamera.lookAt(avx, bw * (0.8)+bh*(cubes.length-9), 0);
                    sideViewCamera.position.set(bw * 3, bw * (0.8)+bh*(cubes.length-9), avz);
                    sideViewCamera.lookAt(0, bw * (0.8)+bh*(cubes.length-9), avz);
                  }else{
                    frontalViewCamera.position.set(avx, bw * 0.8, bw * 3);
                    frontalViewCamera.lookAt(avx, bw * 0.8, 0);
                    sideViewCamera.position.set(bw * 3, bw * 0.8, avz);
                    sideViewCamera.lookAt(0, bw * 0.8, avz);
                  }
                }else{
                  frontalViewCamera.position.set(avx, bw * 0.8, bw * 3);
                  frontalViewCamera.lookAt(avx, bw * 0.8, 0);
                  sideViewCamera.position.set(bw * 3, bw * 0.8, avz);
                  sideViewCamera.lookAt(0, bw * 0.8, avz);
                }

                // scene.background = new THREE.Color(0x4e508d);
                // scene.background = new THREE.Color(colorlst[colornum][0]);
                // scene.background = new THREE.Color('hsl('+String(newcl["h"])+', '+String(newcl["s"])+'%, '+String(newcl["l"]+50*Math.abs(-isoAngle-camera.rotation.x))+'%)');
                // uilst[0].position.set(0, bh*3, bw/1.4)
                // uilst[0].scale.set(6,20*uidelta,6);
                var width = window.innerWidth / 6;
                // var height = window.innerHeight / 4;
                var height = window.innerWidth / 5
                renderer.setViewport(-500 * Math.abs(-isoAngle - camera.rotation.x) - 500 * Math.abs(Math.PI / 4 - camera.rotation.y), height * 4.2, width, height);
                renderer.setScissor(-500 * Math.abs(-isoAngle - camera.rotation.x) - 500 * Math.abs(Math.PI / 4 - camera.rotation.y), height * 4.2, width, height);
                renderer.setScissorTest(true);
                // if(Math.abs(restartend-camera.rotation.x)<1){
                // 	renderer.render(scene, camera);
                // 	console.log(restartend-camera.rotation.x);
                // }else{
                renderer.render(scene, frontalViewCamera);
                // }
                // uilst[0].position.set(bw/1.4, bh*3, 0)
                // uilst[0].scale.set(6,20*uidelta,6);
                // scene.background = new THREE.Color(0x8eA01d);
                // scene.background = new THREE.Color(colorlst[colornum][0]);
                renderer.setViewport(window.innerWidth - width + 500 * Math.abs(-isoAngle - camera.rotation.x) + 500 * Math.abs(Math.PI / 4 - camera.rotation.y), height * 4.2, width, height);
                renderer.setScissor(window.innerWidth - width + 500 * Math.abs(-isoAngle - camera.rotation.x) + 500 * Math.abs(Math.PI / 4 - camera.rotation.y), height * 4.2, width, height);
                // window.innerHeight / 2-innerWidth / 10
                renderer.setScissorTest(true);
                // if(Math.abs(restartend-camera.rotation.x)<1){
                // 	renderer.render(scene, camera);
                // 	console.log(restartend-camera.rotation.x);
                // }else{
                renderer.render(scene, sideViewCamera);
                // }
            }

            if(particleflag) particles.material.visible=true;
            groundmesh.material.visible=true;
            if (shadowon) groundmesh.receiveShadow = true


            if (elapsedTime > 2 && sload) {
                sload = false;
                // console.log(bw*0.9/bh*0.8)
                // var aa=createtxt("ABC")
                // scene.add(aa);
                // timlst.push(aa);
                // for(var i=0;i<5;i++){
                //      geos.push(cubes[i].mesh.geometry);
                //    }
                // console.log(mergeGeometries);
                // for(var i=0;i<6;i++){
                //     soundic[sdic[i][0]].setLoop( true );
                // }
                // inflag=false;
                // soundic[sdic[5][0]].play();
            }
            bf=activeFloor;
            if (elapsedTime < 3 && !gameoverflag) {

            } else {

            }
            if(sidecam&&!gameoverflag){
              for (var i = 0; i < cubes.length; i++) {
                  cubes[i].mesh.children.forEach((item) => {
                    if (item.userData["skin"]==skinset[skinnum]) {
                      if(i>activeFloor){
                        item.material.visible = true;
                        item.material.opacity = 0.04 + (i - activeFloor) * 0.015;
                        item.material.alphaTest = 0.04 + (i - activeFloor) * 0.015;
                        item.material.transparent = true;
                      }else if (i==activeFloor) {
                          item.material.visible = true;
                          item.material.opacity = 0.05;
                          item.material.alphaTest = 0.05;
                          item.material.transparent = true;
                      }
                    }
                  });
              }
            }
            포인트.forEach((item) => {
                item.material.visible = true
                item.material.opacity = 1
                item.material.transparent = false;
            })
            시간.forEach((item) => {
                item.material.visible = true
                item.material.opacity = 1
                item.material.transparent = false;
            })
            lastTime = currentTime;



        }
        // Start the animation loop
        // if(!gameoverflag) animate();
        // Handle window resizing

        function newbox(x, y, z, width, height, depth, game2048, idx, flag){


          if(flag){
            var newcolor1=colorlst0[colornum0][idx%5]
            var newcolor2=parseInt(idx/5);
            var nc = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx%5]))
            var newcolor3 = new THREE.Color('hsl(' + String(nc["h"]+(30*newcolor2)) + ', ' + String(nc["s"]) + '%, ' + String(nc["l"]) + '%)');
            var newcolor4 = new THREE.Color('hsl(' + String(nc["h"]+(30*newcolor2)) + ', ' + String(nc["s"]*0.9) + '%, ' + String(nc["l"]*1.2) + '%)');
            var newcolor5 = new THREE.Color('hsl(' + String(nc["h"]+(30*newcolor2)) + ', ' + String(nc["s"]*1.1) + '%, ' + String(nc["l"]*0.95) + '%)');
          }else{
            var newcolor1=colorlst0[colornum0][idx]
            var nc = hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
            var newcolor3 = new THREE.Color('hsl(' + String(nc["h"]) + ', ' + String(nc["s"]) + '%, ' + String(nc["l"]) + '%)');
            var newcolor4 = new THREE.Color('hsl(' + String(nc["h"]) + ', ' + String(nc["s"]*0.9) + '%, ' + String(nc["l"]*1.2) + '%)');
            var newcolor5 = new THREE.Color('hsl(' + String(nc["h"]) + ', ' + String(nc["s"]*1.1) + '%, ' + String(nc["l"]*0.95) + '%)');
          }


          if (skin0) {
              var geometry = new THREE.BoxGeometry(width * 0.95, height, depth * 0.95);
          } else {
              var geometry = new THREE.BoxGeometry(width, height, depth);
          }
          // const color =new THREE.Color('hsl('+String(30+6*(y/boxh))+', 100%, 50%)');
          // const material = new THREE.MeshLambertMaterial({color});
          if (lighton) {
              var material1 = new THREE.MeshLambertMaterial({
                  color: newcolor3
              });
          } else {
              var material1 = new THREE.MeshBasicMaterial({
                  color: newcolor3
              });
          }
          // material1.alphaTest=0.01
          // const material = new THREE.MeshBasicMaterial({ color: new THREE.Color('hsl('+String(Math.random()*20+(50+Math.random()*50)*(y/height))+', 70%, 50%)')});
          var ratio = 0.7;
          var dify = height * 0.05;
          dify = 0
          // var ratioy=0.6;
          let mesh = new THREE.Mesh(geometry, material1);
          var geoms = [];
          if (skin0) {
              let originHelper = new THREE.Object3D();
              if (true) {
                  originHelper.position.set(0, 0, -depth / 2 + depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 1.0, height, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-width / 2 + depth * 0.025, 0, 0)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.05, height, depth * 0.95);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //앞면
                  originHelper.position.set(0, bh / 2 - height / 11, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 1, height / 5.5, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-width / 2 + width * 0.09, -bh / 2 + height / 20, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.18, height / 10, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0, -bh / 2 + (height * 0.1 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.93 * ratio, height * 0.10 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0, -bh / 2 + (height * 0.1 * ratio) * 2.45, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.93 * ratio, height * 0.1 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //전면매꿈
                  originHelper.position.set(-(width * 1.0) / 2 + (width / 10) * 1, bh / 8, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 5, height / 2, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-(width * 1.0) / 2 + (width / 50) * 1, 0, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 25, height, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-(width * 0.75) / 2 + (width / 40) * 1, 0, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //전면우측
                  originHelper.position.set((width * 1.0) / 2 - (width / 10) * 1, 0, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 5, height, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //  ((우측면))
                  //하측
                  originHelper.position.set(depth / 2 - depth * 0.025, -bh / 2 + height / 16, 0)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, height / 8, width * 1.0);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  var mgeo = new BufferGeometryUtils.mergeGeometries(
                      geoms, false);
                  var mesh1 = new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({
                      color: newcolor3
                  }));
                  mesh1.userData["1"] = true;
                  mesh1.userData["skin"] = "1";
                  mesh1.userData["skintype"] =0;
                  if(!flag) clmeshlst[idx].push(mesh1.material);
                  if (shadowon) {
                      mesh1.receiveShadow = true;
                      mesh1.castShadow = true;
                  }
                  mesh.add(mesh1);


                  var geometry = new THREE.BoxGeometry(width, height * 0.04, depth);
                  var material = new THREE.MeshLambertMaterial({
                      color: newcolor3
                  });
                  var mesh1 = new THREE.Mesh(geometry, material);
                  mesh1.position.set(0, -bh / 2 + (height * 0.04) / 2, 0);
                  // mesh1.position.set(0, 0, 0);
                  // mesh1.userData["5"]=true;
                  mesh1.userData["skin"] = "1";
                  mesh1.userData["skintype"] =0;
                  if (shadowon) {
                      mesh1.receiveShadow = true;
                      mesh1.castShadow = true;
                  }

                  // mesh.add(mesh1);
                  geoms = [];
                  originHelper.position.set(0 - (width * 0.05), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0 + (width * 0.05), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0 - (width * 0.1), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0 + (width * 0.1), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0 - (width * 0.15), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0 + (width * 0.15), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0 - (width * 0.2), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0 + (width * 0.2), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0 - (width * 0.3), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.18 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0 + (width * 0.3), -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.18 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-(width * 1.0) / 2 + (width / 10) * 1, -bh / 3.75 + height * 0.08, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 5, height * 0.045, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-(width * 1.0) / 2 + (width / 10) * 1, -bh / 3.75, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 5, height * 0.045, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-(width * 1.0) / 2 + (width / 10) * 1, -bh / 3.75 - height * 0.08, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 5, height * 0.045, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-(width * 1.0) / 2 + (width / 10) * 1, -bh / 3.75 - height * 0.08 - height * 0.045, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 5, height * 0.045, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0, -bh / 2 + (height * 0.25 * ratio) / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.03 * ratio, height * 0.25 * ratio, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //지붕
                  originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height / 16, 0)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, height / 8, width * 1.0);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //구멍시작
                  //세로
                  var difx = 0.17;
                  originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 3)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 4)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 5)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 6)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, bh / 2 - height * 0.8 / 2, difx + depth / 2 - (width * 0.03) * 7)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, height * 0.8, width * 0.018);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, 0, difx + depth / 2 - (width * 0.03) * 8)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, height, width * 0.08);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //가로
                  var difx = 0.06;
                  originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 2, 0.17 + depth / 2 - (width * 0.03) * 4)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 3, 0.17 + depth / 2 - (width * 0.03) * 4)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 4, 0.17 + depth / 2 - (width * 0.03) * 4)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 5, 0.17 + depth / 2 - (width * 0.03) * 4)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 6, 0.17 + depth / 2 - (width * 0.03) * 4)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 7, 0.17 + depth / 2 - (width * 0.03) * 4)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  // originHelper.position.set(depth/2,difx+height/2-(width*0.03)*8.4,0.17+depth/2-(width*0.03)*4)
                  // originHelper.updateWorldMatrix(true, false);
                  // var tg=new THREE.BoxGeometry(depth*0.05, width*0.08, height*0.7);
                  // tg.applyMatrix4(originHelper.matrixWorld);
                  // geoms.push(tg)

                  originHelper.position.set(depth / 2.05 - depth * 0.02, 0 + dify, 0 - depth / 8)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.03, height * 0.8 * ratio, width * 0.9 * ratio);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)


                  originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 8, 0.17 + depth / 2 - (width * 0.03) * 4)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(depth / 2 - depth * 0.025, difx + height / 2 - (width * 0.03) * 8 - width * 0.018, 0.17 + depth / 2 - (width * 0.03) * 4)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.05, width * 0.018, height * 0.7);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  var mgeo = new BufferGeometryUtils.mergeGeometries(
                      geoms, false);
                  var mesh1 = new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({
                      color: newcolor3
                  }));
                  mesh1.userData["1"] = true;
                  mesh1.userData["skin"] = "1";
                  mesh1.userData["skintype"] =0;
                  if(!flag) clmeshlst[idx].push(mesh1.material);
                  mesh.add(mesh1);
              }
              var geoms = [];
              if (true) { //신스킨
                  originHelper.position.set(0, 0, -depth / 2 + depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 1.0, height, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-width / 2 + depth * 0.025, 0, 0)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.05, height, depth * 0.95);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //화면바로하측
                  originHelper.position.set(-width / 2 + width * 0.5 / 2, -bh / 2 + height / 40, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.5, height / 20, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-width / 2 + width * 0.5 / 2, -bh / 2 + height / 40 + height / 15, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.5, height / 20, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-width / 2 + width * 0.5 / 2, -bh / 2 + height / 40 + height / 15 + height / 15, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.5, height / 20, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-width / 2 + width * 0.5 / 2, -bh / 2 + height / 40 + 3 * height / 15, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.5, height / 20, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //화면 하측 좌우측 매꿈
                  // originHelper.position.set(-width/2+width*0.5/2,-bh/2+height/10,depth/2-depth*0.025)
                  // originHelper.updateWorldMatrix(true, false);
                  // var tg=new THREE.BoxGeometry(width*0.02, height/5, depth*0.05);
                  // tg.applyMatrix4(originHelper.matrixWorld);
                  // geoms.push(tg)
                  originHelper.position.set(-width / 2 + width * 0.5 / 2 + bw / 5.8, -bh / 2 + height / 10, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.02, height / 5, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-width / 2 + width * 0.5 / 2 - bw / 5.8, -bh / 2 + height / 10, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.02, height / 5, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //전면 처마 너비
                  originHelper.position.set(-width * 0.0025, bh / 2 - height / 12, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width * 0.95, height / 6, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 3.9, -bh / 2 + height / 12, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 2.5, height / 6, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //처마 커버 우면
                  originHelper.position.set(bw / 2.2, 0, 0)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(depth * 0.005, height, depth);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-bw / 2 + width / 30, 0, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 15, height, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-width / 30, 0, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 15, height, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(+width / 50, 0, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 40, height, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(+width / 11.2, 0, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 10, height, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 2 - width / 20, 0, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 25, height, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(0, -bh / 2 + height * 0.15 / 2, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 6, height * 0.15, depth * 0.05);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  var mgeo = new BufferGeometryUtils.mergeGeometries(
                      geoms, false);
                  var mesh1 = new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({
                      color: newcolor3
                  }));
                  if (shadowon) {
                      mesh1.receiveShadow = true;
                      mesh1.castShadow = true;
                  }
                  mesh1.userData["1"] = true;
                  mesh1.userData["skin"] = "카세트";
                  mesh1.userData["skintype"] =0;
                  if(!flag) clmeshlst[idx].push(mesh1.material);
                  mesh.add(mesh1);
                  var geoms = [];
                  //카세트입구
                  originHelper.position.set(bw / 2 - width / 4.7 - width / 7 + width / 80, 0 - depth * 0.01, depth / 2.02)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 40, height * 0.55, depth * 0.002);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 2 - width / 4.8 + width / 7 - width / 80, 0 - depth * 0.007, depth / 2.02)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 40, height * 0.57, depth * 0.002);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 2 - width / 4.7, 0 - depth * 0.01 - height * 0.55 / 2 + height * 0.12 / 2, depth / 2.02)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 3.5, height * 0.12, depth * 0.002);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 2 - width / 4.7, 0 - depth * 0.01 + height * 0.60 / 2 - height * 0.07 / 2, depth / 2.02)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 3.5, height * 0.07, depth * 0.002);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //카세트 슬라이더 눈금 (오른쪽)
                  originHelper.position.set(bw / 12, 0 + height * 0.3, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.1, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.2, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.3, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.4, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.5, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(bw / 12, 0 + height * 0.3 - height * 0.6, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  //카세트 슬라이더 눈금 (왼쪽)
                  originHelper.position.set(-bw / 32, 0 + height * 0.3, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.1, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.2, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.3, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.4, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.5, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.02 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  originHelper.position.set(-bw / 32, 0 + height * 0.3 - height * 0.6, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(height * 0.14 * ratio, height * 0.03 * ratio, depth * 0.003);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
                  var mgeo = new BufferGeometryUtils.mergeGeometries(
                      geoms, false);

                  var mesh1 = new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({
                      color: newcolor4
                  }));
                  // mesh1.userData["1"]=true;
                  mesh1.userData["skin"] = "카세트";
                  mesh1.userData["skintype"] =1;
                  if(!flag) clmeshlst1[idx].push(mesh1.material);
                  mesh.add(mesh1);
                  // originHelper.position.set(bw/2-width/4.7,0-depth*0.01,depth/2)
                  // originHelper.updateWorldMatrix(true, false);
                  // var tg=new THREE.BoxGeometry(width/3.5, height*0.55, depth*0.002);
                  // tg.applyMatrix4(originHelper.matrixWorld);
                  // geoms.push(tg)
                  // originHelper.position.set(bw/2-width/4.7,0-depth*0.01,depth/2)
                  // 		originHelper.updateWorldMatrix(true, false);
                  // 		var tg=new THREE.BoxGeometry(width/3.5, height*0.55, depth*0.002);
                  // 		tg.applyMatrix4(originHelper.matrixWorld);
                  // geoms.push(tg)

                  var moldkey=Object.keys(skinmold);
                  moldkey.forEach((item) => {
                    skinmold[item].forEach((obj) => {
                      let obj1=obj.clone();
                      let mat1=obj.material.clone();
                      if(obj1.userData["skintype"]==0){
                        obj1.material=new THREE.MeshLambertMaterial({
                            color: newcolor3
                        });
                        if(!flag) clmeshlst[idx].push(obj1.material);
                      }else if(obj1.userData["skintype"]==1){
                        obj1.material=new THREE.MeshLambertMaterial({
                            color: newcolor4
                        });
                        if(!flag) clmeshlst1[idx].push(obj1.material);
                      }else if(obj1.userData["skintype"]==2){
                        obj1.material=new THREE.MeshLambertMaterial({
                            color: newcolor5
                        });
                        if(!flag) clmeshlst2[idx].push(obj1.material);
                      }else{
                        obj1.material=mat1
                        // if(!flag) clmeshlst[idx].push(obj1.material);
                      }
                      if (shadowon) {
                          obj1.receiveShadow = true;
                          obj1.castShadow = true;
                      }
                      mesh.add(obj1);

                    });
                  });





                  var geoms = [];
                  originHelper.position.set(0, 2 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 20 + width / 60, 2 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(2 * (width / 20 + width / 60), 2 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(3 * (width / 20 + width / 60), 2 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(0, 1 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 20 + width / 60, 1 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(2 * (width / 20 + width / 60), 1 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(3 * (width / 20 + width / 60), 1 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 20 + width / 60, 0 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(2 * (width / 20 + width / 60), 0 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 20 + width / 60, -1 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(2 * (width / 20 + width / 60), -1 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 20 + width / 60, -2 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 20 + width / 60, -3 * (-bh / 15), depth / 2.15)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 20, height * 0.03, depth * 0.002);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  var mgeo2 = new BufferGeometryUtils.mergeGeometries(geoms, false);
                  var mesh2 = new THREE.Mesh(mgeo2, new THREE.MeshLambertMaterial({
                      vertexColors: true
                  }));
                  if (shadowon) {
                      mesh2.receiveShadow = true;
                      mesh2.castShadow = true;
                  }
                  mesh2.userData["1"] = true;
                  mesh2.userData["skin"] = "r808";
                  mesh.add(mesh2);


                  originHelper.position.set(-width / 11, -bh / 2 + (height * 0.13) / 2, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 22, height * 0.12, depth * 0.014);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(-width / 11 + (width / 22 + width / 640), -bh / 2 + (height * 0.13) / 2, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 22, height * 0.12, depth * 0.014);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(-width / 11 + 2 * (width / 22 + width / 640), -bh / 2 + (height * 0.13) / 2, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 22, height * 0.12, depth * 0.014);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(-width / 11 + 3 * (width / 22 + width / 640), -bh / 2 + (height * 0.13) / 2, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 22, height * 0.12, depth * 0.014);

                  var tc = newcolor4
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(-width / 11 + 4 * (width / 22 + width / 640), -bh / 2 + (height * 0.13) / 2, depth / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 22, height * 0.12, depth * 0.014);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"]) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  var gap = width / 13 + width / 160
                  //우면버튼
                  originHelper.position.set(bw / 2 - (width / 20) / 2, bh / 2 - height * 0.19 / 2, bw / 2.3 - (width / 13) / 2)
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 25, height * 0.19, width / 13);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(bw / 2 - (width / 20) / 2, bh / 2 - height * 0.19 / 2, bw / 2.3 - (width / 13) / 2 - 1 * (gap))
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 25, height * 0.19, width / 13);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)

                  originHelper.position.set(bw / 2 - (width / 20) / 2, bh / 2 - height * 0.19 / 2, bw / 2.3 - (width / 13) / 2 - 2 * (gap))
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 25, height * 0.19, width / 13);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)




                  originHelper.position.set(bw / 2 - (width / 20) / 2, bh / 2 - height * 0.19 / 2, bw / 2.3 - (width / 13) / 2 - 3 * (gap))
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 25, height * 0.19, width / 13);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(bw / 2 - (width / 29) / 2, bh / 2 - height * 0.19 / 2, bw / 2.3 - (width / 13) / 2 - 4 * (gap))
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(width / 36, height * 0.19, width / 13);
                  var newcl = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"]) + '%, ' + String(newcl["l"] + 5) + '%)');
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  var mgeo2 = new BufferGeometryUtils.mergeGeometries(geoms, false);
                  var mesh2 = new THREE.Mesh(mgeo2, new THREE.MeshLambertMaterial({
                      vertexColors: true
                  }));
                  if (shadowon) {
                      mesh2.receiveShadow = true;
                      mesh2.castShadow = true;
                  }
                  mesh2.userData["1"] = true;
                  mesh2.userData["skin"] = "radio";
                  mesh.add(mesh2);
              }

              var geometry = new THREE.BoxGeometry(width, height * 0.99, depth);
              var material = new THREE.MeshBasicMaterial({
                  color: newcolor3
              });
              var mesh1 = new THREE.Mesh(geometry, material);
              // mesh1.position.set(0, 0, 0);
              // mesh1.userData["5"]=true;
              mesh1.userData["skin"] = "adam";
              mesh1.userData["skintype"] =0;
              mesh.add(mesh1);
              if(!flag) clmeshlst[idx].push(mesh1.material)
              var geometry = new THREE.BoxGeometry(width, height * 0.99, depth);
              var material = new THREE.MeshLambertMaterial({
                  color: newcolor3
              });
              var mesh1 = new THREE.Mesh(geometry, material);
              // mesh1.position.set(0, 0, 0);
              // mesh1.userData["5"]=true;
              mesh1.userData["skin"] = "base";
              mesh1.userData["skintype"] =0;
              if (shadowon) {
                  mesh1.receiveShadow = true;
                  mesh1.castShadow = true;
              }
              mesh.add(mesh1);
              if(!flag) clmeshlst[idx].push(mesh1.material)
              // mesh.userData["cl"]=mesh1.material;
              var geoms = [];
              // tapemold[idx].userData["1"]=true;
              // tapemold[idx].userData["skin"]="5";
              //신스킨
              if (true) {
                  //좌측 키(검정 카세트)
                  originHelper.position.set(-width / 2.15, 0 + height * 0.3, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  // var tc=new THREE.Color(0x20282F)
                  var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] + 15) + '%)');
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.3 * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(-width / 2.15, 0, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  // var tc=new THREE.Color(0x20282F)
                  var newcl = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                  var tc = new THREE.Color('hsl(' + String(newcl["h"]) + ', ' + String(newcl["s"] * 0.95) + '%, ' + String(newcl["l"] + 15) + '%)');
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.3 * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //화면(블랙) 카세트
                  originHelper.position.set(0 - bw / 4, 0 + dify + height * 0.05, depth / 2.05 - depth * 0.015)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0x604060)
                  var tg = new THREE.BoxGeometry(width * 0.5 * ratio, height * 0.6 * ratio, depth * 0.03);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //화면 하측 슬롯 음영(카세트)
                  originHelper.position.set(0 - bw / 4, 0 + dify - height * 0.35, depth / 2.05 - depth * 0.005)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0x102010)
                  var tg = new THREE.BoxGeometry(width * 0.6 * ratio, height * 0.3 * ratio, depth * 0.03);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //화면(그레이) 카세트
                  originHelper.position.set(0 - bw / 4, height * 0.45 * ratio + dify, depth / 1.97 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(width * 0.5 * ratio, height * 0.1 * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(0 - bw / 4, -height * 0.3 * ratio + dify, depth / 1.97 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(width * 0.5 * ratio, height * 0.1 * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(-bw / 4 + (width * 0.5 * ratio) / 2, 0 + dify, depth / 1.97 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(width * 0.05 * ratio, height * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(-bw / 4 - (width * 0.5 * ratio) / 2, 0 + dify, depth / 1.97 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(width * 0.05 * ratio, height * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //카세트 슬라이더노브
                  originHelper.position.set(bw / 25, 0 + height * 0.3 - (height * 0.5 * Math.random()), depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst[colornum][1])
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.05 * ratio, depth * 0.036);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(0, 0 + height * 0.3 - (height * 0.5 * Math.random()), depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst[colornum][2])
                  var tg = new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.05 * ratio, depth * 0.036);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //카세트 버튼
                  originHelper.position.set(bw / 6, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst[colornum][3])
                  var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.2 * ratio, depth * 0.036);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(bw / 6 + height * 0.2 * ratio * 1.2, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst[colornum][2])
                  var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.18 * ratio, depth * 0.036);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(bw / 6 + height * 0.2 * ratio * 2.4, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst0[colornum0][0])
                  var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.18 * ratio, depth * 0.036);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(bw / 6 + height * 0.2 * ratio * 3.6, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst[colornum][2])
                  var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.18 * ratio, depth * 0.036);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(bw / 6 + height * 0.2 * ratio * 4.8, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst0[colornum0][3])
                  var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.18 * ratio, depth * 0.036);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(bw / 6 + height * 0.2 * ratio * 6, 0 + height * 0.35, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst[colornum][0])
                  var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.18 * ratio, depth * 0.036);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //뚜껑
                  // originHelper.position.set(0,height/2-height*0.02,0)
                  // originHelper.updateWorldMatrix(true, false);
                  // // var tc=new THREE.Color(0xffffff)
                  // var newcl=hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                  // var tc=new THREE.Color('hsl('+String(newcl["h"])+', '+String(newcl["s"]*0.65)+'%, '+String(newcl["l"]+25)+'%)');
                  // var tg=new THREE.BoxGeometry(width*0.93, height*0.1, depth*0.95);
                  // var rgb = tc.toArray().map(v => v * 255);
                  // var numVerts = geometry.getAttribute('position').count;
                  // var itemSize = 3;  // r, g, b
                  // var colors = new Uint8Array(itemSize * numVerts);
                  // colors.forEach((v, ndx) => {
                  //   colors[ndx] = rgb[ndx % 3];
                  // });
                  // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  // tg.applyMatrix4(originHelper.matrixWorld);
                  // tg.setAttribute('color', colorAttrib);
                  // geoms.push(tg)
                  //카세트 우측면 버튼
                  originHelper.position.set(width / 2 - height * 0.1, height / 2 - ((height / 7)), +depth / 2.35)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst0[colornum0][0])
                  var tg = new THREE.BoxGeometry(height * 0.2, (height / 7), height * 0.3);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 2 - height * 0.1, height / 2 - 2.2 * ((height / 7)), +depth / 2.35)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst0[colornum0][1])
                  var tg = new THREE.BoxGeometry(height * 0.2, (height / 7), height * 0.3);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 2 - height * 0.1, height / 2 - 3.4 * ((height / 7)), +depth / 2.35)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst0[colornum0][2])
                  var tg = new THREE.BoxGeometry(height * 0.2, (height / 7), height * 0.3);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 2 - height * 0.1, height / 2 - 4.6 * ((height / 7)), +depth / 2.35)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst0[colornum0][3])
                  var tg = new THREE.BoxGeometry(height * 0.2, (height / 7), height * 0.3);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 2 - height * 0.1, height / 2 - 5.8 * ((height / 7)), +depth / 2.35)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst0[colornum0][4])
                  var tg = new THREE.BoxGeometry(height * 0.2, (height / 7), height * 0.3);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)

                  //우측면 우측 음영
                  originHelper.position.set(width / 2 - depth * 0.005, 0, -depth / 2 + (depth * 0.2))
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0x000000)
                  var tg = new THREE.BoxGeometry(depth * 0.01, height * 0.95, width * 0.32);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)

                  var mgeo2 = new BufferGeometryUtils.mergeGeometries(geoms, false);
                  var mesh2 = new THREE.Mesh(mgeo2, new THREE.MeshLambertMaterial({
                      vertexColors: true
                  }));
                  if (shadowon) {
                      mesh2.receiveShadow = true;
                      mesh2.castShadow = true;
                  }
                  mesh2.userData["1"] = true;
                  mesh2.userData["skin"] = "카세트";
                  mesh.add(mesh2);
                  var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0x00C85F
                  }));
                  mesh1.position.set(-bw / 4 + height * 0.3 * ratio, bh / 12 + dify * 3, depth / 2 - depth * 0.016)
                  mesh1.userData["1"] = true;
                  mesh1.userData["skin"] = "카세트";
                  mesh.add(mesh1)
                  var mesh2 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0x00C85F
                  }));
                  mesh2.position.set(-bw / 4 - height * 0.3 * ratio, bh / 12 + dify * 4, depth / 2 - depth * 0.016)
                  mesh2.userData["1"] = true;
                  mesh2.userData["skin"] = "카세트";
                  mesh.add(mesh2)
                  eye1.push([mesh1, mesh2])
                  var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0xF86F08,
                      visible: false
                  }));
                  mesh1.position.set(-bw / 4 + height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                  mesh1.userData["4"] = true;
                  mesh1.userData["skin"] = "카세트b";
                  mesh.add(mesh1)
                  var mesh2 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0xF86F08,
                      visible: false
                  }));
                  mesh2.position.set(-bw / 4 - height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                  mesh2.userData["4"] = true;
                  mesh2.userData["skin"] = "카세트b";
                  mesh.add(mesh2)
                  var mesh3 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.2 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0xF86F08,
                      visible: false
                  }));
                  mesh3.position.set(-bw / 4 + height * 0.3 * ratio, -height * 0.05 + dify * 2, depth / 2 - depth * 0.016)
                  mesh3.userData["4"] = true;
                  mesh3.userData["skin"] = "카세트b";
                  mesh.add(mesh3)
                  var mesh4 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.2 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0xF86F08,
                      visible: false
                  }));
                  mesh4.position.set(-bw / 4 - height * 0.3 * ratio, -height * 0.05 + dify * 2, depth / 2 - depth * 0.016)
                  mesh4.userData["4"] = true;
                  mesh4.userData["skin"] = "카세트b";
                  mesh.add(mesh4)
                  eye2.push([mesh1, mesh2, mesh3, mesh4])
                  var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.4 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0x00C85F
                  }));
                  mesh1.position.set(-bw / 4, 0 - height * 0.01, depth / 2 - depth * 0.016)
                  mesh1.userData["1"] = true;
                  mesh1.userData["skin"] = "카세트";
                  mesh.add(mesh1)
                  mouth1.push(mesh1)
                  var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0xFFA401,
                      visible: false
                  }));
                  mesh1.position.set(-bw / 4, 0 - height * 0.01, depth / 2 - depth * 0.016)
                  mesh1.userData["4"] = true;
                  mesh1.userData["skin"] = "카세트b";
                  mesh.add(mesh1)
                  mouth2.push(mesh1)
                  // originHelper.position.set(0,height/2-height*0.02,0)
                  // originHelper.updateWorldMatrix(true, false);
                  // // var tc=new THREE.Color(0xffffff)
                  // var newcl=hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                  // var tc=new THREE.Color('hsl('+String(newcl["h"])+', '+String(newcl["s"]*0.65)+'%, '+String(newcl["l"]+25)+'%)');
                  // var tg=new THREE.BoxGeometry(width*0.93, height*0.1, depth*0.95);
                  var geometry = new THREE.BoxGeometry(width * 0.98, height * 0.1, depth * 0.98);

                  var tc = newcolor4
                  var mesh1 = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({
                      color: tc
                  }));
                  mesh1.position.set(0, height / 2 - height * 0.02, 0);
                  // mesh1.userData["bottom"]=true;
                  mesh1.userData["skin"] = "1"
                  mesh1.userData["skintype"] =1;
                  if(!flag) clmeshlst1[idx].push(mesh1.material);
                  mesh.add(mesh1);
                  var geometry = new THREE.BoxGeometry(width * 0.93, height * 0.1, depth * 0.95);

                  var tc = newcolor4
                  var mesh1 = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({
                      color: tc
                  }));
                  mesh1.position.set(0, height / 2 - height * 0.02, 0)
                  // mesh1.userData["bottom"]=true;
                  mesh1.userData["skin"] = "카세트"
                  mesh1.userData["skintype"] =1;
                  if(!flag) clmeshlst1[idx].push(mesh1.material);
                  mesh.add(mesh1);
              }
              var geoms = [];
              if (true) {
                  //음영
                  originHelper.position.set(0, -bh / 2 + (height * 0.25 * ratio) / 1.96, depth / 2.01 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0x000000)
                  var tg = new THREE.BoxGeometry(width * 0.93 * ratio, height * 0.25 * ratio, depth * 0.03);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //음영좌측슬릿
                  originHelper.position.set(-bw / 2 + width * 0.1 * ratio, -bh / 4.05, depth / 2 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0x000000)
                  var tg = new THREE.BoxGeometry(width * 0.2 * ratio, height * 0.5, depth * 0.04);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //우측면 좌측 음영
                  originHelper.position.set(width / 2 - depth * 0.025, 0, depth / 2 - (depth * 0.12))
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0x000000)
                  var tg = new THREE.BoxGeometry(depth * 0.04, height * 0.7, width * 0.15 * ratio);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 2 - depth * 0.025, 0, depth / 2 - (depth * 0.12))
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0x000000)
                  var tg = new THREE.BoxGeometry(depth * 0.04, height * 0.5, width * 0.3 * ratio);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //화면(블랙)
                  originHelper.position.set(0, 0 + dify, depth / 2.05 - depth * 0.015)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0x003E00)
                  var tg = new THREE.BoxGeometry(width * 0.8 * ratio, height * 0.7 * ratio, depth * 0.03);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //화면(그레이)
                  originHelper.position.set(0, height * 0.35 * ratio + dify, depth / 1.97 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(width * 0.8 * ratio, height * 0.15 * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(0, -height * 0.35 * ratio + dify, depth / 1.97 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(width * 0.8 * ratio, height * 0.15 * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set((width * 0.4 + width * 0.05) * ratio, 0 + dify, depth / 1.97 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(width * 0.1 * ratio, height * 0.85 * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set((-width * 0.4 - width * 0.05) * ratio, 0 + dify, depth / 1.97 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(width * 0.1 * ratio, height * 0.85 * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  // 우측화면(블랙)

                  //우측화면(그레이)
                  originHelper.position.set(depth / 1.97 - depth * 0.025, height * 0.45 * ratio + dify, 0 - depth / 8)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.15 * ratio, width * 0.9 * ratio);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(depth / 1.97 - depth * 0.025, -height * 0.45 * ratio + dify, 0 - depth / 8)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.15 * ratio, width * 0.9 * ratio);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(depth / 1.97 - depth * 0.025, 0 + dify, (width * 0.45 + width * 0.03) * ratio - depth / 8)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(depth * 0.02, height * ratio * 1.05, width * 0.07 * ratio);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(depth / 1.97 - depth * 0.025, 0 + dify, (-width * 0.45 - width * 0.03) * ratio - depth / 8)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xB4AFA8)
                  var tg = new THREE.BoxGeometry(depth * 0.02, height * ratio * 1.05, width * 0.07 * ratio);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //방향키
                  originHelper.position.set(-width / 2.3, 0 + height * 0.1, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0x50585F)
                  var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.4 * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(-width / 2.3, 0 + height * 0.1, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0x50585F)
                  var tg = new THREE.BoxGeometry(height * 0.4 * ratio, height * 0.2 * ratio, depth * 0.02);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //우측 키
                  originHelper.position.set(width / 2.2, 0 + height * 0.15, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst[colornum][1])
                  var tg = new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.3 * ratio, depth * 0.036);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  // mouth1.push(mesh1)
                  originHelper.position.set(width / 2.6, 0 - height * 0.15, depth / 1.9 - depth * 0.025)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst[colornum][2])
                  var tg = new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.3 * ratio, depth * 0.036);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  //우측면 좌측 키(검정)
                  originHelper.position.set(depth / 1.9 - depth * 0.025, 0 - height * 0.38, width / 2.3)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst[colornum][3])
                  var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.1 * ratio, height * 0.35 * ratio);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(depth / 1.9 - depth * 0.025, 0 - height * 0.38, width / 2.9)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xffffff)
                  var tg = new THREE.BoxGeometry(depth * 0.02, height * 0.1 * ratio, height * 0.25 * ratio);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  // //우측 키(검정)
                  // originHelper.position.set(width / 2.57, 0 + height * 0.38, depth / 1.9 - depth * 0.025)
                  // originHelper.updateWorldMatrix(true, false);
                  // var tc = new THREE.Color(0x20282F)
                  // var tg = new THREE.BoxGeometry(height * 0.35 * ratio, height * 0.1 * ratio, depth * 0.02);
                  // var rgb = tc.toArray().map(v => v * 255);
                  // var numVerts = geometry.getAttribute('position').count;
                  // var itemSize = 3; // r, g, b
                  // var colors = new Uint8Array(itemSize * numVerts);
                  // colors.forEach((v, ndx) => {
                  //     colors[ndx] = rgb[ndx % 3];
                  // });
                  // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  // tg.applyMatrix4(originHelper.matrixWorld);
                  // tg.setAttribute('color', colorAttrib);
                  // geoms.push(tg)
                  // originHelper.position.set(width / 2.13, 0 + height * 0.38, depth / 1.9 - depth * 0.025)
                  // originHelper.updateWorldMatrix(true, false);
                  // var tc = new THREE.Color(0x20282F)
                  // var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.1 * ratio, depth * 0.02);
                  // var rgb = tc.toArray().map(v => v * 255);
                  // var numVerts = geometry.getAttribute('position').count;
                  // var itemSize = 3; // r, g, b
                  // var colors = new Uint8Array(itemSize * numVerts);
                  // colors.forEach((v, ndx) => {
                  //     colors[ndx] = rgb[ndx % 3];
                  // });
                  // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  // tg.applyMatrix4(originHelper.matrixWorld);
                  // tg.setAttribute('color', colorAttrib);
                  // geoms.push(tg)
                  // //좌측 키(검정)
                  // originHelper.position.set(-width / 2.57, 0 + height * 0.38, depth / 1.9 - depth * 0.025)
                  // originHelper.updateWorldMatrix(true, false);
                  // var tc = new THREE.Color(0x20282F)
                  // var tg = new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.1 * ratio, depth * 0.02);
                  // var rgb = tc.toArray().map(v => v * 255);
                  // var numVerts = geometry.getAttribute('position').count;
                  // var itemSize = 3; // r, g, b
                  // var colors = new Uint8Array(itemSize * numVerts);
                  // colors.forEach((v, ndx) => {
                  //     colors[ndx] = rgb[ndx % 3];
                  // });
                  // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  // tg.applyMatrix4(originHelper.matrixWorld);
                  // tg.setAttribute('color', colorAttrib);
                  // geoms.push(tg)
                  // originHelper.position.set(-width / 2.13, 0 + height * 0.38, depth / 1.9 - depth * 0.025)
                  // originHelper.updateWorldMatrix(true, false);
                  // var tc = new THREE.Color(0x20282F)
                  // var tg = new THREE.BoxGeometry(height * 0.2 * ratio, height * 0.1 * ratio, depth * 0.02);
                  // var rgb = tc.toArray().map(v => v * 255);
                  // var numVerts = geometry.getAttribute('position').count;
                  // var itemSize = 3; // r, g, b
                  // var colors = new Uint8Array(itemSize * numVerts);
                  // colors.forEach((v, ndx) => {
                  //     colors[ndx] = rgb[ndx % 3];
                  // });
                  // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  // tg.applyMatrix4(originHelper.matrixWorld);
                  // tg.setAttribute('color', colorAttrib);
                  // geoms.push(tg)
                  //뚜껑
                  // originHelper.position.set(0,height/2-height*0.02,0)
                  // originHelper.updateWorldMatrix(true, false);
                  // // var tc=new THREE.Color(0xffffff)
                  // var newcl=hexToHSL(hexToHtmlColor(colorlst0[colornum0][idx]))
                  // var tc=new THREE.Color('hsl('+String(newcl["h"])+', '+String(newcl["s"]*0.65)+'%, '+String(newcl["l"]+25)+'%)');
                  // var tg=new THREE.BoxGeometry(width*0.98, height*0.1, depth*0.98);
                  // var rgb = tc.toArray().map(v => v * 255);
                  // var numVerts = geometry.getAttribute('position').count;
                  // var itemSize = 3;  // r, g, b
                  // var colors = new Uint8Array(itemSize * numVerts);
                  // colors.forEach((v, ndx) => {
                  //   colors[ndx] = rgb[ndx % 3];
                  // });
                  // var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  // tg.applyMatrix4(originHelper.matrixWorld);
                  // tg.setAttribute('color', colorAttrib);
                  // geoms.push(tg)
                  //오른쪽 작은 박스혹
                  originHelper.position.set(width / 2 - depth * 0.025, height / 2 - ((height / 6) / 2) * 0.7, -depth / 3)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xff0000)
                  var tg = new THREE.BoxGeometry(height * 0.2, (height / 6), height * 0.05);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 2 - depth * 0.025, height / 2 - ((height / 6) / 2) * 0.7, -depth / 3 + height * 0.05)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(0xffffff)
                  var tg = new THREE.BoxGeometry(height * 0.2, (height / 6), height * 0.05);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  originHelper.position.set(width / 2 - depth * 0.025, height / 2 - ((height / 6) / 2) * 0.7, -depth / 3 + height * 0.1)
                  originHelper.updateWorldMatrix(true, false);
                  var tc = new THREE.Color(colorlst[colornum][3])
                  var tg = new THREE.BoxGeometry(height * 0.2, (height / 6), height * 0.05);
                  var rgb = tc.toArray().map(v => v * 255);
                  var numVerts = geometry.getAttribute('position').count;
                  var itemSize = 3; // r, g, b
                  var colors = new Uint8Array(itemSize * numVerts);
                  colors.forEach((v, ndx) => {
                      colors[ndx] = rgb[ndx % 3];
                  });
                  var colorAttrib = new THREE.BufferAttribute(colors, itemSize, true);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  tg.setAttribute('color', colorAttrib);
                  geoms.push(tg)
                  var mgeo2 = new BufferGeometryUtils.mergeGeometries(geoms, false);
                  var mesh2 = new THREE.Mesh(mgeo2, new THREE.MeshLambertMaterial({
                      vertexColors: true
                  }));
                  if (shadowon) {
                      mesh2.receiveShadow = true;
                      mesh2.castShadow = true;
                  }
                  mesh2.userData["1"] = true;
                  mesh2.userData["skin"] = "1";
                  mesh.add(mesh2);
                  var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0x00C85F
                  }));
                  mesh1.position.set(height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                  mesh1.userData["1"] = true;
                  mesh1.userData["skin"] = "1";
                  mesh.add(mesh1)
                  var mesh2 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0x00C85F
                  }));
                  mesh2.position.set(-height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                  mesh2.userData["1"] = true;
                  mesh2.userData["skin"] = "1";
                  mesh.add(mesh2)
                  eye1.push([mesh1, mesh2])
                  var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0xF86F08,
                      visible: false
                  }));
                  mesh1.position.set(height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                  mesh1.userData["4"] = true;
                  mesh1.userData["skin"] = "1b";
                  mesh.add(mesh1)
                  var mesh2 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.3 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0xF86F08,
                      visible: false
                  }));
                  mesh2.position.set(-height * 0.3 * ratio, 0 + dify * 2, depth / 2 - depth * 0.016)
                  mesh2.userData["4"] = true;
                  mesh2.userData["skin"] = "1b";
                  mesh.add(mesh2)
                  var mesh3 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.2 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0xF86F08,
                      visible: false
                  }));
                  mesh3.position.set(height * 0.3 * ratio, -height * 0.05 + dify * 2, depth / 2 - depth * 0.016)
                  mesh3.userData["4"] = true;
                  mesh3.userData["skin"] = "1b";
                  mesh.add(mesh3)
                  var mesh4 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.2 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0xF86F08,
                      visible: false
                  }));
                  mesh4.position.set(-height * 0.3 * ratio, -height * 0.05 + dify * 2, depth / 2 - depth * 0.016)
                  mesh4.userData["4"] = true;
                  mesh4.userData["skin"] = "1b";
                  mesh.add(mesh4)
                  eye2.push([mesh1, mesh2, mesh3, mesh4])
                  var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.4 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0x00C85F
                  }));
                  mesh1.position.set(0, 0 - height * 0.1, depth / 2 - depth * 0.016)
                  mesh1.userData["1"] = true;
                  mesh1.userData["skin"] = "1";
                  mesh.add(mesh1)
                  mouth1.push(mesh1)
                  var mesh1 = new THREE.Mesh(new THREE.BoxGeometry(height * 0.1 * ratio, height * 0.1 * ratio, depth * 0.01), new THREE.MeshLambertMaterial({
                      color: 0xFFA401,
                      visible: false
                  }));
                  mesh1.position.set(0, 0 - height * 0.1, depth / 2 - depth * 0.016)
                  mesh1.userData["4"] = true;
                  mesh1.userData["skin"] = "1b";
                  mesh.add(mesh1)
                  mouth2.push(mesh1)
              }
          }
          let originHelper = new THREE.Object3D();
          var geoms = [];
          for (let row = 0; row < 칸; row++) {
              for (let col = 0; col < 칸; col++) {
                  originHelper.position.set(
                      0 - bw / 2 + tw / 2 + col * tw,
                      -th / 2,
                      0 - bw / 2 + tw / 2 + row * tw,
                  );
                  originHelper.updateWorldMatrix(true, false);
                  var tg = new THREE.BoxGeometry(tw * 0.9, th / 3.2, tw * 0.9);
                  tg.applyMatrix4(originHelper.matrixWorld);
                  geoms.push(tg)
              }
          }
          var mgeo = new BufferGeometryUtils.mergeGeometries(
              geoms, false);

          var tc = newcolor3
          var mesh1 = new THREE.Mesh(mgeo, new THREE.MeshLambertMaterial({
              color: tc
          }));
          mesh1.userData["bottom"] = true;
          mesh1.userData["skin"] = "bottom"
          mesh1.userData["skintype"] =1;
          if(!flag) clmeshlst[idx].push(mesh1.material);
          mesh.add(mesh1);






          //우측출력
          var mesh1 = new THREE.Mesh(new THREE.PlaneGeometry(width * 0.9 * ratio, height * 0.8 * ratio), new THREE.MeshLambertMaterial({
              color: 0x000000,
              opacity: 1,
              transparent: true
          }), );
          mesh1.position.set(depth / 1.99 - depth * 0.015, 0 + dify, 0 - depth / 8)
          mesh1.rotation.y = Math.PI / 2
          mesh1.userData["1"] = true;
          mesh1.userData["2"] = true;
          mesh1.userData["skin"] = "text1";


          // mesh1.userData["3"]=true;
          mesh.add(mesh1)
          txts.push(mesh1)

          // 우측출력 음영
          var mesh1 = new THREE.Mesh(new THREE.PlaneGeometry(width * 0.9 * ratio, height * 0.8 * ratio), new THREE.MeshBasicMaterial({
              color: 0xaaaaaa,
              opacity: 0.3,
              transparent: true
          }), );
          mesh1.position.set(depth/2 - depth * 0.016, 0 + dify, 0 - depth / 8)
          mesh1.rotation.y = Math.PI / 2
          // mesh1.userData["3"]=true;
          mesh1.userData["skin"] = "txtback1";

          mesh.position.set(x, y, z);
          mesh.material.visible = true;
          // clmeshlst2[idx].push(mesh1.material)
          mesh.add(mesh1)


          if (shadowon) {
              mesh.receiveShadow = true;
              mesh.castShadow = true;
          }
          //쌓
          scene.add(mesh);

          const shape = new CANNON.Box(new CANNON.Vec3(width / 2, height / 2, depth / 2));
          // const cylinderShape = new CANNON.Cylinder(width, width, bh, 16);
          // const shape2 = new CANNON.Cylinder(width,width,height,1)
          const customMaterial = new CANNON.Material('customMaterial');
          if(!flag){
            customMaterial.friction = 0.2;
            customMaterial.restitution = 0.4;
          }else{
            customMaterial.friction = 1;
            customMaterial.restitution = 0.8;
          }

          if (stage3) {
              customMaterial.friction = 0.3
          }
          const body = new CANNON.Body({
              mass: 3,
              shape: shape,
              material: customMaterial,
              allowSleep: true,
              sleepSpeedLimit: 100,
              sleepTimeLimit: 0
          });
          body.position.set(x, y, z);
          world.addBody(body);

          if (game2048) {
              const boardSize = game2048.size;
              const tileSize = width / boardSize;

          }
          return {
              mesh: mesh,
              body: body
          };


      }

        window.addEventListener("resize", () => {
            const width = window.innerWidth;
            const height = window.innerHeight;
            renderer.setSize(width, height);
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
        });

        function addring() {
            var w = bw /80
            var geometry0 = new THREE.PlaneGeometry(bw, bw / 2);
            var material0 = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                opacity: 0,
                transparent: true
            });
            var mesh0 = new THREE.Mesh(geometry0, material0);
            var geometry1 = new THREE.PlaneGeometry(bw + 2 * w, w);
            var material1 = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                side: THREE.DoubleSide,
                opacity: 0.8,
                transparent: true
            });
            var mesh1 = new THREE.Mesh(geometry1, material1);
            var geometry2 = new THREE.PlaneGeometry(w, bw);
            var material2 = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                side: THREE.DoubleSide,
                opacity: 0.8,
                transparent: true
            });
            var mesh2 = new THREE.Mesh(geometry2, material2);
            var geometry3 = new THREE.PlaneGeometry(w, bw);
            var material3 = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                side: THREE.DoubleSide,
                opacity: 0.8,
                transparent: true
            });
            var mesh3 = new THREE.Mesh(geometry3, material3);
            var geometry4 = new THREE.PlaneGeometry(bw + 2 * w, w);
            var material4 = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                side: THREE.DoubleSide,
                opacity: 0.8,
                transparent: true
            });
            var mesh4 = new THREE.Mesh(geometry4, material4);
            mesh0.add(mesh1)
            mesh0.children[0].position.y = bw / 2 + w / 2
            mesh0.add(mesh2)
            mesh0.children[1].position.x = -bw / 2 - w / 2
            // mesh0.children[1].position.y=-(bw/4)+bw/2+w/2
            mesh0.add(mesh3)
            mesh0.children[2].position.x = +bw / 2 + w / 2
            // mesh0.children[2].position.y=-(bw/4)+bw/2+w/2
            mesh0.add(mesh4)
            mesh0.children[3].position.y = -bw / 2 - w / 2
            mesh0.rotation.order = 'YXZ';
            mesh0.rotation.x = cubes[0].mesh.rotation.x - Math.PI / 2;
            mesh0.rotation.z = cubes[0].mesh.rotation.z;
            mesh0.position.set(cubes[0].mesh.position.x, cubes[0].body.position.y - bh / 2, cubes[0].body.position.z)
            mesh0.scale.set(0.98, 0.98, 0.98);

            if(ring.length==0&&ringloc.length==0){
              mesh0.children.forEach((item, i) => {
                ringloc.push([item.position.x, item.position.y, item.position.z]);
              });
            }

            ring.push(mesh0);
            scene.add(mesh0);





        }

        function 이펙트2(floor, num, direction) {
            var w = bw / 20
            w += Math.sqrt(num) / 4
            // var w=bw/11;
            var geometry0 = new THREE.PlaneGeometry(bw, bw / 2);
            var material0 = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                opacity: 0,
                transparent: true
            });
            var mesh0 = new THREE.Mesh(geometry0, material0);
            var geometry1 = new THREE.PlaneGeometry(bw, w);
            var material1 = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                side: THREE.DoubleSide,
                opacity: 1,
                transparent: true
            });
            var mesh1 = new THREE.Mesh(geometry1, material1);
            var geometry2 = new THREE.PlaneGeometry(w * 0.6, bw / 2);
            var material2 = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                side: THREE.DoubleSide,
                opacity: 1,
                transparent: true
            });
            var mesh2 = new THREE.Mesh(geometry2, material2);
            var geometry3 = new THREE.PlaneGeometry(w * 0.6, bw / 2);
            var material3 = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                side: THREE.DoubleSide,
                opacity: 1,
                transparent: true
            });
            var mesh3 = new THREE.Mesh(geometry3, material3);
            mesh0.add(mesh1)
            mesh0.children[0].position.y = bw / 2
            mesh0.add(mesh2)
            mesh0.children[1].position.x = -bw / 2 - w * 0.6 / 2
            mesh0.children[1].position.y = -(bw / 4) + bw / 2 + w / 2
            mesh0.add(mesh3)
            mesh0.children[2].position.x = +bw / 2 + w * 0.6 / 2
            mesh0.children[2].position.y = -(bw / 4) + bw / 2 + w / 2
            // console.log(mesh)
            mesh0.rotation.order = 'YXZ';
            // mesh0.rotation.z = cubes[floor].mesh.rotation.z;
            mesh0.rotation.x = - Math.PI / 2;
            mesh0.position.set(0, 0 - th / 3 - (th / 16) * effects.length, 0)

            switch (direction) {
                case 'up':
                    // mesh1.position.set(cubes[floor].mesh.rotation.x,cubes[floor].body.position.y-tw/3,cubes[floor].body.position.z-bw/2)
                    mesh0.rotation.y =0
                    // mesh2.rotation.y =cubes[floor].mesh.rotation.y
                    // mesh3.rotation.y =cubes[floor].mesh.rotation.y
                    break;
                case 'down':
                    // mesh1.position.set(cubes[floor].mesh.rotation.x,cubes[floor].body.position.y-tw/3,cubes[floor].body.position.z+bw/2)
                    mesh0.rotation.y =  Math.PI;
                    // mesh2.rotation.y = cubes[floor].mesh.rotation.y+Math.PI;
                    // mesh3.rotation.y = cubes[floor].mesh.rotation.y+Math.PI;
                    break;
                case 'left':
                    // mesh1.position.set(cubes[floor].mesh.rotation.x-bw/2,cubes[floor].body.position.y-tw/3,cubes[floor].body.position.z)
                    mesh0.rotation.y =  Math.PI / 2;
                    // mesh2.rotation.y = cubes[floor].mesh.rotation.y+Math.PI / 2;
                    // mesh3.rotation.y = cubes[floor].mesh.rotation.y+Math.PI / 2;
                    break;
                case 'right':
                    // mesh1.position.set(cubes[floor].mesh.rotation.x+bw/2,cubes[floor].body.position.y-tw/3,cubes[floor].body.position.z)
                    mesh0.rotation.y =  - Math.PI / 2;
                    // mesh2.rotation.y =cubes[floor].mesh.rotation.y-Math.PI / 2;
                    // mesh3.rotation.y =cubes[floor].mesh.rotation.y-Math.PI / 2;
                    break;
                default:
                    return;
            }
            // mesh0.scale.x=1.5;
            // mesh0.scale.y=1.5;
            mesh0.material.visible = false;
            mesh0.userData["skin"]="effect"
            // cubes[floor].mesh.add(mesh0);
            cubes[floor].mesh.add(mesh0);
            // scene.add( mesh2 );
            // scene.add( mesh3 );
            effects.push([mesh0, num, direction, floor]);
            // effects.push(mesh2);
            // effects.push(mesh3);
        }

        function 이펙트(floor, num, direction) {
            const geometry = new THREE.PlaneGeometry(bw, bw / 2);
            const material = new THREE.MeshBasicMaterial({
                color: colorlst0[colornum0][floor],
                side: THREE.DoubleSide,
                opacity: 0,
                transparent: true
            });
            const mesh = new THREE.Mesh(geometry, material);
            mesh.rotation.order = 'YXZ';
            mesh.rotation.x = cubes[floor].mesh.rotation.x - Math.PI / 2;
            switch (direction) {
                case 'up':
                    mesh.position.set(cubes[floor].body.position.x, 0, cubes[floor].body.position.z - bw / 3)
                    // mesh.rotation.y = -Math.PI / 2;
                    // mesh.rotation.x=cubes[floor].mesh.rotation.x
                    mesh.rotation.y = cubes[floor].mesh.rotation.y
                    mesh.rotation.z = cubes[floor].mesh.rotation.z
                    break;
                case 'down':
                    mesh.position.set(cubes[floor].body.position.x, 0, cubes[floor].body.position.z + bw / 3)
                    // mesh.rotation.x=cubes[floor].mesh.rotation.x
                    mesh.rotation.y = cubes[floor].mesh.rotation.y + Math.PI;
                    mesh.rotation.z = cubes[floor].mesh.rotation.z
                    break;
                case 'left':
                    mesh.position.set(cubes[floor].body.position.x - bw / 3, 0, cubes[floor].body.position.z)
                    // mesh.rotation.x=cubes[floor].mesh.rotation.x
                    mesh.rotation.y = cubes[floor].mesh.rotation.y + Math.PI / 2;
                    mesh.rotation.z = cubes[floor].mesh.rotation.z
                    break;
                case 'right':
                    mesh.position.set(cubes[floor].body.position.x + bw / 3, 0, cubes[floor].body.position.z)
                    // mesh.rotation.x=cubes[floor].mesh.rotation.x
                    mesh.rotation.y = cubes[floor].mesh.rotation.y - Math.PI / 2;
                    mesh.rotation.z = cubes[floor].mesh.rotation.z
                    break;
                default:
                    return;
            }
            // scene.add(mesh);
            cubes[floor].mesh.add(mesh);
            effects.push(mesh);
        }

        function removeDuplicates(arr) {
            return [...new Set(arr)];
        }

        function findDuplicates(arr) {
            const duplicates = [];
            const seen = new Set();
            arr.forEach((item) => {
                for (const element of item) {
                    if (seen.has(element)) {
                        duplicates.push(element);
                    } else {
                        seen.add(element);
                    }
                }
            })
            return duplicates;
        }

        function getdist(x2, y2, x3, y3) {
            var dstx = Math.abs(x2 - x3);
            var dsty = Math.abs(y2 - y3);
            if (dstx > dsty) {
                return 1.4 * dsty + 1.0 * (dstx - dsty)
            } else {
                return 1.4 * dstx + 1.0 * (dsty - dstx)
            }
        }
        // Function to add a new box at a random position above the stack
        function spawnNewBox() {
            const randomX = Math.random() * 2 - 1;
            const randomZ = Math.random() * 2 - 1;
            const newBox = createBox(randomX, stackHeight * boxSize + boxSize / 2, randomZ, boxSize, boxSize, boxSize);
            newBox.mesh.userData.body = newBox.body;
        }

        function resol(n) {
          var meta = document.querySelector('meta[name="viewport"]');
          switch (n) {
            case 0:
              meta.setAttribute('content', 'width=device-width, initial-scale=1.05 maximum-scale=1.05, minimum-scale=1.05, user-scalable=0');
              break;
            case 1:
              meta.setAttribute('content', 'width=device-width, initial-scale=0.95, maximum-scale=0.95, minimum-scale=0.95, user-scalable=0');
              break;
            case 2:
              meta.setAttribute('content', 'width=device-width, initial-scale=0.85, maximum-scale=0.85, minimum-scale=0.85, user-scalable=0');
              break;
            case 3:
              meta.setAttribute('content', 'width=device-width, initial-scale=0.75, maximum-scale=0.75, minimum-scale=0.75, user-scalable=0');
              break;
            case 4:
              meta.setAttribute('content', 'width=device-width, initial-scale=0.65, maximum-scale=0.65, minimum-scale=0.65, user-scalable=0');
              break;
            case 5:
              meta.setAttribute('content', 'width=device-width, initial-scale=0.55, maximum-scale=0.55, minimum-scale=0.55, user-scalable=0');
              break;

            default:
              return;
          }

        }

        window.resol=resol;
        function hexToHSL(hex0) {
            // hex 값의 RGB 값을 추출
            var hex = hex0.toString();
            const r = parseInt(hex.substring(1, 3), 16) / 255;
            const g = parseInt(hex.substring(3, 5), 16) / 255;
            const b = parseInt(hex.substring(5, 7), 16) / 255;
            // RGB 값으로 HSL 값을 계산
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            const diff = max - min;
            let h = 0,
                s = 0,
                l = (max + min) / 2;
            if (diff !== 0) {
                s = l > 0.5 ? diff / (2 - max - min) : diff / (max + min);
                switch (max) {
                    case r:
                        h = (g - b) / diff + (g < b ? 6 : 0);
                        break;
                    case g:
                        h = (b - r) / diff + 2;
                        break;
                    case b:
                        h = (r - g) / diff + 4;
                        break;
                }
                h /= 6;
            }
            // HSL 값을 리턴
            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }
        // Add event listener for user input to spawn a new box
        function hexToHtmlColor(hex) {
            return '#' + ('000000' + hex.toString(16)).slice(-6);
        }

        function hexToRGB(hex0, opa) {
            // hex 값의 RGB 값을 추출
            var hex = hexToHtmlColor(hex0)
            const r = parseInt(hex.substring(1, 3), 16);
            const g = parseInt(hex.substring(3, 5), 16);
            const b = parseInt(hex.substring(5, 7), 16);
            return "rgba(" + String(r) + "," + String(g) + "," + String(b) + "," + String(opa) + ")"
        }

        function motion(name, n) {
            if (n == 9) {
                var n1 = 4
            } else {
                var n1 = n
            }
            var unit = unitmotion[name];
            var temp = new Array();
            var temp1 = new Array();
            var n2 = String(n1)
            if (n2.length == 1 || n2.length == 2) {
                var key = unit.meta.frameTags[n1 - 1];
                var item = unit.frames;
                for (var i = 0; i < (key.to - key.from) + 1; i++) {
                    var fr0 = item[String(n) + " " + String(i)];
                    var fr = fr0["frame"];
                    var x0 = fr["x"];
                    var y0 = fr["y"];
                    var w0 = fr["w"];
                    var h0 = fr["h"];
                    temp1.push([x0, y0, w0, h0])
                }
                return temp1;
            } else {
                unit.meta.frameTags.forEach(element => {
                    if (element.name == n2) {
                        // console.log(element)
                        var key = element;
                        var item = unit.frames;
                        for (var i = 0; i < (key.to - key.from) + 1; i++) {
                            var fr0 = item[n2 + " " + String(i)];
                            var fr = fr0["frame"];
                            var x0 = fr["x"];
                            var y0 = fr["y"];
                            var w0 = fr["w"];
                            var h0 = fr["h"];
                            temp1.push([x0, y0, w0, h0])
                        }
                        // console.log(temp1)
                    }
                });
                return temp1;
            }
        }

        function getui(row, col) {
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            canvas.width = 552;
            canvas.height = 676;
            var fr = motion("ui0", 1)
            if (!paidflag) {
                var dur = 5;
                ctx.drawImage(unitimg["ui0"], fr[dur][0], fr[dur][1], fr[dur][2], fr[dur][3], 0, 0, 552, 676)
                if (row == 1 && col == 4) {} else {
                    var dur = 4;
                    ctx.drawImage(unitimg["ui0"], fr[dur][0], fr[dur][1], fr[dur][2], fr[dur][3], 0, 0, 552, 676)
                }
            }
            if (row == 1 && col == 2) {} else {
                var dur = 2;
                ctx.drawImage(unitimg["ui0"], fr[dur][0], fr[dur][1], fr[dur][2], fr[dur][3], 0, 0, 552, 676)
            }
            if (row == 1 && col == 3) {} else {
                var dur = 3;
                ctx.drawImage(unitimg["ui0"], fr[dur][0], fr[dur][1], fr[dur][2], fr[dur][3], 0, 0, 552, 676)
            }
            if (row == 1 && col == 1) {} else {
                var dur = 1;
                ctx.drawImage(unitimg["ui0"], fr[dur][0], fr[dur][1], fr[dur][2], fr[dur][3], 0, 0, 552, 676)
            }
            var fr = motion("ui0", 2)
            if (soundflag) {
                var dur = 0;
            } else {
                var dur = 3;
            }
            ctx.drawImage(unitimg["ui0"], fr[dur][0], fr[dur][1], fr[dur][2], fr[dur][3], 0, 0, 552, 676)
            if (skinflag) {
                var dur = 1;
            } else {
                var dur = 4;
            }
            ctx.drawImage(unitimg["ui0"], fr[dur][0], fr[dur][1], fr[dur][2], fr[dur][3], 0, 0, 552, 676)
            if (sidecam) {
                var dur = 2;
            } else {
                var dur = 5;
            }
            ctx.drawImage(unitimg["ui0"], fr[dur][0], fr[dur][1], fr[dur][2], fr[dur][3], 0, 0, 552, 676)
            var img3 = new THREE.CanvasTexture(canvas);
            var material4 = new THREE.SpriteMaterial({
                map: img3,
                transparent: true,
                opacity: 0.9
            });
            return material4
        }

        function hslToHex(h, s, l) {
            s /= 100;
            l /= 100;
            let c = (1 - Math.abs(2 * l - 1)) * s;
            let x = c * (1 - Math.abs(((h / 60) % 2) - 1));
            let m = l - c / 2;
            let r = 0;
            let g = 0;
            let b = 0;
            if (0 <= h && h < 60) {
                r = c;
                g = x;
                b = 0;
            } else if (60 <= h && h < 120) {
                r = x;
                g = c;
                b = 0;
            } else if (120 <= h && h < 180) {
                r = 0;
                g = c;
                b = x;
            } else if (180 <= h && h < 240) {
                r = 0;
                g = x;
                b = c;
            } else if (240 <= h && h < 300) {
                r = x;
                g = 0;
                b = c;
            } else if (300 <= h && h < 360) {
                r = c;
                g = 0;
                b = x;
            }
            r = Math.round((r + m) * 255);
            g = Math.round((g + m) * 255);
            b = Math.round((b + m) * 255);
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }

        function hslToHex0(h, s, l) {
            s /= 100;
            l /= 100;
            let c = (1 - Math.abs(2 * l - 1)) * s;
            let x = c * (1 - Math.abs(((h / 60) % 2) - 1));
            let m = l - c / 2;
            let r = 0;
            let g = 0;
            let b = 0;
            if (0 <= h && h < 60) {
                r = c;
                g = x;
                b = 0;
            } else if (60 <= h && h < 120) {
                r = x;
                g = c;
                b = 0;
            } else if (120 <= h && h < 180) {
                r = 0;
                g = c;
                b = x;
            } else if (180 <= h && h < 240) {
                r = 0;
                g = x;
                b = c;
            } else if (240 <= h && h < 300) {
                r = x;
                g = 0;
                b = c;
            } else if (300 <= h && h < 360) {
                r = c;
                g = 0;
                b = x;
            }
            r = Math.round((r + m) * 255);
            g = Math.round((g + m) * 255);
            b = Math.round((b + m) * 255);
            return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }

        function hexStringToByteArray(hexString) {
            if (hexString.length % 2 !== 0) {
                throw new Error('16진수 문자열의 길이가 짝수여야 합니다.');
            }
            const byteArray = new Uint8Array(hexString.length / 2);
            for (let i = 0; i < hexString.length; i += 2) {
                const byteValue = parseInt(hexString.substr(i, 2), 16);
                if (isNaN(byteValue)) {
                    throw new Error('유효한 16진수 문자열이 아닙니다.');
                }
                byteArray[i / 2] = byteValue;
            }
            return byteArray;
        }

        function showpop(t1="", t2="", t3="",idx=0){
          soundic[esound[idx]].play();


          document.getElementById("pop-info").style.top="2vw";
          document.getElementById("pop-info").classList.remove("hidden");
          document.getElementById("pop-info").classList.remove("fade");
          document.getElementById("pop-info").classList.add("show");
          document.getElementById("pop-info").style.backgroundColor=hexToHtmlColor(colorlst[colornum][3]);
          document.getElementById("pop-info").style.opacity=0.6;
          document.getElementById("popline1").style.color=hexToHtmlColor(colorlst[colornum][2]);
          document.getElementById("popline1").children[0].innerText=t1;
          document.getElementById("popline1").children[1].innerText=t2;
          document.getElementById("popline1").children[2].innerText=t3;
          setTimeout(function() {
            document.getElementById("pop-info").style.top="-10vw";
          }, 1500);
        }


        function showinfo(){
          pluscoin=0;
          document.getElementById("coin-info").classList.remove("fade");
          document.getElementById("coin-info").classList.add("show");


          setTimeout(function() {
            document.getElementById("coin-info").classList.remove("hidden");

            document.getElementById("코인").classList.remove("fade");
            document.getElementById("코인").classList.remove("hidden");
            document.getElementById("코인").classList.add("show");

            document.getElementById("기본").classList.remove("fade");
            document.getElementById("기본").classList.remove("hidden");
            document.getElementById("기본").classList.add("show");
            document.getElementById("기본").children[0].innerText="포인트 :";
            if(gamemod==2){
              document.getElementById("기본").children[1].innerText=String(점수)+" (× 0.1)";
              document.getElementById("기본").children[2].innerText=String(parseInt(cubes.length-3)*2)+"★";
              pluscoin+=parseInt(cubes.length-3)*2;
            }else{
              document.getElementById("기본").children[1].innerText=String(점수)+" (× 0.1)";
              document.getElementById("기본").children[2].innerText=String(parseInt(점수/10))+"★";
              pluscoin+=parseInt(점수/10);
            }

            setTimeout(function() {
                document.getElementById("시간").classList.remove("fade");
                document.getElementById("시간").children[0].innerText="시간 : "
                if(gamemod==2){
                  document.getElementById("시간").children[1].innerText=String(parseInt(parseInt(elapsedTime)))+" (× 0.1)";
                  document.getElementById("시간").children[2].innerText=String(parseInt(parseInt(elapsedTime)/10))+"★"
                }else{
                  document.getElementById("시간").children[1].innerText=String(parseInt(elapsedTime))+" (× 0.1)";
                  document.getElementById("시간").children[2].innerText=String(parseInt(elapsedTime/10))+"★"
                }
                pluscoin+=parseInt(elapsedTime/10);
                document.getElementById("시간").classList.add("show");
                document.getElementById("시간").classList.remove("hidden");
                setTimeout(function() {
                  if(maxnum!=0){
                    document.getElementById("max").classList.remove("fade");
                    document.getElementById("max").classList.remove("hidden");
                    document.getElementById("max").classList.add("show");
                    document.getElementById("max").children[0].innerText="최대 :";
                    document.getElementById("max").children[1].innerText=String(maxnum)+" (× 1)";
                    document.getElementById("max").children[2].innerText=String(parseInt(maxnum))+"★";
                    pluscoin+=parseInt(maxnum);
                  }
                    var fullcount=0;
                    for(var i=0;i<cubes.length;i++){
                      if(cubes[i].mesh.userData["game2048"].fullflag) fullcount++;
                    }
                    if(fullcount>0){
                      document.getElementById("full").classList.remove("fade");
                      document.getElementById("full").classList.remove("hidden");
                      document.getElementById("full").classList.add("show");
                      if(fullcount==5){
                        document.getElementById("full").children[0].innerText="꽉채움: "
                        document.getElementById("full").children[1].innerText="5!!(2000PT)"
                        document.getElementById("full").children[2].innerText=String(parseInt(2000))+"★"
                        pluscoin+=parseInt(1000);
                      }else{
                        document.getElementById("full").children[0].innerText="꽉채움: "
                        document.getElementById("full").children[1].innerText=String(fullcount)+" (× 200)";
                        document.getElementById("full").children[2].innerText=String(parseInt(fullcount*200))+"★"
                        pluscoin+=parseInt(parseInt(fullcount*200));
                      }
                      var temp1=document.querySelectorAll(".gameover");
                      temp1.forEach((item, i) => {
                        item.classList.add("hidden");
                        item.style.opacity=1;
                        item.classList.remove("hidden");
                        item.classList.add("show");
                      });
                      setTimeout(function() {
                        document.getElementById("총획득").classList.remove("fade");
                        document.getElementById("총획득").classList.remove("hidden");
                        document.getElementById("총획득").children[0].innerText="★ TOTAL : "
                        if(gamemod==2){
                          document.getElementById("총획득").children[2].innerText=String(parseInt(pluscoin))+"★"
                        }else{
                          document.getElementById("총획득").children[2].innerText=String(parseInt(pluscoin))+"★"
                        }
                        document.getElementById("총획득").classList.add("show");
                      }, 250);
                    }else{
                      var temp1=document.querySelectorAll(".gameover");
                      temp1.forEach((item, i) => {
                        item.classList.add("hidden");
                        item.style.opacity=1;
                        item.classList.remove("hidden");
                        item.classList.add("show");
                      });
                      setTimeout(function() {
                        document.getElementById("총획득").classList.remove("fade");
                        document.getElementById("총획득").classList.remove("hidden");
                        document.getElementById("총획득").children[0].innerText="★ TOTAL : "
                        if(gamemod==2){
                          document.getElementById("총획득").children[2].innerText=String(parseInt(pluscoin))+"★"
                        }else{
                          document.getElementById("총획득").children[2].innerText=String(parseInt(pluscoin))+"★"
                        }
                        document.getElementById("총획득").classList.add("show");
                    }, 250);
                  }
              }, 250);
            }, 250);
          }, 250);


        }
        function skinplay() {
            const button1 = document.getElementById('button1');
            const button2 = document.getElementById('button2');
            const button3 = document.getElementById('button1');
            skinnum = skinselect;
            skinidx = skinselect;
            // button1.style.display = 'none';
            // 	button2.style.display = 'none';
            rotationflag = true
            restartflag = true
            pluscoin = parseInt(점수 / 10);
            // coin += pluscoin;
            for (var i = 0; i < cubes.length; i++) {
                restartloc.push(cubes[i].mesh.position);
                restartrot.push(cubes[i].mesh.rotation);
            }
            ncolornum = parseInt(Math.random() * colorlst.length);
            ncolornum0 = parseInt(Math.random() * colorlst0.length);
            rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
            rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
            renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
            renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
            rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
            renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
            rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
            renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
            bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
            nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
            bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
            nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
            bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
            nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
            bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
            nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
            bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
            nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
            rotationend = Math.PI / 4
        }



        async function fetchCSV(url) {
            if(true){
              const response = await fetch(url);
              // Ensure the request was successful
              if (response.status !== 200) {
                  throw new Error(`Error fetching CSV data: ${response.status}`);
              }
              // Parse the CSV data into a string
              const csvData = await response.text();
              // Split the CSV data into an array of lines
              const dataArray = csvData.trim().split('\n').map(line => line.split(','));
              // The first row contains the labels
              const labels = dataArray.shift();
              // Convert each row into a dictionary object
              const dictionaries = dataArray.map(row => {
                  return row.reduce((acc, value, index) => {
                      acc[labels[index]] = value;
                      return acc;
                  }, {});
              });
              var dict = {};
              dictionaries.forEach((item) => {
                  dict[item["name"]] = item;
              })
              return dict;
            }else{
              Android.loadDb()
              return sdic;

            }
            // Fetch the CSV data from the URL

        }

        function skinpay() {
            const button1 = document.getElementById('button1');
            const button2 = document.getElementById('button2');
            const button3 = document.getElementById('button3');
            if (!skinlst[skinselect].unlock && coin > skinlst[skinselect].price) {
                coin -= skinlst[skinselect].price;
                skinlst[skinselect].unlock = true;
                // lablst[skinselect].style.outline= "2px solid green";
                lablst[skinselect].style.background = "rgba(0, 80, 0, 0.4)"
                // button1.style.display = '';
                //  button2.style.display = 'none';
                button1.style.backgroundImage = 'url("png/blue_button00.png")'
                button1.innerText = "PLAY"
                button2.style.backgroundImage = 'url("png/grey_button00.png")'
                button2.innerText = ""
                // button3.style.backgroundImage= 'url("green_button00.png")'
            } else {
                console.log("돈이 없습니다")
            }
        }

        function restartGame() {
            // console.log('Restart game...');
            // Hide the game over panel
            rotationflag = true;
            restartflag = true;
            pluscoin = parseInt(점수 / 10)
            // coin += pluscoin;
            for (var i = 0; i < cubes.length; i++) {
                restartloc.push(cubes[i].mesh.position);
                restartrot.push(cubes[i].mesh.rotation);
            }
            ncolornum = parseInt(Math.random() * colorlst.length);
            ncolornum0 = parseInt(Math.random() * colorlst0.length);
            rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
            rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
            renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
            renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
            rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
            renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
            rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
            renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
            bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
            nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
            bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
            nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
            bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
            nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
            bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
            nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
            bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
            nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
            rotationend = Math.PI / 4
        }
        // Your code to restart the game goes here
        function viewAds() {
            // console.log('View ads and earn 2x coins...');
            rotationflag = true
            restartflag = true
            pluscoin = 2 * parseInt(점수 / 10)
            // coin += pluscoin;
            for (var i = 0; i < cubes.length; i++) {
                restartloc.push(cubes[i].mesh.position);
                restartrot.push(cubes[i].mesh.rotation);
            }
            ncolornum = parseInt(Math.random() * colorlst.length);
            ncolornum0 = parseInt(Math.random() * colorlst0.length);
            rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
            rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
            renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
            renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
            rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
            renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
            rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
            renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
            bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
            nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
            bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
            nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
            bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
            nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
            bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
            nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
            bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
            nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
            rotationend = Math.PI / 4
        }

        function retry() {
          coin+=pluscoin;
          setdb("data", "0", String(coin));
          document.getElementById("coin2").innerText=String(coin);
          if(점수>bestscore){
            setdb("data", "2", String(점수));
            bestscore=점수
          }


          if (!document.getElementById("mod-overlay").classList.contains("hidden")) {
              document.getElementById("mod-overlay").classList.remove("show");
              document.getElementById("mod-overlay").classList.add("fade");
              setTimeout(function() {
                  document.getElementById("mod-overlay").classList.add("hidden");
              }, 100);

          }

          if (!document.getElementById("setting-overlay").classList.contains("hidden")) {
              document.getElementById("setting-overlay").classList.remove("show");
              document.getElementById("setting-overlay").classList.add("fade");
              setTimeout(function() {
                  document.getElementById("setting-overlay").classList.add("hidden");
              }, 100);

          }

          if (!document.getElementById("gameover-overlay").classList.contains("hidden")) {
              document.getElementById("gameover-overlay").classList.remove("show");
              document.getElementById("gameover-overlay").classList.add("fade");
              setTimeout(function() {
                  document.getElementById("gameover-overlay").classList.add("hidden");
              }, 100);

          }

          if(!document.getElementById("tutorial").classList.contains("hidden")){
            document.getElementById("tutorial").classList.remove("show");
            document.getElementById("tutorial").classList.add("fade");
            setTimeout(function() {
              document.getElementById("tutorial").classList.add("hidden");
            }, 100);

          }
          document.getElementById("optionlst").classList.remove("show");
          document.getElementById("optionlst").classList.add("fade");
          document.getElementById("right").children[1].classList.add("hidden");
          document.getElementById("right").children[0].classList.remove("hidden");
          document.getElementById("right").children[0].style.display = ""
          setTimeout(function() {
              document.getElementById("optionlst").classList.add("hidden");
          }, 100);


          if (!rotationflag) {
              rotationflag = true
              restartflag = true
              pluscoin = parseInt(점수 / 10)
              // coin += pluscoin;
              for (var i = 0; i < cubes.length; i++) {
                  restartloc.push(cubes[i].mesh.position);
                  restartrot.push(cubes[i].mesh.rotation);
              }
              ncolornum = parseInt(Math.random() * colorlst.length);
              ncolornum0 = parseInt(Math.random() * colorlst0.length);
              rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
              renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
              rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
              renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
              rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
              renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
              rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
              renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
              bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
              nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
              bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
              nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
              bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
              nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
              bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
              nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
              bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
              nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
              rotationend = Math.PI / 4
          }
        }
        window.retry=retry;

        function initdb(){
          Android.saveDb("idx탭type탭name탭0탭2탭4탭8탭16탭32탭64탭128탭256탭512탭1024탭2048탭up탭down탭left탭right탭upper탭lower탭title탭producer탭unlock탭price탭cash탭final냅0탭wooden탭wooden탭dance_loop0.ogg탭4.ogg탭ESM_Wooden_Pickup_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_Multi_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_3_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Select_2_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Lighthearted_Bonus_Objective_5_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭ESM_Lighthearted_Bonus_Objective_6_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭5.ogg탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Dance Hall탭AKI PRO탭0탭44탭0탭1냅1탭lofi탭lofi_slowdown탭slowdown.ogg탭4.ogg탭LoFi-Kick-ADSR Kick Slam.WAV탭LoFi-Clap-ADSR Clap.WAV탭LoFi-Snare-ADSR Snr 1.WAV탭LoFi-Clap-ADSR Snap.WAV탭LoFi-Perc-ADSR Perc 3.WAV탭LoFi-Kick-ADSR Kick Punch.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭LoFi-Perc-ADSR Perc 2.WAV탭LoFi-Perc-ADSR Perc 2.WAV탭LoFi-HiHat-ADSR Hat 2.WAV탭LoFi-HiHat-ADSR Hat 2.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Slow Down탭AKI PRO탭1탭45탭1탭1냅2탭lofi탭lofi_touch탭touch.ogg탭4.ogg탭LoFi-Kick-ADSR Touch Kick 1.WAV탭LoFi-Snare-ADSR OV Snr 1.WAV탭LoFi-Snare-ADSR OV Snr 2.WAV탭LoFi-Clap-ADSR Snap.WAV탭LoFi-Loop-ADSR Touch Syn.WAV탭LoFi-Loop-ADSR Touch Bass.WAV탭LoFi-HiHat-ADSR Crash.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭LoFi-Perc-ADSR Touch Perc 3.WAV탭LoFi-Perc-ADSR Touch Perc 3.WAV탭LoFi-HiHat-ADSR Touch Hat 1.WAV탭LoFi-HiHat-ADSR Touch Hat 2.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Touch탭AKI PRO탭1탭46탭1탭1냅3탭lofi탭lofi_bedroom탭bedroom.ogg탭4.ogg탭LoFi-kICK-ADSR Kick 1.WAV탭LoFi-Clap-ADSR Clap.WAV탭LoFi-Perc-ADSR Perc 3.WAV탭LoFi-Clap-ADSR Snap.WAV탭LoFi-Clap-ADSR Clap Delay.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭LoFi-SFX-ADSR SFX.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭LoFi-Perc-ADSR Touch Perc 2.WAV탭LoFi-Perc-ADSR Touch Perc 2.WAV탭LoFi-HiHat-ADSR Touch Hat 2.WAV탭LoFi-HiHat-ADSR Touch Hat 2.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Bedroom탭AKI PRO탭1탭47탭1탭1냅4탭lofi탭lofi_somepluk탭somepluk.ogg탭4.ogg탭LoFi-Kick-ADSR Kick Lite.WAV탭LoFi-Snare-ADSR Rim.WAV탭LoFi-Perc-ADSR Perc 6.WAV탭LoFi-Snare-ADSR SnarePit.WAV탭LoFi-Kick-ADSR Kick Pop.WAV탭LoFi-Hit-ADSR Pluck Cmaj7.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭LoFi-HiHat-ADSR Hat 6.WAV탭LoFi-HiHat-ADSR Hat 6.WAV탭LoFi-HiHat-ADSR Hat 5.WAV탭LoFi-HiHat-ADSR Hat 5.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Some Pluk탭AKI PRO탭1탭48탭1탭1냅5탭lofi탭lofi_midnight탭midnight.ogg탭4.ogg탭LoFi-kICK-ADSR Kick 1.WAV탭LoFi-Snare-ADSR Snr 1.WAV탭LoFi-Clap-ADSR Clap.WAV탭LoFi-Clap-ADSR Snap.WAV탭LoFi-Perc-ADSR Perc 3.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭IbizaHouse-Vocal-IH Vox 05.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭LoFi-Perc-ADSR Perc 2.WAV탭LoFi-Perc-ADSR Perc 2.WAV탭LoFi-HiHat-ADSR Hat 2.WAV탭LoFi-HiHat-ADSR Hat 2.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Midnight탭AKI PRO탭1탭49탭1탭1냅6탭lofi탭lofi_smokeit탭LoFi-Loop-Music-LS Smoke It G.WAV탭4.ogg탭LoFi-Kick-LS Smoke It Kik 1.WAV탭LoFi-Snare-LS Smoke It Snare 1.WAV탭LoFi-Snare-LS Smoke It Snare 2.WAV탭LoFi-Clap-ADSR Snap.WAV탭LoFi-Kick-LS Smoke It 808.WAV탭LoFi-Snare-LS Smoke It Snare 3.WAV탭LoFi-Perc-LS Smoke It Woody.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭LoFi-Perc-ADSR Perc 2.WAV탭LoFi-Perc-ADSR Perc 2.WAV탭LoFi-HiHat-ADSR Hat 2.WAV탭LoFi-HiHat-ADSR Hat 2.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Smoke It탭AKI PRO탭1탭50탭1탭1냅7탭lofi탭new1탭LoFi-Loop-Music-LS ML 13 120 C.WAV탭4.ogg탭LoFi-kICK-ADSR Kick 1.WAV탭LoFi-Clap-ADSR Clap.WAV탭LoFi-Perc-ADSR Perc 3.WAV탭LoFi-Clap-ADSR Snap.WAV탭LoFi-Clap-ADSR Clap Delay.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭LoFi-SFX-ADSR SFX.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭LoFi-Perc-ADSR Touch Perc 2.WAV탭LoFi-Perc-ADSR Touch Perc 2.WAV탭LoFi-HiHat-ADSR Touch Hat 2.WAV탭LoFi-HiHat-ADSR Touch Hat 2.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭LoFI_120 C탭AKI PRO탭1탭51탭1탭1냅8탭lofi탭new2탭LoFi-Loop-Music-LS ML 13 120 C.WAV탭4.ogg탭LoFi-Kick-ADSR Kick Lite.WAV탭LoFi-Snare-ADSR Rim.WAV탭LoFi-Perc-ADSR Perc 6.WAV탭LoFi-Snare-ADSR SnarePit.WAV탭LoFi-Kick-ADSR Kick Pop.WAV탭LoFi-Hit-ADSR Pluck Cmaj7.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭LoFi-HiHat-ADSR Hat 6.WAV탭LoFi-HiHat-ADSR Hat 6.WAV탭LoFi-HiHat-ADSR Hat 5.WAV탭LoFi-HiHat-ADSR Hat 5.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭LoFI_94 A#탭AKI PRO탭1탭52탭1탭1냅9탭lofi탭new3탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭LoFi-kICK-ADSR Kick 1.WAV탭LoFi-Snare-ADSR Snr 1.WAV탭LoFi-Clap-ADSR Clap.WAV탭LoFi-Clap-ADSR Snap.WAV탭LoFi-Perc-ADSR Perc 3.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭IbizaHouse-Vocal-IH Vox 05.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭LoFi-Perc-ADSR Perc 2.WAV탭LoFi-Perc-ADSR Perc 2.WAV탭LoFi-HiHat-ADSR Hat 2.WAV탭LoFi-HiHat-ADSR Hat 2.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭LoFI_115 Cm탭AKI PRO탭1탭53탭1탭1냅10탭retro탭ibiza_deep탭IbizaHouse-Synth-Loop.ogg탭4.ogg탭IbizaHouse-Kick-IH Kick 09.WAV탭IbizaHouse-Clap-IH Clap 05.WAV탭IbizaHouse-Snare-IH Snare 05.WAV탭IbizaHouse-Bass-IH Bass Db 05.WAV탭IbizaHouse-Kick-IH Kick 10.WAV탭IbizaHouse-Vocal-IH Vox 09.WAV탭IbizaHouse-Vocal-IH Vox 10.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭IbizaHouse-Hat-IH Hat 13.WAV탭IbizaHouse-Hat-IH Hat 15.WAV탭IbizaHouse-Hat-IH Hat 14.WAV탭IbizaHouse-Hat-IH Hat 13.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭IbizaHouse탭AKI PRO탭1탭54탭0탭1냅11탭retro탭ibiza_give탭IbizaHouse-Synth-Loop.ogg탭4.ogg탭IbizaHouse-Kick-IH Kick 05.WAV탭IbizaHouse-Clap-IH Clap 03.WAV탭IbizaHouse-Snare-IH Snare 03.WAV탭IbizaHouse-Bass-IH Bass D 03.WAV탭IbizaHouse-Kick-IH Kick 06.WAV탭IbizaHouse-Vocal-IH Vox 06.WAV탭IbizaHouse-Vocal-IH Vox 05.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭IbizaHouse-Hat-IH Hat 09.WAV탭IbizaHouse-Hat-IH Hat 09.WAV탭IbizaHouse-Hat-IH Hat 08.WAV탭IbizaHouse-Hat-IH Hat 08.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭IbizaHouse탭AKI PRO탭1탭55탭0탭1냅12탭retro탭lofi_withu탭LoFi-Loop-Music-LS With U Lp.WAV탭4.ogg탭LoFi-Kick-LS With U Kick 1.WAV탭LoFi-Snare-LS With U Snare 1.WAV탭LoFi-Perc-LS With U Cave.WAV탭LoFi-Snare-LS With U Snare 3.WAV탭LoFi-Vocal-LS With U Vox 1.WAV탭LoFi-Kick-LS With U 808.WAV탭LoFi-Vocal-LS With U Vox 2.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭LoFi-Perc-LS With U Rim.WAV탭LoFi-Perc-LS With U Rim.WAV탭LoFi-HiHat-LS With U Hats 1.WAV탭LoFi-HiHat-LS With U Hats 1.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭With You탭AKI PRO탭1탭56탭0탭1냅13탭retro탭trap_cellar탭Trap-Synth-TR CK SynLp G.WAV탭4.ogg탭Trap-Hat-TR CK 07 Hats.WAV탭Trap-Kick-TR CK 01 Kick.WAV탭Trap-Snare-TR CK 01 Snare.WAV탭Trap-Perc-TR CK 01 Perc.WAV탭Trap-Snap-TR CK Snap 2.WAV탭Trap-Bass-TR CK BassHit C.WAV탭Trap-Vocal-TR CK 06 Vox.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭Trap-Synth-TR CK SynHit C.WAV탭Trap-Hat-TR CK 10 Hats.WAV탭Trap-Synth-TR CK SynHit C.WAV탭Trap-Hat-TR CK 10 Hats.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Cellar탭AKI PRO탭1탭57탭0탭1냅14탭retro탭rnb_demo탭FutureHouse-Loop-Synth-17 Lp D 126.WAV탭4.ogg탭Trap-Kick-Trap Classic Kick.WAV탭Trap-Snare-Trap Classic Snr 3.WAV탭Trap-Perc-TR OV Perc.WAV탭RnB-Snap-RSK3 Snp1.WAV탭Trap-Bass-TR OV 808 Kick.WAV탭Trap-Snare-TR OV Snr 1.WAV탭Trap-Tom-TR OV Luv Hi Tom.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭Trap-Synth-TR CK SynHit C.WAV탭Trap-Hat-TR CK 10 Hats.WAV탭Trap-Synth-TR CK SynHit C.WAV탭Trap-Hat-TR CK 10 Hats.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭rnb_demo탭AKI PRO탭1탭58탭0탭1냅15탭retro탭hiphop_demo탭HipHop-Bass-MSXII Shinez.WAV탭4.ogg탭HipHop-Kick-MSXII Shinez 01.WAV탭HipHop-Snare-MSXII Shinez 01.WAV탭HipHop-Kick-MSXII Shinez 02.WAV탭HipHop-Snare-MSXII Shinez 02.WAV탭HipHop-Chord-MSXII Shinez Abmin.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭HipHop-Synth-Arps-MSXII Shinez.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭11.ogg탭HipHop-Hat-MSXII Shinez 01.WAV탭HipHop-Hat-MSXII Shinez 01.WAV탭HipHop-Hat-MSXII Shinez 01.WAV탭HipHop-Hat-MSXII Shinez 01.WAV탭11.ogg탭11.ogg탭hiphop_demo탭AKI PRO탭1탭59탭0탭1냅16탭retro탭boombap_91탭BoomBap-Melodic-RetroSciFictAm.WAV탭4.ogg탭BoomBap-Kick-MSXII Slum 02.WAV탭BoomBap-Snare-MSXII Felah 02.WAV탭BoomBap-Kick-MSXII Swag City 02.WAV탭BoomBap-FX-HH FE Zap.WAV탭BoomBap-Clap-MSXII Mashed.WAV탭LoFi-Kick-ADSR Kick Punch.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭RnB-Snap-RSK3 Snp1.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭11.ogg탭BoomBap-Snare-MSXII Slum 02.WAV탭BoomBap-Snare-MSXII Slum 02.WAV탭BoomBap-Perc-MSXII Coolin.WAV탭BoomBap-Perc-MSXII Coolin.WAV탭11.ogg탭11.ogg탭boombap_91탭AKI PRO탭1탭60탭0탭1냅17탭retro탭boombap_grid탭BoomBap-Melodic-HoustonSky70Fm.WAV탭4.ogg탭BoomBap-Kick-HH Kick 07.WAV탭BoomBap-Snare-HH DWK Snare 1.WAV탭BoomBap-Cymbal-HH TBC Cym 1.WAV탭BoomBap-Snare-MSXII Felah 02.WAV탭BoomBap-Clap-MSXII Mashed.WAV탭LoFi-Kick-ADSR Kick Punch.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭RnB-Snap-RSK3 Snp1.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭11.ogg탭BoomBap-Snare-MSXII Slum 02.WAV탭BoomBap-Snare-MSXII Slum 02.WAV탭BoomBap-Perc-MSXII Coolin.WAV탭BoomBap-Perc-MSXII Coolin.WAV탭11.ogg탭11.ogg탭boombap_grid탭AKI PRO탭1탭61탭0탭1냅18탭retro탭rnb_kit09탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭RnB-Kick-RSK9 Kik.WAV탭RnB-Snare-RSK9 Snr.WAV탭RnB-Cymbal-RSK9 Crs.WAV탭RnB-Melodic-RSK9 Pno1.WAV탭RnB-Melodic-RSK9 Pno2.WAV탭RnB-Melodic-RSK9 Bas1.WAV탭LoFi-Kick-ADSR 808 Drop.WAV탭RnB-Melodic-RSK9 Bas2.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭11.ogg탭RnB-Perc-RSK9 Prc.WAV탭RnB-Perc-RSK9 Prc.WAV탭RnB-Perc-RSK9 Shkr.WAV탭RnB-Perc-RSK9 Shkr.WAV탭11.ogg탭11.ogg탭rnb_kit09탭AKI PRO탭1탭62탭0탭1냅19탭808탭dancehall_floor탭DanceHall-Melodic-Vibes Lp 4.WAV탭4.ogg탭DanceHall-Kick-Anthem Kik .WAV탭DanceHall-Kick-Anth Bang.WAV탭DanceHall-Clap-Luv Clap 1.WAV탭DanceHall-Snap-MC2 Snap .WAV탭DanceHall-Clap-MC01 Clp 1.WAV탭DanceHall-Perc-FilthK Perc.WAV탭DanceHall-Vocal-MC05 Voc .WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭DanceHall-Hat-CP MelHH2.WAV탭DanceHall-Hat-CP MelHH2.WAV탭DanceHall-Hat-Dirt1 Hat 2.WAV탭DanceHall-Hat-Dirt1 Hat 2.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭dancehall_floor탭AKI PRO탭1탭63탭0탭1냅20탭808탭future04탭FutureBass-Loop-Synth-FD synEb1.WAV탭4.ogg탭FutureBass-Bass-FD guessG.WAV탭FutureBass-Kick-FD coment.WAV탭FutureBass-Cymbal-FD silcone.WAV탭FutureBass-Clap-FD oldskool.WAV탭FutureBass-Clap-FD snip.WAV탭FutureBass-FX-FD eight.WAV탭FutureBass-Vocal-FD faithvox1Eb.WAV탭80s-Tom-F9 GH Grid HTom.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭5.ogg탭FutureBass-Hat-FD gest.WAV탭FutureBass-Hat-FD gest.WAV탭FutureBass-Hat-FD kitchen.WAV탭FutureBass-Hat-FD kitchen.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭future04탭AKI PRO탭1탭64탭0탭1냅21탭808탭funk_minneapolis탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭Funk-Bass-F9 MH Cadi Bs 1 E.WAV탭Funk-Bass-F9 MH Cadi Bs 2 E.WAV탭Funk-Clap-F9 MH Minn FX Clap.WAV탭Funk-Bass-F9 MH CMI Bass E.WAV탭Funk-Bass-F9 MH JP Growl Bs E.WAV탭Funk-Synth-F9 MH Wiseguy E.WAV탭Funk-Bass-F9 MH P Slide E.WAV탭Funk-Synth-F9 MH MegaPoly E.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭11.ogg탭Funk-Kick-F9 MH Minn AMS Kick.WAV탭Funk-Snare-F9 MH Minn Snare.WAV탭Funk-Tom-F9 MH MInn Hi 88 Cnga.WAV탭Funk-Tom-F9 MH MInn Low 88 Cnga.WAV탭11.ogg탭11.ogg탭funk_minneapolis탭AKI PRO탭1탭65탭0탭1냅22탭808탭trap_demo탭Trap-Melodic-TR MX T Vision.WAV탭4.ogg탭Urban-Kick-Heat3 SKick.WAV탭Urban-Snare-Heat3 SRoll1.WAV탭Urban-Snare-Heat3 Snr.WAV탭Trap-Snap-TR MX Push Snap 2.WAV탭Trap-Clap-TR MX  Clp 1.WAV탭Urban-Cymbal-Heat3 Cym.WAV탭Trap-FX-TR MX  Sfx 2.WAV탭Urban-Clap-Heat3 CLG.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭11.ogg탭Trap-Hat-TR MX Drill HH.WAV탭Urban-HiHat-Heat3 HH1.WAV탭Trap-Perc-TR MX Tri 01.WAV탭Trap-Kick-TR MX Kick 09.WAV탭11.ogg탭11.ogg탭trap_demo탭AKI PRO탭1탭66탭0탭1냅23탭808탭lofi_underwater탭LoFi-Loop-Music-LS Underwater FM.WAV탭4.ogg탭LoFi-Perc-LS Underwater Click.WAV탭LoFi-Perc-LS Underwater Tamb.WAV탭LoFi-HiHat-LS Underwater Hat 3.WAV탭LoFi-Kick-LS Underwater Kick.WAV탭LoFi-Snap-LS Underwater Snp.WAV탭LoFi-Hit-LS Underwater Syn.WAV탭LoFi-Vocal-LS Underwater FM.WAV탭LoFi-Kick-LS Underwater 808 1.WAV탭LoFi-Kick-LS Underwater 808 2.WAV탭11.ogg탭LoFi-Perc-LS Underwater Tom.WAV탭LoFi-Perc-LS Underwater Tom.WAV탭LoFi-Perc-LS Underwater Tom.WAV탭LoFi-Perc-LS Underwater Tom.WAV탭11.ogg탭11.ogg탭lofi_underwater탭AKI PRO탭1탭67탭0탭1냅24탭808탭trap_weekend탭FutureHouse-Loop-Synth-17 Lp D 126.WAV탭4.ogg탭Trap-Kick-TR MW BouceKik1.WAV탭Trap-Snare-TR MW BigTrap Snr.WAV탭Trap-Keys-TR MW Rhode 1.WAV탭Trap-Keys-TR MW Rhode 2.WAV탭Trap-Clap-TR MW EQ Clap.WAV탭Trap-Cymbal-TR MW Ring Cym.WAV탭Trap-Bass-TR MW BB Bass.WAV탭Trap-Keys-TR MW RevRhode.WAV탭Trap-Pad-TR MW SmoothPad.WAV탭11.ogg탭Trap-Guitar-TR MW NRev Guit 1.WAV탭Trap-Guitar-TR MW NRev Guit 2.WAV탭Trap-Guitar-TR MW NRev Guit 1.WAV탭Trap-Guitar-TR MW NRev Guit 2.WAV탭11.ogg탭11.ogg탭trap_weekend탭AKI PRO탭1탭68탭0탭1냅25탭808탭trap_808탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭Trap-Kick-Luv 808 2.WAV탭Trap-Snare-Luv Snare.WAV탭Trap-Snap-Luv Snap 2.WAV탭Trap-Clap-Luv Clap 1.WAV탭Trap-Kick-Luv Drop 2.WAV탭Trap-FX-Buss ZRoll.WAV탭Trap-Kick-Luv 808 01.WAV탭Trap-FX-Buss ZRoll.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭11.ogg탭Trap-Tom-Luv Hi Tom.WAV탭Trap-Tom-Luv Mid Tom.WAV탭Trap-Tom-Luv Hi Tom.WAV탭Trap-Tom-Luv Mid Tom.WAV탭11.ogg탭11.ogg탭trap_808탭AKI PRO탭1탭69탭0탭1냅26탭hiphop탭hiphop_west탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭hiphop_west탭AKI PRO탭1탭70탭0탭1냅27탭hiphop탭hiphop_fallen탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭hiphop_fallen탭AKI PRO탭1탭71탭0탭1냅28탭hiphop탭hiphop_hoodie탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭hiphop_hoodie탭AKI PRO탭1탭72탭0탭1냅29탭hiphop탭hiphop_unclejoes탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭hiphop_unclejoes탭AKI PRO탭1탭73탭0탭1냅30탭hiphop탭hiphop_swag탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭hiphop_swag탭AKI PRO탭1탭74탭0탭1냅31탭hiphop탭hiphop_rawcratez2탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭hiphop_rawcratez2탭AKI PRO탭1탭75탭0탭1냅32탭hiphop탭hiphop_rawcutz2탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭hiphop_rawcutz2탭AKI PRO탭1탭76탭0탭1냅33탭hiphop탭hiphop_rivals탭LoFi-Loop-Music-LS ML 3 115 Cm.WAV탭4.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭11.ogg탭hiphop_rivals탭AKI PRO탭1탭77탭0탭1냅34탭wooden탭High End Party탭High End Party.ogg탭4.ogg탭ESM_Wooden_Pickup_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_Multi_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_3_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Select_2_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Lighthearted_Bonus_Objective_5_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭ESM_Lighthearted_Bonus_Objective_6_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭5.ogg탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭High End Party탭jhaeka탭0탭78탭0탭1냅35탭wooden탭Catwalk탭Catwalk.ogg탭4.ogg탭ESM_Wooden_Pickup_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_Multi_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_3_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Select_2_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Lighthearted_Bonus_Objective_5_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭ESM_Lighthearted_Bonus_Objective_6_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭5.ogg탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Catwalk탭jhaeka탭0탭79탭0탭1냅36탭wooden탭Lost in the Dessert탭Lost in the Dessert.ogg탭4.ogg탭ESM_Wooden_Pickup_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_Multi_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_3_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Select_2_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Lighthearted_Bonus_Objective_5_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭ESM_Lighthearted_Bonus_Objective_6_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭5.ogg탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Lost in the Dessert탭jhaeka탭0탭80탭0탭1냅37탭wooden탭You_re in the Future탭You_re in the Future.ogg탭4.ogg탭ESM_Wooden_Pickup_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_Multi_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_3_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Select_2_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Lighthearted_Bonus_Objective_5_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭ESM_Lighthearted_Bonus_Objective_6_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭5.ogg탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭You_re in the Future탭jhaeka탭0탭81탭0탭1냅38탭wooden탭Beach House탭Beach House.ogg탭4.ogg탭ESM_Wooden_Pickup_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_Multi_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_3_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Select_2_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Lighthearted_Bonus_Objective_5_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭ESM_Lighthearted_Bonus_Objective_6_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭5.ogg탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Beach House탭jhaeka탭0탭82탭0탭1냅39탭wooden탭Puzzles탭Puzzles.ogg탭4.ogg탭ESM_Wooden_Pickup_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_Multi_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_3_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Select_2_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Lighthearted_Bonus_Objective_5_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭ESM_Lighthearted_Bonus_Objective_6_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭5.ogg탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭Puzzles탭jhaeka탭0탭83탭0탭1냅40탭wooden탭frozen winter탭frozen_winter.ogg탭4.ogg탭ESM_Wooden_Pickup_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_1_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Pickup_Multi_2_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Sequence_3_Mobile_App_Game_FX_Sound_Magic_Musical_Element_Transition_Chord_Simple_Hit.wav탭ESM_Wooden_Select_2_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Lighthearted_Bonus_Objective_5_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭ESM_Lighthearted_Bonus_Objective_6_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭5.ogg탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭ESM_Wood_Block_UI_2_Dry_Mobile_App_Game_FX_Sound_Magic_Fantasy_Touch_Accent_Stab_Hit.wav탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭frozen winter탭jhaeka탭1탭84탭0탭1냅41탭new탭80s탭80s.ogg탭4.ogg탭80s-Kick-F9 GH Grid Kick Amb.WAV탭80s-Snare-F9 GH Grid Amb Snr.WAV탭80s-Tom-F9 GH Simm Mid.WAV탭80s-Cymbal-F9 GH Grid Cym.WAV탭80s-Bass-F9 GH DX Bass 2 D.WAV탭80s-Synth-F9 GH Spaced D.WAV탭80s-Tom-F9 GH Simm Low.WAV탭80s-Synth-F9 GH VS Twang D.WAV탭ESM_Lighthearted_Bonus_Objective_6_Mobile_App_Game_FX_Sound_Magic_Fantasy_Musical_Element_Transition_Chord_.wav탭5.ogg탭80s-Tom-F9 GH Grid LTom.WAV탭80s-Perc-F9 GH Grid Low Cng.WAV탭80s-Tom-F9 GH Grid LTom.WAV탭80s-Perc-F9 GH Grid Low Cng.WAV탭11.ogg탭LoFi-Perc-LS Final Perc 3.WAV탭80s탭AKI PRO탭1탭85탭0탭1냅42탭data탭data탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0탭0냅43탭data1탭data1탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭5000탭0")

        }

        function loaddb(){
            Android.loadDb()
         }

         function getdb(text){
            let rows = text.split('냅');
            let result = rows.map(row => row.split('탭'));


            labels = result.shift();
            // Convert each row into a dictionary object
            var dictionaries = result.map(row => {
                return row.reduce((acc, value, index) => {
                    acc[labels[index]] = value;
                    return acc;
                }, {});
            });
            var dict = {};
            dictionaries.forEach((item) => {
                dict[item["name"]] = item;
            })
            nslst=dict;
            window.nslst=dict;
            coin=parseInt(nslst["data"]["0"]);
            bestscore=parseInt(nslst["data"]["2"]);
            //document.getElementById("coin2").innerText=String(dict["trap_808"]["name"]);
         }

         function savedb(text){
            Android.saveDb(text)
         }

         function setdb(name, key, value){
            nslst[name][key]=value;
            var keys = Object.keys(nslst);
            var templst0=""
            labels.forEach((label, idx4) => {
                templst0+=label
                if(idx4!=labels.length-1) templst0+="탭"
            });
            templst0+="냅"
            keys.forEach((item, idx0) => {
              var templst1=""
              labels.forEach((label, idx1) => {
                templst1+=String(nslst[item][label])
                if(idx1!=labels.length-1) templst1+="탭"
              });
              templst0+=templst1;
              if(idx0!=keys.length-1) templst0+="냅"
            });
            Android.saveDb(templst0)
         }




         function soundmute(){
           if(배경음){
             배경음=false;
             document.getElementById("bgm").children[0].classList.add("hidden");
             document.getElementById("bgm").children[1].classList.remove("hidden");
             document.getElementById("bgm").children[1].style.display = ""
           		for(let i=0;i<6;i++){
           			soundic[sdic[i]["0"]].setVolume( 0.0 );
           		}

           	}else{
              배경음=true;
              document.getElementById("bgm").children[1].classList.add("hidden");
              document.getElementById("bgm").children[0].classList.remove("hidden");
              document.getElementById("bgm").children[0].style.display = ""
           		for(let i=0;i<6;i++){
           			soundic[sdic[i]["0"]].setVolume( 0.4 );
           			}

           	}
         }

         function effmute(){
           if(효과음){
             효과음=false;
             document.getElementById("music").children[0].classList.add("hidden");
             document.getElementById("music").children[1].classList.remove("hidden");
             document.getElementById("music").children[1].style.display = ""
           		for(let i=0;i<6;i++){
           			let temp=[2,4,8,16,32,64,128,256,512,1024,2048,"up", "down", "left", "right", "upper", "lower"]
           			for(let j=0;j<temp.length;j++){
           			soundic[sdic[i][temp[j]]].setVolume( 0.0 );
           			}
           		}
           	}else{
              효과음=true;
              document.getElementById("music").children[1].classList.add("hidden");
              document.getElementById("music").children[0].classList.remove("hidden");
              document.getElementById("music").children[0].style.display = ""
           		for(let i=0;i<6;i++){
           			let temp=[2,4,8,16,32,64,128,256,512,1024,2048,"up", "down", "left", "right", "upper", "lower"]
           			for(let j=0;j<temp.length;j++){
           			soundic[sdic[i][temp[j]]].setVolume( 0.3 );
           			}
           		}
           	}
         }

        function getco(){
            Android.readCoin()
         }

         function writeco(){
            Android.writeCoin(String(coin))
         }

         function setcoin(text){
            document.getElementById("coin2").innerText=String(text);
         }

         window.getco=getco;
         window.writeco=writeco;
         window.setcoin=setcoin;

         window.loaddb=loaddb;
         window.getdb=getdb;
         window.savedb=savedb;
         window.setdb=setdb;

         window.effmute=effmute;
         window.soundmute=soundmute;


         var slider = document.getElementById("myRange");
         var output = document.getElementById("demo");
         output.innerHTML = slider.value;

         slider.oninput = function() {
           output.innerHTML = this.value;
           resol(parseInt(this.value));
           output.innerText="해상도 LV: " +String(this.value)
         }


        // Your code to show ads and grant 2x coins goes here
        document.addEventListener("DOMContentLoaded", function() {
            // Select all radio buttons with the class 'voxel-radio'
            var reBtn = document.getElementById('restartbtn');
            var reBtn2 = document.getElementById('restartbtn2');
            var reBtn3 = document.querySelector(".restartbtn3");

            var songbtn = document.getElementById('pbt2');
            var playbtn = document.getElementById('pbt');
            var backbtn = document.getElementById('backbtn');
            var sidebtn = document.getElementById('sidec');
            var mod0 = document.getElementById('mod0');
            var mod1 = document.getElementById('mod1');
            var mod2 = document.getElementById('mod2');


            sidebtn.addEventListener('click', function() {
                if(sidecam){
                  sidecam=false;
                }else{
                  sidecam=true;
                }
            })

            backbtn.addEventListener('click', function() {
              var sdickeys = Object.keys(soundic);

              sdickeys.forEach((item) => {
                soundic[item]?.stop();
              });
            })

            mod0.addEventListener('click', function() {


                if (!document.getElementById("mod-overlay").classList.contains("hidden")) {
                    document.getElementById("mod-overlay").classList.remove("show");
                    document.getElementById("mod-overlay").classList.add("fade");
                    setTimeout(function() {
                        document.getElementById("mod-overlay").classList.add("hidden");
                    }, 100);
                    gamemod=0;
                    if (!rotationflag) {
                        rotationflag = true
                        restartflag = true
                        pluscoin = parseInt(점수 / 10)
                        // coin += pluscoin;
                        for (var i = 0; i < cubes.length; i++) {
                            restartloc.push(cubes[i].mesh.position);
                            restartrot.push(cubes[i].mesh.rotation);
                        }
                        ncolornum = parseInt(Math.random() * colorlst.length);
                        ncolornum0 = parseInt(Math.random() * colorlst0.length);
                        rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                        renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                        rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                        renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                        rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                        renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                        rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                        renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                        bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                        nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                        bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                        nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                        bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                        nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                        bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                        nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                        bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                        nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                        rotationend = Math.PI / 4
                    }
                }
            })

            mod1.addEventListener('click', function() {
                if (!document.getElementById("mod-overlay").classList.contains("hidden")) {
                    document.getElementById("mod-overlay").classList.remove("show");
                    document.getElementById("mod-overlay").classList.add("fade");
                    setTimeout(function() {
                        document.getElementById("mod-overlay").classList.add("hidden");
                    }, 100);
                    gamemod=1;
                    if (!rotationflag) {
                        rotationflag = true
                        restartflag = true
                        pluscoin = parseInt(점수 / 10)
                        // coin += pluscoin;
                        for (var i = 0; i < cubes.length; i++) {
                            restartloc.push(cubes[i].mesh.position);
                            restartrot.push(cubes[i].mesh.rotation);
                        }
                        ncolornum = parseInt(Math.random() * colorlst.length);
                        ncolornum0 = parseInt(Math.random() * colorlst0.length);
                        rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                        renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                        rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                        renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                        rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                        renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                        rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                        renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                        bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                        nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                        bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                        nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                        bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                        nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                        bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                        nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                        bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                        nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                        rotationend = Math.PI / 4
                    }
                }
            })

            mod2.addEventListener('click', function() {
                if (!document.getElementById("mod-overlay").classList.contains("hidden")) {
                    document.getElementById("mod-overlay").classList.remove("show");
                    document.getElementById("mod-overlay").classList.add("fade");
                    setTimeout(function() {
                        document.getElementById("mod-overlay").classList.add("hidden");
                    }, 100);
                    gamemod=2;
                    if (!rotationflag) {
                        rotationflag = true
                        restartflag = true
                        pluscoin = parseInt(점수 / 10)
                        // coin += pluscoin;
                        for (var i = 0; i < cubes.length; i++) {
                            restartloc.push(cubes[i].mesh.position);
                            restartrot.push(cubes[i].mesh.rotation);
                        }
                        ncolornum = parseInt(Math.random() * colorlst.length);
                        ncolornum0 = parseInt(Math.random() * colorlst0.length);
                        rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                        renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                        rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                        renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                        rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                        renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                        rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                        renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                        bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                        nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                        bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                        nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                        bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                        nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                        bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                        nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                        bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                        nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                        rotationend = Math.PI / 4
                    }
                }
            })

            reBtn.addEventListener('click', function() {
              if(parseInt(Math.random()*3)==1){
                if(false){

                }else{

                  Android.showAd();
                  if (!document.getElementById("mod-overlay").classList.contains("hidden")) {
                      document.getElementById("mod-overlay").classList.remove("show");
                      document.getElementById("mod-overlay").classList.add("fade");
                      setTimeout(function() {
                          document.getElementById("mod-overlay").classList.add("hidden");
                      }, 100);

                  }

                  if (!document.getElementById("setting-overlay").classList.contains("hidden")) {
                      document.getElementById("setting-overlay").classList.remove("show");
                      document.getElementById("setting-overlay").classList.add("fade");
                      setTimeout(function() {
                          document.getElementById("setting-overlay").classList.add("hidden");
                      }, 100);

                  }

                  if (!document.getElementById("gameover-overlay").classList.contains("hidden")) {
                      document.getElementById("gameover-overlay").classList.remove("show");
                      document.getElementById("gameover-overlay").classList.add("fade");
                      setTimeout(function() {
                          document.getElementById("gameover-overlay").classList.add("hidden");
                      }, 100);

                  }

                  if(!document.getElementById("tutorial").classList.contains("hidden")){
                    document.getElementById("tutorial").classList.remove("show");
                    document.getElementById("tutorial").classList.add("fade");
                    setTimeout(function() {
                      document.getElementById("tutorial").classList.add("hidden");
                    }, 100);

                  }
                  document.getElementById("optionlst").classList.remove("show");
                  document.getElementById("optionlst").classList.add("fade");
                  document.getElementById("right").children[1].classList.add("hidden");
                  document.getElementById("right").children[0].classList.remove("hidden");
                  document.getElementById("right").children[0].style.display = ""
                  setTimeout(function() {
                      document.getElementById("optionlst").classList.add("hidden");
                  }, 100);
                }
              }else{
                retry()
              }


            })

            reBtn2.addEventListener('click', function() {
              Android.showAd();
                if (!document.getElementById("setting-overlay").classList.contains("hidden")) {
                    document.getElementById("setting-overlay").classList.remove("show");
                    document.getElementById("setting-overlay").classList.add("fade");
                    setTimeout(function() {
                        document.getElementById("setting-overlay").classList.add("hidden");
                    }, 100);
                    if (!rotationflag) {
                        rotationflag = true
                        restartflag = true
                        pluscoin = parseInt(점수 / 10)
                        // coin += pluscoin;
                        for (var i = 0; i < cubes.length; i++) {
                            restartloc.push(cubes[i].mesh.position);
                            restartrot.push(cubes[i].mesh.rotation);
                        }
                        ncolornum = parseInt(Math.random() * colorlst.length);
                        ncolornum0 = parseInt(Math.random() * colorlst0.length);
                        rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                        renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                        rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                        renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                        rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                        renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                        rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                        renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                        bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                        nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                        bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                        nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                        bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                        nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                        bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                        nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                        bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                        nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                        rotationend = Math.PI / 4
                    }
                }
            })

            reBtn3.addEventListener('click', function() {
              if(parseInt(Math.random()*3)==2){
                if(false){

                }else{
                  Android.showAd();
                }

              }else{
                retry()
              }

            })


            songbtn.addEventListener('click', function() {
              var sdickeys = Object.keys(soundic);
              var ptxt = songbtn.children[2].innerText;
              sdickeys.forEach((item) => {
                soundic[item]?.stop();
              });
              // console.log(ptxt);
              if(sdickeys.indexOf(ptxt)==-1){
                audioLoader.load('https://raw.githubusercontent.com/Radetzki87/web1/master/sound/' + ptxt, function(buffer) {
                    var sound = new THREE.Audio(listener);
                    sound.setBuffer(buffer);
                    sound.setVolume(0.3);
                    soundic[ptxt] = sound;
                    soundic[ptxt]?.play();
                });
              }else{
                  soundic[ptxt]?.play();
              }






            });

            playbtn.addEventListener('click', function() {
              var ptxt = playbtn.children[2].innerText;
              if (ptxt[0] == "3") {
                return;
              }
                playbtn.classList.remove("show");
                playbtn.classList.add("fade");
                document.getElementById("categ1").classList.remove("show");
                document.getElementById("categ1").classList.add("fade");
                document.getElementById("step1").classList.remove("show");
                document.getElementById("step1").classList.add("fade");
                document.getElementById("step3").classList.remove("show");
                document.getElementById("step3").classList.add("fade");
                document.getElementById("options-overlay").classList.remove("show");
                document.getElementById("options-overlay").classList.add("fade");
                document.getElementById("left").classList.remove("fade");
                document.getElementById("right").classList.remove("fade");
                setTimeout(function() {
                    playbtn.classList.add("hidden");
                    document.getElementById("categ1").classList.add("hidden");
                    document.getElementById("step3").classList.add("hidden");
                    document.getElementById("step1").classList.add("hidden");
                    document.getElementById("options-overlay").classList.add("hidden");
                    document.getElementById("left").classList.remove("hidden");
                    document.getElementById("right").classList.remove("hidden");
                    document.getElementById("left").classList.add("show");
                    document.getElementById("right").classList.add("show");
                }, 100);

                if (ptxt[0] == "2") {
                    if(!playbtn.classList.contains("hidden")) playbtn.classList.add("hidden")

                    var ptitle = ptxt.substring(2, ptxt.length)
                    for (let i = 0; i < 6; i++) {
                        if (soundic[sdic[i][0]]?.isPlaying) {
                            soundic[sdic[i][0]].stop();
                        }
                    }
                    if (nslst[ptitle].type == "wooden") {
                        skinnum = 0;
                    } else if (nslst[ptitle].type == "lofi") {
                        skinnum = 1;
                    } else if (nslst[ptitle].type == "retro") {
                        skinnum = 2;
                    } else if (nslst[ptitle].type == "808") {
                        skinnum = 3;
                    } else if (nslst[ptitle].type == "hiphop") {
                        skinnum = 5;
                    }
                    sdic = [];
                    // console.log(ptitle)
                    sdic.push(nslst[ptitle])
                    sdic.push(nslst[ptitle])
                    sdic.push(nslst[ptitle])
                    sdic.push(nslst[ptitle])
                    sdic.push(nslst[ptitle])
                    sdic.push(nslst[ptitle])
                    if (!rotationflag) {
                        rotationflag = true
                        restartflag = true
                        pluscoin = parseInt(점수 / 10)
                        // coin += pluscoin;
                        for (var i = 0; i < cubes.length; i++) {
                            restartloc.push(cubes[i].mesh.position);
                            restartrot.push(cubes[i].mesh.rotation);
                        }
                        ncolornum = parseInt(Math.random() * colorlst.length);
                        ncolornum0 = parseInt(Math.random() * colorlst0.length);
                        rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                        renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                        rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                        renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                        rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                        renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                        rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                        renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                        bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                        nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                        bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                        nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                        bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                        nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                        bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                        nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                        bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                        nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                        rotationend = Math.PI / 4
                    }
                }else if(ptxt[0] == "3"){
                  // console.log("unlock")
                }
            })
            // Loop through each radio button and add an event listener
        });

        function adon(){
          if (!document.getElementById("gameover-overlay").classList.contains("hidden")) {
              document.getElementById("gameover-overlay").classList.remove("show");
              document.getElementById("gameover-overlay").classList.add("fade");
              setTimeout(function() {
                  document.getElementById("gameover-overlay").classList.add("hidden");
              }, 100);
              coin+=parseInt(parseInt(elapsedTime)/10)+parseInt(점수/10);
              document.getElementById("coin2").innerText=String(coin);
              if (!rotationflag) {
                  rotationflag = true
                  restartflag = true
                  pluscoin = parseInt(점수 / 10)
                  // coin += pluscoin;
                  for (var i = 0; i < cubes.length; i++) {
                      restartloc.push(cubes[i].mesh.position);
                      restartrot.push(cubes[i].mesh.rotation);
                  }
                  ncolornum = parseInt(Math.random() * colorlst.length);
                  ncolornum0 = parseInt(Math.random() * colorlst0.length);
                  rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                  renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                  rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                  renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                  rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                  renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                  rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                  renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                  bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                  nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                  bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                  nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                  bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                  nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                  bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                  nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                  bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                  nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                  rotationend = Math.PI / 4
              }
          }
        }
    </script>

    <script>



        function cons(text){
          document.getElementById("coin2").innerText=String(text);
        }

        function adfree(){
          coinup(30)
         //Android.removeAd()




        }

        function showad(){

         Android.showAd()




        }

        function skinsetting(callback) {
            if (callback) {
                callback();
            }
        }
        var step1 = document.getElementById("step1");
        var categ1 = document.getElementById("categ1");

        function skinon() {

            document.getElementById("left").classList.add("fade");
            document.getElementById("left").classList.remove("show");
            document.getElementById("leftup").classList.add("fade");
            document.getElementById("leftup").classList.remove("show");
            document.getElementById("right").classList.add("fade");
            document.getElementById("right").classList.remove("show");
            document.getElementById("center").classList.add("fade");
            document.getElementById("center").classList.remove("show");
            document.getElementById("optionlst").classList.add("fade");
            document.getElementById("optionlst").classList.remove("show");
            document.getElementById("right").children[1].classList.add("hidden");
            document.getElementById("right").children[0].classList.remove("hidden");
            document.getElementById("right").children[0].style.display = ""
            document.getElementById("options-overlay").classList.remove("hidden");
            document.getElementById("options-overlay").classList.add("show");

            setTimeout(function() {
                document.getElementById("left").classList.add("hidden");
                document.getElementById("leftup").classList.add("hidden");
                document.getElementById("right").classList.add("hidden");
                document.getElementById("center").classList.add("hidden");
                document.getElementById("optionlst").classList.add("hidden");
                document.getElementById("step1").classList.remove("hidden");
                document.getElementById("step1").classList.add("show");

            }, 100);
        }

        function bgmon() {
            if (document.getElementById("bgm").children[1].classList.contains("hidden")) {
                document.getElementById("bgm").children[0].classList.add("hidden");
                document.getElementById("bgm").children[1].classList.remove("hidden");
                document.getElementById("bgm").children[1].style.display = ""
                // document.getElementById("bgm").style.backgroundImage = 'url("https://raw.githubusercontent.com/Radetzki87/web1/master/png/red_button09.png")'
            } else {
                document.getElementById("bgm").children[1].classList.add("hidden");
                document.getElementById("bgm").children[0].classList.remove("hidden");
                document.getElementById("bgm").children[0].style.display = ""
                // document.getElementById("bgm").style.backgroundImage = 'url("https://raw.githubusercontent.com/Radetzki87/web1/master/png/green_button09.png")'
            }
        }

        function musicon() {
            if (document.getElementById("music").children[1].classList.contains("hidden")) {
                document.getElementById("music").children[0].classList.add("hidden");
                document.getElementById("music").children[1].classList.remove("hidden");
                document.getElementById("music").children[1].style.display = ""
                // document.getElementById("music").style.backgroundImage = 'url("https://raw.githubusercontent.com/Radetzki87/web1/master/png/red_button09.png")'
            } else {
                document.getElementById("music").children[1].classList.add("hidden");
                document.getElementById("music").children[0].classList.remove("hidden");
                document.getElementById("music").children[0].style.display = ""
                // document.getElementById("music").style.backgroundImage = 'url("https://raw.githubusercontent.com/Radetzki87/web1/master/png/green_button09.png")'
            }
        }

        function optionon() {
            // console.log(nslst)
            if (document.getElementById("optionlst").classList.contains("hidden")) {
                document.getElementById("optionlst").classList.remove("fade");
                document.getElementById("optionlst").classList.remove("hidden");
                // document.getElementById("optionlst").classList.add("show");
                document.getElementById("right").children[0].classList.add("hidden");
                document.getElementById("right").children[1].classList.remove("hidden");
                document.getElementById("right").children[1].style.display = ""

            } else {
              if(!document.getElementById("tutorial").classList.contains("hidden")){
                document.getElementById("tutorial").classList.remove("show");
                document.getElementById("tutorial").classList.add("fade");
                document.getElementById("tutorial").classList.add("hidden");

              }
                // document.getElementById("optionlst").classList.remove("show");
                // document.getElementById("optionlst").classList.add("fade");
                document.getElementById("optionlst").classList.add("hidden");
                document.getElementById("right").children[1].classList.add("hidden");
                document.getElementById("right").children[0].classList.remove("hidden");
                document.getElementById("right").children[0].style.display = ""

            }
        }

        function showsetting(n) {
          if(!document.getElementById("tutorial").classList.contains("hidden")){
            document.getElementById("tutorial").classList.remove("show");
            document.getElementById("tutorial").classList.add("fade");
            setTimeout(function() {
              document.getElementById("tutorial").classList.add("hidden");
            }, 100);
          }
            document.getElementById("left").classList.add("fade");
            document.getElementById("left").classList.remove("show");
            document.getElementById("leftup").classList.add("fade");
            document.getElementById("leftup").classList.remove("show");
            document.getElementById("center").classList.add("fade");
            document.getElementById("center").classList.remove("show");
            document.getElementById("right").classList.add("fade");
            document.getElementById("right").classList.remove("show");
            document.getElementById("optionlst").classList.add("fade");
            document.getElementById("optionlst").classList.remove("show");
            document.getElementById("setting-overlay").classList.remove("hidden");
            document.getElementById("setting-overlay").classList.add("show");
            setTimeout(function() {
                document.getElementById("left").classList.add("hidden");
                document.getElementById("leftup").classList.add("hidden");
                document.getElementById("right").classList.add("hidden");
                document.getElementById("center").classList.add("hidden");
                document.getElementById("optionlst").classList.add("hidden");
                document.getElementById("step1").classList.remove("hidden");
                document.getElementById("step1").classList.add("show");
                document.getElementById("right").children[1].classList.add("hidden");
                document.getElementById("right").children[0].classList.remove("hidden");
                document.getElementById("right").children[0].style.display = ""
            }, 10);
        }

        function showmod() {
            if(!document.getElementById("mod-overlay").classList.contains("hidden")){
              return goBack(5);
            }

            if(!document.getElementById("tutorial").classList.contains("hidden")){
              document.getElementById("tutorial").classList.remove("show");
              document.getElementById("tutorial").classList.add("fade");
              setTimeout(function() {
                document.getElementById("tutorial").classList.add("hidden");
              }, 100);
            }
            document.getElementById("left").classList.add("fade");
            document.getElementById("left").classList.remove("show");
            document.getElementById("leftup").classList.add("fade");
            document.getElementById("leftup").classList.remove("show");
            document.getElementById("right").classList.add("fade");
            document.getElementById("right").classList.remove("show");
            // document.getElementById("center").classList.add("fade");
            // document.getElementById("center").classList.remove("show");
            document.getElementById("optionlst").classList.add("fade");
            document.getElementById("optionlst").classList.remove("show");
            document.getElementById("mod-overlay").classList.remove("hidden");
            document.getElementById("mod-overlay").classList.add("show");
            setTimeout(function() {
                document.getElementById("left").classList.add("hidden");
                document.getElementById("leftup").classList.add("hidden");
                document.getElementById("right").classList.add("hidden");
                // document.getElementById("center").classList.add("hidden");
                document.getElementById("optionlst").classList.add("hidden");
                document.getElementById("step1").classList.remove("hidden");
                document.getElementById("step1").classList.add("show");
                document.getElementById("right").children[1].classList.add("hidden");
                document.getElementById("right").children[0].classList.remove("hidden");
                document.getElementById("right").children[0].style.display = ""
            }, 100);
        }

        var themelst = ["wooden", "lofi", "retro", "808", "hiphop"];
        var imglst = ["0.png", "1.png", "2.png", "3a.png", "7.png"];
        var imglst1 = ["s00.png", "s01.png", "s02.png", "s03.png", "s04.png"];
        var templst = [];

        var paidlst=[true, false, false, false, false, false]

        function showshop() {
            // console.log("what");
            var ulcount = 0;
            var tkey = nslst["data1"]
            // console.log(tkey);
            var templst = ["0","2","4","8","16","32","64","128","256","512","1024","2048"]
            var tlst=[];
            templst.forEach((item) => {
                tlst.push(tkey[item])
                if (tkey[item] == "0") {
                    ulcount++
                }
            })

            // console.log(templst);

            // var ptxt = document.querySelectorAll(".pbutton>label");
            // var pbtn = document.querySelectorAll(".pbutton");
            // var sbtn = document.querySelectorAll(".sbutton");
            //
            // var pimg = document.querySelectorAll(".pbutton>img");
            // var pcode = document.querySelectorAll(".pbutton>h1");
            // var scode = document.querySelectorAll(".sbutton>h1");
            // var stxt = document.querySelectorAll(".sbutton>label");

            var gridlst = document.querySelectorAll("#shop >.grid >div");
            var gbutton = document.querySelectorAll("#shop >h1")
            gbutton[0].innerText = "SKIN SHOP"
            var gbuttonimg = document.querySelectorAll("#shop >img");
            gbuttonimg[0].src = ""
            // console.log(gridlst[0].children);



            // pbtn[0].classList.remove("hidden");
            // pbtn[0].style.backgroundColor="rgba(190, 195, 0, 0.7)"
            // ptxt[0].innerText = "1,000$"
            // pcode[0].innerText = "3"
            // pimg[0].src = "png/" + imglst1[n]
            // pcode[0].innerText = "3" + " "
            // ptxt[0].innerText = gridlst[0].children[3].innerText +" - ("+gridlst[1].children[3].innerText + ")\n Play ▶"
            // pbtn[0].style.backgroundColor="rgba(100, 195, 0, 0.7)"
            for (var i = 0; i < templst.length; i++) {
              gridlst[i].classList.remove("hidden");
              if(tlst[i]=="0"){
                gridlst[i].classList.remove("locked");
                gridlst[i].children[2].innerText = String(i);
                gridlst[i].children[4].innerText = ""
              }else{
                gridlst[i].classList.add("locked");
                gridlst[i].children[2].innerText = String(i);
                gridlst[i].children[4].innerText = "★ :"+ String(tlst[i])
              }


            }

            document.getElementById("step1").classList.remove("show");
            document.getElementById("step1").classList.add("fade");
            setTimeout(function() {
                document.getElementById("step1").classList.add("hidden");
                document.getElementById("shop").classList.remove("hidden");
                document.getElementById("shop").classList.add("show");
            }, 100);
        }

        function showGrid(n) {
            var ulcount = 0;
            var tkey = Object.keys(nslst);
            templst = [];
            tkey.forEach((item) => {
                if (nslst[item].type == themelst[n]) {
                    templst.push(nslst[item])
                    if (nslst[item].unlock == "0") ulcount++;
                }
            })
            templst.sort(function(a, b) {
                return parseInt(a.idx) - parseInt(b.idx);
            });
            // console.log(templst);

            var ptxt = document.querySelectorAll(".pbutton>label");
            var pbtn = document.querySelectorAll(".pbutton");
            var sbtn = document.querySelectorAll(".sbutton");

            var pimg = document.querySelectorAll(".pbutton>img");
            var pcode = document.querySelectorAll(".pbutton>h1");
            var scode = document.querySelectorAll(".sbutton>h1");
            var stxt = document.querySelectorAll(".sbutton>label");

            var gridlst = document.querySelectorAll("#categ1 >.grid >div");
            var gbutton = document.querySelectorAll("#categ1 >h1")
            gbutton[0].innerText = themelst[n]
            var gbuttonimg = document.querySelectorAll("#categ1 >img");
            gbuttonimg[0].src = "png/" + imglst1[n]
            // console.log(gridlst[0].children);

            if(!paidlst[n]){
              gridlst[1].classList.add("hidden");
              gridlst[0].classList.add("hidden");
              pbtn[0].classList.remove("hidden");
              pbtn[0].style.backgroundColor="rgba(190, 195, 0, 0.7)"
              ptxt[0].innerText = "1,000$"
              pcode[0].innerText = "4"+String(n)
              pimg[0].src = "png/" + imglst1[n]


            }else{

              pbtn[0].classList.remove("hidden");
              // pbtn[0].style.backgroundColor="rgba(190, 195, 0, 0.7)"
              // ptxt[0].innerText = "1,000$"
              // pcode[0].innerText = "3"
              pimg[0].src = "png/" + imglst1[n]
              pcode[0].innerText = "3" + " "
              ptxt[0].innerText = gridlst[0].children[3].innerText +" - ("+gridlst[1].children[3].innerText + ")\n Play ▶"
              pbtn[0].style.backgroundColor="rgba(100, 195, 0, 0.7)"
              gridlst[1].classList.remove("hidden");
              gridlst[0].classList.remove("hidden");
              gridlst[1].children[3].innerText="random"
              if (ulcount >= 5) {
                  gridlst[1].classList.remove("locked");
                  gridlst[0].classList.remove("locked");
                  gridlst[1].children[1].style.display="none";
                  gridlst[0].children[1].style.display="none";

                  gridlst[0].children[3].style.color="white";
                  gridlst[1].children[3].style.color="white";


              } else if (ulcount >= 2) {
                  if (!gridlst[1].classList.contains("locked")) gridlst[1].classList.add("locked");
                  gridlst[0].classList.remove("locked");
                  gridlst[0].children[1].style.display="none";
                  gridlst[0].children[3].style.color="white";
                  gridlst[1].children[3].style.color="black";
              } else {
                  if (!gridlst[0].classList.contains("locked")) gridlst[0].classList.add("locked");
                  if (!gridlst[1].classList.contains("locked")) gridlst[1].classList.add("locked");
                  gridlst[0].children[3].style.color="black";
                  gridlst[1].children[3].style.color="black";
              }
              gridlst[0].children[3].style.fontSize="3vw";
              gridlst[1].children[3].style.fontSize="3vw";
            }

            // gridlst[0].children[0].src = "png/" + imglst1[n]
            // gridlst[1].children[0].src = "png/" + imglst1[n]

            for (var i = 0; i < gridlst.length - 2; i++) {
                if (i >= templst.length) {
                    if (!gridlst[2 + i].classList.contains("hidden")) gridlst[2 + i].classList.add("hidden");
                } else {
                    gridlst[2 + i].classList.remove("hidden");
                    gridlst[2 + i].children[2].innerText = templst[i].title
                    gridlst[2 + i].children[3].innerText = "By: "+templst[i].producer
                    gridlst[2 + i].children[4].innerText = "★ :"+ templst[i].price
                    gridlst[2 + i].children[0].src = "png/" + imglst1[n]
                    if (templst[i].unlock == "0") {
                        gridlst[2 + i].classList.remove("locked");
                        gridlst[2 + i].children[1].style.display="none";
                        gridlst[2 + i].children[3].style.fontSize="2vw";
                        gridlst[2 + i].children[4].style.display="none";
                        gridlst[2 + i].children[2].style.color="white";


                    } else {
                        gridlst[2 + i].children[2].style.color="black";
                        gridlst[2 + i].children[4].style.display="";
                        gridlst[2 + i].children[3].style.fontSize="2vw";
                        gridlst[2 + i].children[4].style.fontSize="3vw";
                        gridlst[2 + i].children[1].style.display="";
                        if (!gridlst[2 + i].classList.contains("locked")) gridlst[2 + i].classList.add("locked");
                    }
                }
            }
            document.getElementById("step1").classList.remove("show");
            document.getElementById("step1").classList.add("fade");
            setTimeout(function() {
                document.getElementById("step1").classList.add("hidden");
                document.getElementById("categ1").classList.remove("hidden");
                document.getElementById("categ1").classList.add("show");
            }, 100);
        }

        function showPopup(n) {
            var gridlst = document.querySelectorAll("#categ1 >.grid >div");
            var ptxt = document.querySelectorAll(".pbutton>label");
            var pbtn = document.querySelectorAll(".pbutton");
            var sbtn = document.querySelectorAll(".sbutton");

            var pimg = document.querySelectorAll(".pbutton>img");
            var pcode = document.querySelectorAll(".pbutton>h1");
            var scode = document.querySelectorAll(".sbutton>h1");
            var stxt = document.querySelectorAll(".sbutton>label");



            document.getElementById('pbt').classList.remove("fade")
            document.getElementById('pbt').classList.remove("hidden")
            document.getElementById('pbt').classList.add("show")

            document.getElementById('pbt2').classList.remove("fade")
            document.getElementById('pbt2').classList.remove("hidden")
            document.getElementById('pbt2').classList.add("show")

            // console.log(gridlst[n].children[2].innerText);

            // var gridlst = document.querySelectorAll("#categ1 >.grid >div");





            if (n > 1) {
              if(!gridlst[n].classList.contains("locked")){
                if(gridlst[n].classList.contains("set")){
                  gridlst[n].classList.remove("set")
                }else{
                  gridlst[n].classList.add("set")
                }
              }
                if (templst[n - 2].unlock == 0) {

                    ptxt[0].innerText = gridlst[0].children[2].innerText + "\n Play ▶"
                    pcode[0].innerText = "2" + " " + templst[n - 2].name;
                    scode[0].innerText=templst[n - 2]["0"];
                    stxt[0].innerText=gridlst[n].children[2].innerText
                } else {

                    ptxt[0].innerText = gridlst[n].children[2].innerText + "\n ⭐: " + templst[n - 2].price
                    pcode[0].innerText = "3" + " " + templst[n - 2].name;
                    scode[0].innerText=templst[n - 2]["0"];
                    stxt[0].innerText=gridlst[n].children[2].innerText
                }
            } else if (n == 1) {

                // sbtn[0].classList.remove("show")
                // sbtn[0].classList.add("hidden")
                scode[0].innerText=""
                stxt[0].innerText=""

                if(!gridlst[n].classList.contains("locked")){
                  if(gridlst[n].classList.contains("set")){

                    gridlst[n].classList.remove("set")
                  }else{

                    gridlst[n].classList.add("set")
                  }
                }

                gridlst.forEach((item, i) => {
                  if(i<=1)return;
                  if(!item.classList.contains("locked")){
                    item.classList.remove("set")
                  }
                });


                if (!gridlst[n].classList.contains("locked")) {
                    // gridlst[n].style.backgroundColor="0xaaaaaa"

                    ptxt[0].innerText = gridlst[n].children[3].innerText + "\n Play ▶"
                    pcode[0].innerText = "1" + " " + templst[0].type;
                } else {
                    // gridlst[n].style.backgroundColor="0x44aaaa"

                    ptxt[0].innerText = gridlst[n].children[2].innerText + "\n  unlock more"
                    pcode[0].innerText = "";
                }
            } else if (n == 0) {
              if(!gridlst[n].classList.contains("locked")){
                if(gridlst[n].classList.contains("set")){
                  gridlst[n].children[3].innerText="mix"
                  gridlst[n].classList.remove("set")
                }else{
                  gridlst[n].children[3].innerText="single"
                  gridlst[n].classList.add("set")
                }
              }
                if (!gridlst[n].classList.contains("locked")) {

                    ptxt[0].innerText = gridlst[n].children[3].innerText + "\n Play ▶"
                    pcode[0].innerText = "0" + " " + templst[0].type;
                } else {

                    ptxt[0].innerText = gridlst[n].children[2].innerText + "\n  unlock more"
                    pcode[0].innerText = "";
                }
            }

            var stcount=0;
            gridlst.forEach((item, i) => {
              if(i<=1){
                return;
              }else if(!item.classList.contains("hidden")){
                  if(item.classList.contains("set")){
                    stcount++;
                  }
              }
            });

            if(stcount==0){
              gridlst[1].children[3].innerText="random"
              gridlst[1].classList.remove("set")
            }else{
              gridlst[1].classList.add("set")
              gridlst[1].children[3].innerText=String(stcount)+" selected"
            }


            if(gridlst[0].classList.contains("hidden")){
              pbtn[0].style.backgroundColor="rgba(190, 195, 0, 0.7)"

              ptxt[0].innerText = "1,000$"
              pcode[0].innerText = "3" + " " + templst[n - 2].name;
              scode[0].innerText=templst[n - 2]["0"];
              stxt[0].innerText=gridlst[n].children[2].innerText

            }else if(!gridlst[n].classList.contains("locked")){

              if(stcount>0){
                if(gridlst[0].classList.contains("set")){
                  gridlst[0].children[3].innerText="single"
                  pbtn[0].style.backgroundColor="rgba(20, 150, 225, 0.7)"
                }else{
                  // gridlst[0].classList.add("set")
                  gridlst[0].children[3].innerText="mix"

                  pbtn[0].style.backgroundColor="rgba(100, 195, 0, 0.7)"

                }
              }else{
                if(gridlst[0].classList.contains("set")){
                  gridlst[0].children[3].innerText="single"
                  gridlst[1].children[3].innerText="random"
                  pbtn[0].style.backgroundColor="rgba(20, 150, 225, 0.7)"
                }else{
                  // gridlst[0].classList.add("set")
                  gridlst[0].children[3].innerText="mix"
                  gridlst[1].children[3].innerText="random"
                  pbtn[0].style.backgroundColor="rgba(100, 195, 0, 0.7)"

                }
              }
              ptxt[0].innerText = gridlst[0].children[3].innerText +" - ("+gridlst[1].children[3].innerText + ")\n Play ▶"
            }else{
              pbtn[0].style.backgroundColor="rgba(55, 195, 0, 0.7)"
            }





            if (templst[0].type == "wooden") {
                pimg[0].src = "png/" + imglst1[0]
            } else if (templst[0].type == "lofi") {
                pimg[0].src = "png/" + imglst1[1]
            } else if (templst[0].type == "retro") {
                pimg[0].src = "png/" + imglst1[2]
            } else if (templst[0].type == "808") {
                pimg[0].src = "png/" + imglst1[3]
            } else if (templst[0].type == "hiphop") {
                pimg[0].src = "png/" + imglst1[4]
            }
            // console.log(pcode[0].innerText);
            // document.getElementById("step3").classList.remove("fade");
            // document.getElementById("categ1").classList.remove("show");
            // document.getElementById("categ1").classList.add("fade");
            setTimeout(function() {
                // document.getElementById("categ1").classList.add("hidden");
                // document.getElementById("step3").classList.remove("hidden");
                // document.getElementById("step3").classList.add("show");
            }, 100);
        }

        function goBack(n) {
            // var pbtn = document.querySelector(".pbutton");
            // pbtn.classList.remove("show");
            // pbtn.classList.add("hidden");
            var gridlst = document.querySelectorAll("#categ1 >.grid >div");
            gridlst.forEach((item) => {
              item.classList.remove("set");
            });
            gridlst[1].children[3].innerText="random"
            gridlst[0].children[3].innerText="mix"


            var sbtn = document.querySelector(".sbutton");
            sbtn.classList.remove("show");
            sbtn.classList.add("hidden");


            if(n==6){
              document.getElementById("tutorial").classList.remove("show");
              document.getElementById("tutorial").classList.add("fade");

              document.getElementById("right").children[1].classList.add("hidden");
              document.getElementById("right").children[0].classList.remove("hidden");
              document.getElementById("right").children[0].style.display = ""

              document.getElementById("optionlst").classList.remove("show");
              document.getElementById("optionlst").classList.add("fade");
              setTimeout(function() {

              }, 100);
              setTimeout(function() {
                  document.getElementById("tutorial").classList.add("hidden");
                  document.getElementById("optionlst").classList.add("hidden");

              }, 100);

              // return;
            }
            if(n==5){
              document.getElementById("mod-overlay").classList.remove("show");
              document.getElementById("mod-overlay").classList.add("fade");

              document.getElementById("credit-info").classList.remove("show");
              document.getElementById("credit-info").classList.add("fade");
              setTimeout(function() {
                  document.getElementById("mod-overlay").classList.add("hidden");
                  document.getElementById("credit-info").classList.add("hidden");
              }, 100);

            }

            if (document.getElementById("setting-overlay").classList.contains("show")) {
                document.getElementById("setting-overlay").classList.remove("show");
                document.getElementById("setting-overlay").classList.add("fade");
                setTimeout(function() {
                    document.getElementById("setting-overlay").classList.add("hidden");
                }, 100);
            }
            if (!document.getElementById("gameover-overlay").classList.contains("hidden")) {
                document.getElementById("gameover-overlay").classList.remove("show");
                document.getElementById("gameover-overlay").classList.add("fade");
                setTimeout(function() {
                    document.getElementById("gameover-overlay").classList.add("hidden");
                }, 100);
                if (!rotationflag) {
                    rotationflag = true
                    restartflag = true
                    pluscoin = parseInt(점수 / 10)
                    // coin += pluscoin;
                    for (var i = 0; i < cubes.length; i++) {
                        restartloc.push(cubes[i].mesh.position);
                        restartrot.push(cubes[i].mesh.rotation);
                    }
                    ncolornum = parseInt(Math.random() * colorlst.length);
                    ncolornum0 = parseInt(Math.random() * colorlst0.length);
                    rehsl1 = hexToHSL(hexToHtmlColor(colorlst[colornum][0]))
                    renhsl1 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][0]))
                    rehsl2 = hexToHSL(hexToHtmlColor(colorlst[colornum][1]))
                    renhsl2 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][1]))
                    rehsl3 = hexToHSL(hexToHtmlColor(colorlst[colornum][2]))
                    renhsl3 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][2]))
                    rehsl4 = hexToHSL(hexToHtmlColor(colorlst[colornum][3]))
                    renhsl4 = hexToHSL(hexToHtmlColor(colorlst[ncolornum][3]))
                    bhsl0 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][0]))
                    nbhsl0 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][0]))
                    bhsl1 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][1]))
                    nbhsl1 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][1]))
                    bhsl2 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][2]))
                    nbhsl2 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][2]))
                    bhsl3 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][3]))
                    nbhsl3 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][3]))
                    bhsl4 = hexToHSL(hexToHtmlColor(colorlst0[colornum0][4]))
                    nbhsl4 = hexToHSL(hexToHtmlColor(colorlst0[ncolornum0][4]))
                    rotationend = Math.PI / 4
                }
            }
            window.scrollTo(0, 0);
            if (!document.getElementById("step1").classList.contains("hidden")) {
                document.getElementById("options-overlay").classList.add("fade");
                document.getElementById("options-overlay").classList.remove("show");
                document.getElementById("center").classList.remove("fade");
                document.getElementById("left").classList.remove("fade");
                document.getElementById("right").classList.remove("fade");
                setTimeout(function() {
                    document.getElementById("options-overlay").classList.add("hidden");
                    document.getElementById("left").classList.add("show");
                    document.getElementById("right").classList.add("show");
                    document.getElementById("left").classList.remove("hidden");
                    document.getElementById("right").classList.remove("hidden");
                    document.getElementById("center").classList.add("show");
                    document.getElementById("center").classList.remove("hidden");

                }, 100);
            } else if (!document.getElementById("categ1").classList.contains("hidden")) {
                document.getElementById("categ1").classList.remove("show");
                document.getElementById("categ1").classList.add("fade");
                setTimeout(function() {
                    document.getElementById("categ1").classList.add("hidden");
                    document.getElementById("step1").classList.remove("hidden");
                    document.getElementById("step1").classList.add("show");
                    // window.scrollTo(0, 0);
                }, 100);
            } else {
                document.getElementById("step3").classList.remove("show");
                document.getElementById("step3").classList.add("fade");
                setTimeout(function() {
                    document.getElementById("step3").classList.add("hidden");
                    document.getElementById("categ1").classList.remove("hidden");
                    document.getElementById("categ1").classList.add("show");
                }, 100);
            }
            // window.scrollTo(0, 0);
            return window.scrollTo(0, 0);
        }

        function showcredit(n){

          document.getElementById("credit-info").classList.remove("fade");
          document.getElementById("credit-info").classList.remove("hidden");
          document.getElementById("credit-info").classList.add("show");

          document.getElementById("setting-overlay").classList.remove("show");
          document.getElementById("setting-overlay").classList.add("fade");


          // document.getElementById("credit-info").classList.add("show");


        }

        function showtut(n){
          if(gamemod==2){
            document.getElementById("tutorial").children[0].style.display = "none"
            document.getElementById("tutorial").children[1].style.display = ""


            // document.getElementById("tutorial").children[0].style.display = ""
          }else{
            document.getElementById("tutorial").children[1].style.display = "none"
            document.getElementById("tutorial").children[0].style.display = ""

          }
          if(!document.getElementById("tutorial").classList.contains("hidden")){
            document.getElementById("tutorial").classList.remove("show");
            document.getElementById("tutorial").classList.add("fade");
            setTimeout(function() {
              document.getElementById("tutorial").classList.add("hidden");
            }, 100);
          }else{
            document.getElementById("tutorial").classList.remove("fade");
            document.getElementById("tutorial").classList.remove("hidden");
            document.getElementById("tutorial").classList.add("show");
          }

        }



        function pbton(n) {
            var code=document.getElementById("pbt").children[2].innerText;
            if(code[0]=="3"){
              var gridlst = document.querySelectorAll("#categ1>.grid >div");
              var item=nslst[code.substring(2, code.length)];
              item.unlock=0;
              coin-=parseInt(item.price);
              // console.log(coin)
              var pbtn = document.querySelectorAll(".pbutton")
              // document.getElementById("pbt").style.backgroundImage = 'url("https://raw.githubusercontent.com/Radetzki87/web1/master/png/blue_button00.png")'
              document.getElementById("pbt").children[1].innerText = gridlst[0].children[3].innerText +" - ("+gridlst[1].children[3].innerText + ")\n Play ▶"
              pbtn[0].style.backgroundColor="rgba(100, 195, 0, 0.7)";

              setTimeout(function() {

                document.getElementById("pbt").children[2].innerText="2 "+item.name;
              }, 50);

              var c=0;
              gridlst.forEach((obj, i) => {

                // console.log(obj.children[2].innerText.split("\n")[0]+":::"+item.title);

                if (obj.children[2].innerText.split("\n")[0]==item.title) {
                  obj.classList.remove("locked");
                  obj.children[1].style.display="none";
                  obj.children[3].style.color="white";
                }

                if(i>1&&!obj.classList.contains("locked")){
                  c++;
                }
              });

              if(c>=3){
                gridlst[0].classList.remove("locked");
                gridlst[0].children[1].style.display="none";
                gridlst[0].children[3].style.color="white";


              }
              if(c>=5){
                gridlst[1].classList.remove("locked");
                gridlst[1].children[1].style.display="none";
                gridlst[1].children[3].style.color="white";

              }

            }
        }

        function gridon(n) {
            var gridlst = document.querySelectorAll("#categ1 >.grid >div");
            if(!gridlst[n].classList.contains("locked")){
              if(gridlst[n].classList.contains("set")){
                gridlst[n].classList.remove("set")
              }else{
                gridlst[n].classList.add("set")
              }
            }
        }
    //바디
    </script>
    <div id="fps">123</div>
    <div id="tutorial" class="hidden">

    <img class="tut1" src="png/tutorial1.png">
    <img class="tut2" src="png/tutorial2.png">
    </div>


    <div id="credit-info" class="hidden">
    <button class="backbutton" onclick="goBack(5)">
    <img class="" src="png/left.png">
    </button>
        <div>
        <h2 >제작:</h2>
        <h2 >Developed by S.R. KIM </h2>
        <h2 >SOUND:</h2>
        <h2 >REFERENCE:</h2>
        </div>
    </div>

    <div id="pop-info" class="hidden">
        <span id="popline1" class="">
            <label class="p1">층 잠금: </label>
            <label class="p2"></label>
            <label class="p3">+500pt</label>
        </span>
        <span id="popline2" class="">
            <label class="p1"></label>
            <label class="p2"></label>
            <label class="p3"></label>
        </span>
    </div>

    <div id="coin-info" class="">
        <h2 id="coin1">★ : </h2>
        <h2 id="coin2">11</h2>
    </div>

    <div id="tut-info">
        <label> Touch the Tower</label>


    </div>

    <div id="song-info" class="hidden">
        <h2 id="playing">Playing: </h2>
        <div id="songtxt">
        <h2 id="artist-name">Artist Name</h2>
        <h2 id="song-title">Song Title</h2>
        </div>
        <div id="songback">
        <div id="songback1"></div>
        <div id="songback2"></div>
        <div id="songback3"></div>
        <div id="songback4"></div>
        </div>

    </div>
    <div id="intro" class="">
        <label>RAEK GAMES</label>
        <div>Touch to Start</div>
    </div>

    <button id="leftup" onclick="showtut()">
        <img src="png/question.png" >
    </button>

    <button id="left" class="left" onclick="skinon()">
    <img class="" src="png/left0.png">
    </button>

    <button id="center" class="center" onclick="showmod()">
        <img class="" src="png/gamepad.png">
    </button>

    <button id="right" class="right" onclick="optionon()">
        <img class="" src="png/up.png">
        <img class="hidden" src="png/down.png">
    </button>

    <div id="optionlst" class="optionlst hidden">
        <button onclick="showtut()">
            <img src="png/question.png" id="opt0">
        </button>
        <button class="restartbtn3" onclick="">
            <img src="png/return.png" id="opt2">
        </button>
        <button onclick="showmod()">
            <img src="png/gamepad.png" id="opt1">
        </button>
        <button onclick="showsetting()">
            <img src="png/gear.png" id="opt3">
        </button>
    </div>

    <div id="setting-overlay" class="setting-overlay hidden">
        <div id="setting-back"></div>
        <input type="range" min="1" max="5" value="1" id="myRange">
        <p id="demo"></p>
        <div class="setting-grid">
            <button id="bgm" class="setting" onclick="soundmute()">
                <img src="png/musicOn.png" >
                <img class="hidden" src="png/musicOff.png" >
                <label class="glabel">BGM</label>
            </button>

            <button id="music" class="setting" onclick="effmute()">
                <img src="png/audioOn.png" >
                <img class="hidden" src="png/audioOff.png" >
                <label class="glabel">AUDIO</label>
            </button>

            <button class="setting" onclick="optionon()">
                <img src="png/save.png" >
                <label class="glabel">restore purchase</label>
            </button>

            <button id="sidec" class="setting" onclick="">
                <img src="png/information.png" >
                <label class="glabel">sidecam</label>
            </button>

            <button  class="setting" onclick="showcredit()">
                <img src="png/information.png" >
                <label class="glabel">CREDIT</label>
            </button>

            <button class="setting" onclick="optionon()">
                <img src="png/share1.png" >
                <label class="glabel">share1</label>
            </button>

            <button  class="setting" onclick="optionon()">
                <img src="png/star.png" >
                <label class="glabel">RATE</label>
            </button>

            <button class="setting" onclick="goBack(5)">
                <img src="png/cross.png" >
                <label class="glabel">exit</label>
            </button>

            <button id="restartbtn2" class="setting">
                <img src="png/return.png" >
                <label class="glabel">language</label>
            </button>
        </div>
    </div>
    <div id="gameover-overlay" class="gameover-overlay hidden">
        <div class="gameover-container">
            <div class="gameinfo1">
                <label class="a"></label>
                <label class="b"></label>
            </div>

            <div class="gameinfo0">
            </div>

            <div class="gameinfo">
            <h1 id="코인">★ 획득</h1>
            <hr size="5px" width="95%"/>
            <span id="기본" class="hidden">
            <label class="a"> </label>
            <label class="b"> (× 0.1)</label>
            <label class="c"> </label>
            </span>

            <span id="시간" class="hidden">
            <label class="a"> </label>
            <label class="b"> (× 0.1)</label>
            <label class="c"> </label>
            </span>

            <span id="full" class="hidden">
            <label class="a"> </label>
            <label class="b"> (× 100)</label>
            <label class="c"> </label>
            </span>

            <span id="max" class="hidden">
            <label class="a"> </label>
            <label class="b"> (× 1)</label>
            <label class="c"> </label>
            </span>
            <hr size="5px" width="95%"/>

            <span id="총획득" class="hidden">
            <label class="d">획득 코인:</label>
            <label class="e"> </label>
            <label class="f"> </label>
            </span>
            </div>
            <div class="gameover">
                <label class="glabel">Claim & retry</label>
                <button id="restartbtn" class="gameoverbt">
                    <img src="png/return.png" >
                </button>
            </div>


            <div class="gameover">
                <label class="glabel">SHARE </label>
                <button id="" class="gameoverbt">
                    <img src="png/movie.png" >
                </button>
            </div>

        </div>
    </div>
    <div id="options-overlay" class="options-overlay hidden">
        <div class="container">
            <div id="step1">
                <button class="backbutton" onclick="goBack(1)">
                <img class="" src="png/left.png">
                </button>
                <div class="button-column">
                    <h1 class="title">NO ADS</h1>
                    <button class="ad-button" onclick="loaddb()">
                        <h2>GET AD-FREE</h2>
                    </button>

                    <h1 class="title">SKIN</h1>
                    <button class="ap-button" onclick="showshop()">
                        <h2>appearance shop</h2>

                    </button>
                    <div class="option-RL">
                        <button id="skin-left">L</button>
                        <label id="skin-middle">
                            <img src="png/s000.png" alt="Character 2">
                            Default
                        </label>
                        <button id="skin-right">R</button>
                    </div>

                    <h1 class="title">THEME</h1>
                    <button class="cat-button" onclick="showGrid(0)">
                        <img src="png/0.png" alt="Mute" >
                        CUBE (DEFAULT)
                        <div class="color4"></div>

                    </button>

                    <button class="cat-button" onclick="showGrid(1)">
                        <img src="png/1.png" alt="Mute" >
                        LO-FI
                        <div class="color4"></div>

                    </button>

                    <button class="cat-button unpaid" onclick="showGrid(2)">
                        <img src="png/2.png" alt="Mute" >
                        RETRO
                        <div class="color4"></div>

                    </button>

                    <button class="cat-button unpaid" onclick="showGrid(3)">
                        <img src="png/3a.png" alt="Mute" >
                        808
                        <div class="color4"></div>

                    </button>

                    <button class="cat-button unpaid" onclick="showGrid(4)">
                        <img src="png/7.png" alt="Mute">
                        hiphop
                        <div class="color4"></div>

                    </button>

                    <button class="cat-button" onclick="">comming soon!
                    </button>

                </div>
            </div>



            <div id="categ1" class="hidden">
                <button class="backbutton" onclick="goBack(9)" id="backbtn">
                <img class="" src="png/left.png">
                </button>
                <h1 class="title">Category</h1>

                 <img src="png/0.png" alt="Mute" id="img2">

                <div class="progress-container">
                    <div class="progress">
                        <div class="progress-bar" style="width: 30%;"></div>
                    </div>
                    <span class="unlocked-count">3/10</span>
                </div>
                <div class="grid">
                    <div class="character locked" onclick="showPopup(0)" id="grid0">
                        <img src=""  class="charimg">
                        <img  src="" class="">
                        <img  src="" class="">
                        <span id="grid0t">mix</span>

                    </div>
                    <div class="character locked" onclick="showPopup(1)" id="grid1">
                        <img src=""  class="charimg">
                        <img  src="" class="">
                        <img  src="" class="">
                        <span id="grid1t">random</span>

                    </div>
                    <div class="character locked" onclick="showPopup(2)">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 3</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(3)">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 4</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(4)">
                        <img src="" alt="Character 1" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 1</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(5)">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 2</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(6)">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 3</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(7)">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 4</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(8)">
                        <img src="" alt="Character 1" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 1</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(9)">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 2</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(10)">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 3</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(11)">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 4</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(12)">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 4</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <!-- Add more characters -->
                </div>
                <span id="lowerbtn">
                  <button class="pbutton hidden" onclick="pbton()" id="pbt">
                      <img src="" alt="Character 2">
                      <label>Play</label>
                      <h1>a</h1>
                  </button>
                  <button class="sbutton hidden" onclick="" id="pbt2">
                      <img src="png/musicOn.png" alt="">
                      <label></label>
                      <h1></h1>
                  </button>
                </span>
            </div>

            <div id="step3" class="hidden">
                <button class="backbutton" onclick="goBack()">
                <img class="" src="png/left.png">
                </button>
                <h1 class="title">Character 1</h1>
                <div class="character-details">
                    <img src="" alt="Character 1" style="width: 200px; height: 200px;">
                    <p>Description of Character 1</p>
                    <button class="button arrow-left" onclick="alert('Switch to previous character')">&lt;</button>
                    <button class="button arrow-right" onclick="alert('Switch to next character')">&gt;</button>
                </div>
            </div>

            <div id="shop" class="hidden">
                <button class="backbutton" onclick="goBack(9)">
                <img class="" src="png/left.png">
                </button>
                <h1 class="title">SKIN SHOP</h1>

                 <img src="png/0.png">

                <div class="progress-container">
                    <div class="progress">
                        <div class="progress-bar" style="width: 30%;"></div>
                    </div>
                    <span class="unlocked-count">3/10</span>
                </div>

                <div class="grid">
                    <div class="character locked" onclick="showPopup(0)" id="g1">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 3</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(1)" id="g2">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 3</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(2)" id="g3">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 3</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(3)" id="g4">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 4</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(4)" id="g5">
                        <img src="" alt="Character 1" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 1</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(5)" id="g6">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 2</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(6)" id="g7">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 3</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(7)" id="g8">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 4</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(8)" id="g9">
                        <img src="" alt="Character 1" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 1</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(9)" id="g10">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 2</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(10)" id="g11">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 3</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked" onclick="showPopup(11)" id="g12">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 4</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <div class="character locked hidden" onclick="showPopup(12)" id="g12">
                        <img src="" alt="Character 2" class="charimg">
                        <img src="png/locked.png" alt="locked" class="lockimg">
                        <span>Character 4</span>
                        <span>artist</span>
                        <span>price</span>
                    </div>
                    <!-- Add more characters -->
                </div>
                <span id="lowerbtn">
                  <button class="pbutton hidden" onclick="pbton()" id="gbt1">
                      <img src="" alt="Character 2">
                      <label>Play</label>
                      <h1>a</h1>
                  </button>
                  <button class="sbutton hidden" onclick="" id="gbt2">
                      <img src="png/musicOn.png" alt="">
                      <label></label>
                      <h1></h1>
                  </button>
                </span>
            </div>

        </div>
    </div>

    <div id="mod-overlay" class="mod-overlay hidden">
        <button class="backbutton" onclick="goBack(5)">
        <img class="" src="png/left.png">
        </button>
        <div class="modinfo1">
            <label class="a">GAME MOD</label>
            <label class="b"></label>
        </div>
        <div class="mod-container">
            <div class="mod">
                <button id="mod0" class="modbt">
                    <img src="png/joystick.png" >
                </button>
                <label class="mlabel">BASIC</label>
                <b>기본</b>
            </div>

            <div class="mod">
                <button id="mod1" class="modbt" onclick="">
                    <img src="png/joystickRight.png" >
                </button>
                <label class="mlabel">HARD</label>
                <b>어려움</b>
            </div>

            <div class="mod">
                <button id="mod2" class="modbt">
                    <img src="png/barsHorizontal.png" >
                </button>
                <label class="mlabel">STACK</label>
                <b>스택</b>

            </div>

        </div>
    </div>

</body>

</html>
